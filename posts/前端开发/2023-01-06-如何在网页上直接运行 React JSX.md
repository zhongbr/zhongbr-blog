---
title: '如何在网页上直接运行 React JSX?'
tags: ['前端', 'React', 'babel']
editing: true
---

# 如何在网页上直接运行 React JSX?

我们在日常编写博客的时候，经常会书写一些 Jsx 的 DEMO 代码，其他人在浏览我们的博客文章的时候就可以参考一下这些 DEMO 代码。
*有没有一种方法，可以在其他人浏览我们的博客文章的时候，直接把 JSX 编写的代码片段，给渲染成真实的 dom 节点*，不仅在博客内可以用到，在编写组件文档的时候就会非常有用。

就像下面这段 DEMO 代码一样，你不妨点击一下 "预览" 按钮，就可以直接看到这段代码渲染成真实的 dom 之后的样子，甚至还可以进行交互。

```tsx
// <live-demo>
import React, { useState } from 'react';
// 可以直接从 unpkg.com 自动导入满足 umd / amd 规范的依赖
import { Button, Modal } from 'antd';

const CompTest: React.FC<{}> = props => {
    const [show, setShow] = useState(false);
    
    return (
        <>
            <Modal
                visible={show}
                title="这是一个 ant-design 的弹窗"
                onCancle={() => setShow(false)}
                onOk={() => setShow(false)}
            >
                <span>这是弹窗的内容 🚀</span>
            </Modal>
            <Button type="primary" onClick={() => setShow(true)}>点击Antd按钮</Button>
        </>
    )
}

export default CompTest;
```

众所周知，JSX 是一种 JavaScript 扩展语法，用于在 JavaScript 中描述 UI，拥有 JavaScript 的所有特性，相对于其他的模板，具有非常高的灵活性。
但是 JSX 是不可以直接被浏览器识别的，需要经过构建工具构建之后，转换成可以普通的 JavaScript 代码之后，才可以在浏览器中运行。

## 如何把 JSX 转换成 JS ？

想让浏览器可以执行 JSX 代码有两种思路：
- 构建阶段转换，直接将 demo 中的 JSX 代码也一起转换成 JavaScript
- 运行时转换，在浏览器中加入一个转换的逻辑，将 JSX 代码转换成 JavaScript，然后通过 Function 、 eval 等方式进行执行。

在构建阶段进行转换，实现成本较低，并且执行时的**性能也更高**，但是这样做会缺乏灵活性，构建完成后无法动态地修改 JSX 的代码，比较适用于只做展示的场景，如果是组件文档需要实时编辑的话，就无法通过这种方式来实现了。

市面上还有一些产品，比如 CodeSandbox ，是通过将代码在服务端构建，然后直接将 html 通过 url 的方式提供给浏览器展示的方式实现，这种方式兼顾了性能和灵活性，
但是需要提供一个后端服务，成本是非常高的，土豪可以试试用这种方式。

对于一个个人博客或者说一个开源组件的文档来说，成本最低的方式当然是能够在一个静态的页面中进行，而不需要依赖任何后端服务，这样仅需一个 Github Pages 就可以了。

### Babel Standalone

Babel 是前端工程化里使用最广泛的 JS 预处理器，让我们可以在编写代码时使用一些最新的或者浏览器还不支持的特性，转换成浏览器可以识别的代码。
Babel 除了可以用在 NodeJS 构建编译阶段以外，还提供了 @babel/standalone 包，可以直接在浏览器内运行。

基于 Babel standalone ，我们就可以实现在浏览器内将 JSX 代码转换成 JS，然后进行执行。
