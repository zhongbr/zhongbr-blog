---
title: '内存的基本概念'
tags: ['操作系统','内存']
---
# 内存的基本概念

内存是用于存放数据的硬件，程序执行前需要先放到内存里，才能被CPU处理。



内存存储单元编址：

按字节编址：每个存储单元大小为1字节

按字编址：每个存储单元的大小为一个字，根据计算机不同，字的大小也不同



## 相对地址和绝对地址

相对地址：又称为逻辑地址，编译后，目标模块都是从0号单元开始编址，称为该目的模块的相对地址

绝对地址：又称为物理地址，指内存中物理存储单元的地址

*****

## 写程序到程序运行

1. 编译：将用户的源代码编译成若干个目标模块，把高级语言翻译成机器语言
2. 链接：由链接程序把编译后的目标模块以及所需要的库函数链接在一起，形成一个完整的**装入模块**（例如windows中的.exe）
3. 装入：由装入程序把装入模块装入内存运行（逻辑地址 $\rightarrow$ 物理地址）

### 链接方式

#### 静态链接

在程序运行之前，把各个模块需要的库函数链接成一个完整的可执行文件，之后不能再拆开

#### 动态链接

装入的时候，边装入边链接模块需要的库函数

### 运行时动态链接

在程序执行的过程中需要目标模块的时候，才对其进行链接，方便修改和更新，便于实现对目标模块的共享

### 装入方式

#### 绝对装入

 如果在编译的时候就知道程序会被放到内存的那个位置，编译的时候将产生绝对地址的目标代码，装入程序将按照装入模块中的地址，将程序装入内存。

缺点：灵活性低，只适用于单道程序环境

#### 静态重定位

静态重定位：又称为可重定位装入。编译、链接后的装入模块的地址都是从0开始的，指令中使用的地址、数据存放的地址都是相对于起始地址的逻辑地址，可以根据内存的使用情况，将装入模块装入到合适的位置，装入时对地址进行“重定位”，在装入时将逻辑地址变换为物理地址、

特点：作业装入的时候，必须分配装入模块要求的全部内存空间，如果没有足够的内存空间，就不能装入该作业。作业一旦进入内存之后，运行期间就不可以移动，也不能再申请内存空间。

#### 动态重定位

动态运行时装入。编译、链接后的装入模块的地址都是从0开始的。装入程序的时候把装入模块转入内存后，并不会立即把逻辑地址转换为物理地址，而是把地址转换推迟到需要执行的时候才进行，因此装入内存后的所有地址仍然是逻辑地址。这种装入方式需要一个**重定位寄存器**（存放模块再内存中的起始位置）的支持。

特点：

- 允许程序再内存中发生移动。

- 可以把程序分配到不连续的存储区
- 程序运行时可以指装入一部分代码
- 可以在运行期间动态申请内存
- 便于程序段共享
- 可以向用户提供一个比存储空间大得多的地址空间
