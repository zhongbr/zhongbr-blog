---
title: '计算机网络的分层结构'
tags: ['计算机网络']
---
# 计算机网络的分层结构

## 分层的基本规则

1. 各层之间要相互独立，每一层只是先相对独立的功能
2. 每层之间的界面清晰，易于理解，相互交流尽可能少
3. 结构上可以分开，采用合适的技术实现
4. 保持上下层的独立性，上层使用下层实现的服务
5. 整个分层结构可以促进标准化工作

## 分层的基本概念

1. 实体：第n层中的活动元素成为n层实体，同一层的实体互称为对等实体
2. 协议：未进行网络中对等实体数据交换而建立的规则、标准或者约定称为网络协议
   - 语法：规定传输数据的格式
   - 语义：规定要完成的功能
   - 同步：规定各种操作的顺序
3. 接口（访问服务点SAP）：上层使用下层服务的入口
4. 服务：下层为相邻上层提供的功能调用

***********************************

## 7层OSI参考模型（法定标准）

- 应用层
  所有能与用户交互，产生网络流量的程序，例如QQ、微信等
  典型协议：文件传输ftp、电子邮件smtp、万维网http
- 表示层
  用于处理在两个通信系统中交换信息的表示方式（语法和语义）

  - 数据格式的变换
  - 数据加密/解密
  - 数据的压缩和恢复

- 会话层
  
  向表示层的实体/用户进程提供建立连接，并且在连接上有序的传输数据，建立同步

  - 建立、管理和终止会话
  - 使用校验点，使得绘画在通信失效时从校验点/同步点继续恢复通信，实现数据同步

- 传输层
  
  负责主机中两个进程的通信，即端对端的通信，传输单位是报文段或者用户数据段
  
  - 可靠传输、不可靠传输
  - 差错控制
  - 流量控制
  - 复用分用：复用指的多个应用层可以同时使用下面传输层提供的服务，分用指的是把收到的信息交付给应用层中对应的进程。

  协议：TCP、UDP协议

- 网络层（IP层）
  
  把分组从源端传输到目的端，为分组交换网上的不同主机提供通信服务，网络层的传输单位是数据报。

  - 路由选择：选出最佳路径
  - 流量控制：对发送端速度的控制
  - 差错控制：通过纠正机制，保证提供给上层的数据都是正确的
  - 拥塞控制：若所有的结点都来不及接受分组，而要丢弃大量分组，网络就处于拥塞状态，要采取一定的措施来缓解这种拥塞。

  主要协议：IP、IPX、ICMP、IGMP、ARP、RARP、OSPF

- 数据链路层
  
  把网络层传下来的数据报组装成帧，数据层链路层/链路层的传输单位是帧

  - 成帧：定义帧的开始和结束
  - 差错控制：帧错、位错
  - 流量控制
  - 访问（接入）控制：控制对信道的访问

- 物理层
  
  在物理媒体上实现对比特流的透明传输，物理层的传输单位是比特

  透明传输：不管所传的数据是什么样的比特组合，都应该能够在链路上传输

  - 定义接口特性
  - 定义传输模式：单工（一端只能发送，而另一端只能接收）、半双工（两端都可以作为发送方，但是同时只能有一方作为发送方）、双工（两端可以同时发送数据）
  - 定义传输速率
  - 比特同步
  - 比特编码

  主要协议：Rj45、802.3

**********************************

## 4层TCP/IP模型（事实标准）

- 应用层（对应OSI内的：应用层+表示层+会话层）
  
  主要协议：http、ftp、dns

- 传输层（对应OSI内的：传输层）
  
  主要协议：tcp、udp

- 网际层（对应OSI内的：网络层）

  主要协议：ip

- 网络接口层（对应OSI内的：数据链路层+物理层）
  
  主要协议：Ethernet、ATM、Fram Relay

## TCP/IP模型和OSI模型的相同点与不同点

### 相同点

1. 都分层
2. 都基于独立的协议栈的概念
3. 可以实现异构网络的互联

### 不同点

1. OSI定义了三点：服务、协议和接口
2. OSI先出现，参考模型先于协议发明，不偏向特定的协议
3. TCP/IP设计之初就考虑到异构网互联的问题，将IP作为重要层次
4. 如下：

> 面向连接：分为三个阶段：
>
> - 建立连接，发出一个建立连接的请求，只有在连接建立完成后才可以开始第二阶段
> - 数据传输
> - 释放连接
>
> 无连接：只进行数据传输
>
> ||ISO/OSI参考模型|TCP/IP模型|
> |-|-|-|
> |网络层|无连接+面向连接|无连接|
> |传输层|面向连接|无连接+面向练级|

********************************************

## 5层参考模型

综合了OSI参考模型和TCP/IP参考模型的优点

- 应用层
  
  支持各种网络应用
  
  协议：ftp、smtp、http

- 传输层

  进程-进程的数据传输 
  
  协议：tcp、udp

- 网络层

  源主机到目的主机的数据分组路由和转发

  协议：ip、icmp、ospf等

- 数据链路层
  
  把网络层传下来的数据报组装成帧
  
  协议：Ethernet、PPP

- 物理层

  比特传输
