---
tags: ['数据结构','图']
---
# 关键路径

## AOE网（Activity On Edge）

AOE网是一个带权的有向无环图，顶点表示事件(Event)，弧表示活动，权表示活动的开销（如完成活动所需要的时间）。对于一个事件，只有其入边上的事件结束（如果有多个入边，需要都结束）时才可以开始顶点上对应的事件，

AOE网中始终有一个顶点的入度是0，这个顶点成为AOE网的**源点**，有一个点的出度为0，这样的点成为**汇点**。

## 关键路径

从AOE的源点到AOE的汇点，其路径长度最大的路径被称为时关键路径，关键路径上的活动成为关键活动。

之所以将路径长度最大的路径称为关键路径，是因为关键路径是一个工程的**最大开销**，优化一个工程的开销主要就是优化其最大开销。

### 关键路径的求法

#### 求事件$v_{k}$的最早发生时间$v_{e}(k)$

从源点到该点所有路径的时间最大的作为事件$v_{k}$的最早发生时间（因为只有当$v_{k}$所有入边的活动都结束后才可以开始事件$v_{k}$，所以需要选事件最长的作为最早发生时间）。

要求$v_{k}$的最早发生时间，可以通过$v_{k}$的每一条入边上另一端的事件$v_{j}$的最早发生时间，加上这一条入边上活动的持续时间之和，取所有和的最大值，作为$v_{k}$的最早发生时间。如下递推公式：

$v_{e}(源点)=0$

$v_{e}(k)=max \\{ v_{e}(j) + Weight(v_{j}, v_{k}) \lvert \exists <v_{j}, v_{k}> \\}$

#### 求事件$v_{k}$的最迟发生时间$v_{l}(k)$

用汇点的最早发生时间减去从汇点出到沿着出边到达该顶点的路径长度的最小值（为了不推迟整个工程的进度），即为顶点$v_{k}$代表的事件的最迟发生时间。

$v_{l}(汇点)=v_{e}(汇点)$

$v_{l}(k)=min \\{ v_{l}(k) - Weight(v_{j}, v_{k}) \\}$

#### 求活动$a_{k}$的最早开始时间$a_{e}(k)$

活动$a_{i}$的最早发生时间$a_{e}(k)=v_{e}(k)$，表示其最早开始时间与活动的开始事件的最早开始事件相同。

#### 求活动$a_{k}$的最早开始时间$a_{l}(k)$

活动$a_{k}$的最迟发生时间$a_{l}(k)=v_{l}(j)-Weight(v_{k}, v_{j})$，表示其最迟开始时间为活动的结束事件的最迟开始事件相同减去此活动的持续时间。

#### 求活动$a_{k}$的差额

$d(k) = a_{l}(k) - a _{e}(k)$

所有差额为0的顶点，就是组成关键路径的顶点。

### 通过关键路径优化工程

缩短关键路径的活动时间可以加快整个工程，缩短到一定程度后，关键路径可能会发生改变，不再是工程的关键路径，此时再缩短此路径的活动时间将没有作用。

当网中关键的路径不唯一时，只有加快的关键活动或关键活动的组合包括在所有的关键路径上，才能缩短工程的时间，
