---
title: 'IP组播'
tags: ['计算机网络']
---
# IP组播

## IP数据报的三种传输方式

1. 单播：单播用于发送数据包到单个目的地，且发送一份单播报文都使用一个单播地址作为目的地址，是一种点对点的传输方式。
2. 广播：广播是指将数据报发送到同一个广播域的所有设备上的一种传输方式，是一种点对多点的传输方式。
3. 组播（多播）：网路中的某些用户需要特定的数据时，组播数据发送者发送一次数据，借助组播路由协议为组播数据包建立组播分发树，被传递的数据到达距离用户端尽可能近的结点后才开始复制和分发，时一种点对多点的传输方式。

## IP组播地址

让源设备可以将分组发送给一组设备，属于多播组的设备将被分配一个组播组IP地址（一群共同需求的相同标识）。

组播地址范围：224.0.0.0 ~ 239.255.255.255(D类)，一个D类地址表示一个组播组，只能作为分组的目标地址。源地址总是单播地址。

## 特点

1. 组播数据报尽最大努力交付，不提供可靠交付，应用于UDP
2. 对组播数据报不产生ICMP差错报文
3. 并非所有的D类地址都可以作为组播地址

## 组播的类型

### 硬件组播

同单播一样，组播IP地址也需要相应的组播MAC地址在本地网路中实际传送帧。组播MAC地址以十六进制01-00-5E开头，剩余的6个十六进制时根据IP组播地址的最后23位转换（直接映射，直白点就是抄下来）得到的。

### 因特网范围内组播

#### IGMP协议（网际组管理协议）

让路由器知道本局域网上是否有主机（的进程）参加或退出了某个组播组。使用IP数据报传递报文。

##### 工作的两个阶段

1. 某主机加入组播组：该主机向组播组的组播地址发一个IGMP报文，声明自己要成为该组播组的成员
   本地组播路由收到IGMP报文后，要利用组播路由协议把这组成员关系发给因特网上的其他组播路由器。
2. 本地组播路由器周期性探寻本地局域网上的主机，以便知道这些主机还是不是组播组的成员。
   只要还有一个主机对某个组播组响应，那么组播路由器就认为这个组是活跃的；如果经历几次探寻后没有一个主机响应，组播路由器就认为本网路上没有这个组播组的主机，因此就不再把这组的成员关系发给其他的组播路由器。

#### 组播路由选择协议

组播路由选择协议的目的是找出以源主机位根节点的组播转发树。

构造树可以避免在路由器之间兜圈子。

对不同的多播组对应不同的多播转发树：同一个多播组，对不同的源点也会有不同的多播转发树。

##### 尝试用的三种算法

1. 基于链路状态的路由选择
2. 基于距离-向量的路由选择
3. 协议无关的组播（稀疏/密集）
