{"ast":{"type":"Document","children":[{"type":"Yaml","value":"title: '数据链路层流量控制和可靠传输机制'\ntags: ['计算机网络','数据链路层']","loc":{"start":{"line":1,"column":0},"end":{"line":4,"column":3}},"range":[0,57],"raw":"﻿---\ntitle: '数据链路层流量控制和可靠传输机制'\ntags: ['计算机网络','数据链路层']\n--"},{"type":"Header","depth":1,"children":[{"type":"Str","value":"数据链路层流量控制和可靠传输机制","loc":{"start":{"line":5,"column":2},"end":{"line":5,"column":18}},"range":[60,76],"raw":" 数据链路层流量控制和可靠传输机"}],"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":18}},"range":[58,76],"raw":"\n# 数据链路层流量控制和可靠传输机"},{"type":"Paragraph","children":[{"type":"Str","value":"较高的发送速度和较低的接收速度不匹配，也会造成传输出错，所以流量控制也是数据链路层的一项重要的工作。","loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":50}},"range":[78,128],"raw":"\n较高的发送速度和较低的接收速度不匹配，也会造成传输出错，所以流量控制也是数据链路层的一项重要的工作"}],"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":50}},"range":[78,128],"raw":"\n较高的发送速度和较低的接收速度不匹配，也会造成传输出错，所以流量控制也是数据链路层的一项重要的工作"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"与传输层流量控制的区别","loc":{"start":{"line":9,"column":3},"end":{"line":9,"column":14}},"range":[133,144],"raw":" 与传输层流量控制的区"}],"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":14}},"range":[130,144],"raw":"\n## 与传输层流量控制的区"},{"type":"Paragraph","children":[{"type":"Str","value":"数据链路层流量控制是点到点的流量控制，控制手段是接收端接收不下，就不向发送端发送确认帧","loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":43}},"range":[146,189],"raw":"\n数据链路层流量控制是点到点的流量控制，控制手段是接收端接收不下，就不向发送端发送确认"}],"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":43}},"range":[146,189],"raw":"\n数据链路层流量控制是点到点的流量控制，控制手段是接收端接收不下，就不向发送端发送确认"},{"type":"Paragraph","children":[{"type":"Str","value":"传输层流量控制是端到端的流量控制，控制手段是如果接收端缓存区不够，就向发送端发送窗口公告","loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":44}},"range":[191,235],"raw":"\n传输层流量控制是端到端的流量控制，控制手段是如果接收端缓存区不够，就向发送端发送窗口公"}],"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":44}},"range":[191,235],"raw":"\n传输层流量控制是端到端的流量控制，控制手段是如果接收端缓存区不够，就向发送端发送窗口公"},{"type":"HorizontalRule","loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":5}},"range":[237,242],"raw":"\n****"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"流量控制、可靠传输和滑动窗口机制","loc":{"start":{"line":17,"column":3},"end":{"line":17,"column":19}},"range":[247,263],"raw":" 流量控制、可靠传输和滑动窗口机"}],"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":19}},"range":[244,263],"raw":"\n## 流量控制、可靠传输和滑动窗口机"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"流量控制的协议","loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":11}},"range":[269,276],"raw":" 流量控制的协"}],"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":11}},"range":[265,276],"raw":"\n### 流量控制的协"},{"type":"Paragraph","children":[{"type":"Str","value":"信道利用率：有效发送数据所用的时间占整个发送周期的比率。","loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":28}},"range":[278,306],"raw":"\n信道利用率：有效发送数据所用的时间占整个发送周期的比率"}],"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":28}},"range":[278,306],"raw":"\n信道利用率：有效发送数据所用的时间占整个发送周期的比率"},{"type":"Paragraph","children":[{"type":"Str","value":"信道利用率 = L/C/T","loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":13}},"range":[308,321],"raw":"\n信道利用率 = L/C/"}],"loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":13}},"range":[308,321],"raw":"\n信道利用率 = L/C/"},{"type":"Paragraph","children":[{"type":"Str","value":"信号吞吐率：信号利用率*发送方的发送速率","loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":20}},"range":[323,343],"raw":"\n信号吞吐率：信号利用率*发送方的发送速"}],"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":20}},"range":[323,343],"raw":"\n信号吞吐率：信号利用率*发送方的发送速"},{"type":"Header","depth":4,"children":[{"type":"Str","value":"停止-等待协议（特殊的滑动窗口协议）","loc":{"start":{"line":27,"column":5},"end":{"line":27,"column":23}},"range":[350,368],"raw":" 停止-等待协议（特殊的滑动窗口协议"}],"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":23}},"range":[345,368],"raw":"\n#### 停止-等待协议（特殊的滑动窗口协议"},{"type":"Paragraph","children":[{"type":"Str","value":"每发送完一个帧后就停止发送，等到接收到确认帧后继续发送。","loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":28}},"range":[370,398],"raw":"\n每发送完一个帧后就停止发送，等到接收到确认帧后继续发送"}],"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":28}},"range":[370,398],"raw":"\n每发送完一个帧后就停止发送，等到接收到确认帧后继续发送"},{"type":"Paragraph","children":[{"type":"Str","value":"发送效率比较低效","loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":8}},"range":[400,408],"raw":"\n发送效率比较低"}],"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":8}},"range":[400,408],"raw":"\n发送效率比较低"},{"type":"List","ordered":false,"start":null,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"发送窗口大小 = 1","loc":{"start":{"line":33,"column":2},"end":{"line":33,"column":12}},"range":[412,422],"raw":" 发送窗口大小 = "}],"loc":{"start":{"line":33,"column":2},"end":{"line":33,"column":12}},"range":[412,422],"raw":" 发送窗口大小 = "}],"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":12}},"range":[410,422],"raw":"\n- 发送窗口大小 = "},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"接收窗口大小 = 1","loc":{"start":{"line":34,"column":2},"end":{"line":34,"column":12}},"range":[425,435],"raw":" 接收窗口大小 = "}],"loc":{"start":{"line":34,"column":2},"end":{"line":34,"column":12}},"range":[425,435],"raw":" 接收窗口大小 = "}],"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":12}},"range":[423,435],"raw":"\n- 接收窗口大小 = "}],"loc":{"start":{"line":33,"column":0},"end":{"line":34,"column":12}},"range":[410,435],"raw":"\n- 发送窗口大小 = 1\n- 接收窗口大小 = "},{"type":"Header","depth":5,"children":[{"type":"Str","value":"发送帧丢失","loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":11}},"range":[443,448],"raw":" 发送帧丢"}],"loc":{"start":{"line":36,"column":0},"end":{"line":36,"column":11}},"range":[437,448],"raw":"\n##### 发送帧丢"},{"type":"Paragraph","children":[{"type":"Str","value":"发送完一个帧后，发送端需要启动一个定时器，如果超出一定时间仍未收到这个帧的确认帧，就要自动重传当前的发送帧。","loc":{"start":{"line":38,"column":0},"end":{"line":38,"column":54}},"range":[450,504],"raw":"\n发送完一个帧后，发送端需要启动一个定时器，如果超出一定时间仍未收到这个帧的确认帧，就要自动重传当前的发送帧"}],"loc":{"start":{"line":38,"column":0},"end":{"line":38,"column":54}},"range":[450,504],"raw":"\n发送完一个帧后，发送端需要启动一个定时器，如果超出一定时间仍未收到这个帧的确认帧，就要自动重传当前的发送帧"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"发送的帧必须有副本，便于出现丢失后重传","loc":{"start":{"line":40,"column":3},"end":{"line":40,"column":22}},"range":[509,528],"raw":" 发送的帧必须有副本，便于出现丢失后重"}],"loc":{"start":{"line":40,"column":3},"end":{"line":40,"column":22}},"range":[509,528],"raw":" 发送的帧必须有副本，便于出现丢失后重"}],"loc":{"start":{"line":40,"column":0},"end":{"line":40,"column":22}},"range":[506,528],"raw":"\n1. 发送的帧必须有副本，便于出现丢失后重"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"发送帧和确认帧需要有编号","loc":{"start":{"line":41,"column":3},"end":{"line":41,"column":15}},"range":[532,544],"raw":" 发送帧和确认帧需要有编"}],"loc":{"start":{"line":41,"column":3},"end":{"line":41,"column":15}},"range":[532,544],"raw":" 发送帧和确认帧需要有编"}],"loc":{"start":{"line":41,"column":0},"end":{"line":41,"column":15}},"range":[529,544],"raw":"\n2. 发送帧和确认帧需要有编"}],"loc":{"start":{"line":40,"column":0},"end":{"line":41,"column":15}},"range":[506,544],"raw":"\n1. 发送的帧必须有副本，便于出现丢失后重传\n2. 发送帧和确认帧需要有编"},{"type":"Header","depth":5,"children":[{"type":"Str","value":"确认帧丢失","loc":{"start":{"line":43,"column":6},"end":{"line":43,"column":11}},"range":[552,557],"raw":" 确认帧丢"}],"loc":{"start":{"line":43,"column":0},"end":{"line":43,"column":11}},"range":[546,557],"raw":"\n##### 确认帧丢"},{"type":"Paragraph","children":[{"type":"Str","value":"如果发送方发送完帧后，接收端也正常接收，但是接收方回复的确认帧丢失，发送方在自动重传后，接收端收到重传的数据包时，会将数据包丢弃，并重新回复一个确认帧。","loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":76}},"range":[559,635],"raw":"\n如果发送方发送完帧后，接收端也正常接收，但是接收方回复的确认帧丢失，发送方在自动重传后，接收端收到重传的数据包时，会将数据包丢弃，并重新回复一个确认帧"}],"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":76}},"range":[559,635],"raw":"\n如果发送方发送完帧后，接收端也正常接收，但是接收方回复的确认帧丢失，发送方在自动重传后，接收端收到重传的数据包时，会将数据包丢弃，并重新回复一个确认帧"},{"type":"Header","depth":5,"children":[{"type":"Str","value":"确认帧迟到","loc":{"start":{"line":47,"column":6},"end":{"line":47,"column":11}},"range":[643,648],"raw":" 确认帧迟"}],"loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":11}},"range":[637,648],"raw":"\n##### 确认帧迟"},{"type":"Paragraph","children":[{"type":"Image","title":null,"url":"https://i.loli.net/2020/08/07/4BMLlgriD2XnbIU.png","alt":"quicker_f36260bd-21e2-497b-a436-ee200637b394.png","loc":{"start":{"line":49,"column":0},"end":{"line":49,"column":102}},"range":[650,752],"raw":"\n![quicker_f36260bd-21e2-497b-a436-ee200637b394.png](https://i.loli.net/2020/08/07/4BMLlgriD2XnbIU.png"}],"loc":{"start":{"line":49,"column":0},"end":{"line":49,"column":102}},"range":[650,752],"raw":"\n![quicker_f36260bd-21e2-497b-a436-ee200637b394.png](https://i.loli.net/2020/08/07/4BMLlgriD2XnbIU.png"},{"type":"Paragraph","children":[{"type":"Str","value":"接收方对迟到的确认帧直接丢弃，不做处理。","loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":20}},"range":[754,774],"raw":"\n接收方对迟到的确认帧直接丢弃，不做处理"}],"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":20}},"range":[754,774],"raw":"\n接收方对迟到的确认帧直接丢弃，不做处理"},{"type":"Header","depth":4,"children":[{"type":"Str","value":"滑动窗口协议","loc":{"start":{"line":53,"column":5},"end":{"line":53,"column":11}},"range":[781,787],"raw":" 滑动窗口协"}],"loc":{"start":{"line":53,"column":0},"end":{"line":53,"column":11}},"range":[776,787],"raw":"\n#### 滑动窗口协"},{"type":"Paragraph","children":[{"type":"Str","value":"发送窗口：发送端维持一个连续的允许发送的帧的序号","loc":{"start":{"line":55,"column":0},"end":{"line":55,"column":24}},"range":[789,813],"raw":"\n发送窗口：发送端维持一个连续的允许发送的帧的序"}],"loc":{"start":{"line":55,"column":0},"end":{"line":55,"column":24}},"range":[789,813],"raw":"\n发送窗口：发送端维持一个连续的允许发送的帧的序"},{"type":"Paragraph","children":[{"type":"Str","value":"接收窗口：接收端维持一个连续的允许接收的帧的序号","loc":{"start":{"line":57,"column":0},"end":{"line":57,"column":24}},"range":[815,839],"raw":"\n接收窗口：接收端维持一个连续的允许接收的帧的序"}],"loc":{"start":{"line":57,"column":0},"end":{"line":57,"column":24}},"range":[815,839],"raw":"\n接收窗口：接收端维持一个连续的允许接收的帧的序"},{"type":"Header","depth":5,"children":[{"type":"Str","value":"后退N帧协议(GBN)","loc":{"start":{"line":59,"column":6},"end":{"line":59,"column":17}},"range":[847,858],"raw":" 后退N帧协议(GBN"}],"loc":{"start":{"line":59,"column":0},"end":{"line":59,"column":17}},"range":[841,858],"raw":"\n##### 后退N帧协议(GBN"},{"type":"Paragraph","children":[{"type":"Str","value":"发送窗口 > 1","loc":{"start":{"line":61,"column":0},"end":{"line":61,"column":8}},"range":[860,868],"raw":"\n发送窗口 > "}],"loc":{"start":{"line":61,"column":0},"end":{"line":61,"column":8}},"range":[860,868],"raw":"\n发送窗口 > "},{"type":"Paragraph","children":[{"type":"Str","value":"接收窗口 < 1","loc":{"start":{"line":63,"column":0},"end":{"line":63,"column":8}},"range":[870,878],"raw":"\n接收窗口 < "}],"loc":{"start":{"line":63,"column":0},"end":{"line":63,"column":8}},"range":[870,878],"raw":"\n接收窗口 < "},{"type":"Header","depth":6,"children":[{"type":"Str","value":"GBN发送方必须回应的三个事件","loc":{"start":{"line":65,"column":7},"end":{"line":65,"column":22}},"range":[887,902],"raw":" GBN发送方必须回应的三个事"}],"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":22}},"range":[880,902],"raw":"\n###### GBN发送方必须回应的三个事"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"网络层的调用","loc":{"start":{"line":67,"column":3},"end":{"line":67,"column":9}},"range":[907,913],"raw":" 网络层的调"}],"loc":{"start":{"line":67,"column":3},"end":{"line":67,"column":9}},"range":[907,913],"raw":" 网络层的调"}],"loc":{"start":{"line":67,"column":0},"end":{"line":67,"column":9}},"range":[904,913],"raw":"\n1. 网络层的调"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"ACK确认帧：收到ACK确认帧代表包括当前帧在内的所有之前的帧接收方都已经接收到。","loc":{"start":{"line":68,"column":3},"end":{"line":68,"column":44}},"range":[917,958],"raw":" ACK确认帧：收到ACK确认帧代表包括当前帧在内的所有之前的帧接收方都已经接收到"}],"loc":{"start":{"line":68,"column":3},"end":{"line":68,"column":44}},"range":[917,958],"raw":" ACK确认帧：收到ACK确认帧代表包括当前帧在内的所有之前的帧接收方都已经接收到"}],"loc":{"start":{"line":68,"column":0},"end":{"line":68,"column":44}},"range":[914,958],"raw":"\n2. ACK确认帧：收到ACK确认帧代表包括当前帧在内的所有之前的帧接收方都已经接收到"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"超时事件：重发所有已发出但是未确认的数据帧","loc":{"start":{"line":69,"column":3},"end":{"line":69,"column":24}},"range":[962,983],"raw":" 超时事件：重发所有已发出但是未确认的数据"}],"loc":{"start":{"line":69,"column":3},"end":{"line":69,"column":24}},"range":[962,983],"raw":" 超时事件：重发所有已发出但是未确认的数据"}],"loc":{"start":{"line":69,"column":0},"end":{"line":69,"column":24}},"range":[959,983],"raw":"\n3. 超时事件：重发所有已发出但是未确认的数据"}],"loc":{"start":{"line":67,"column":0},"end":{"line":69,"column":24}},"range":[904,983],"raw":"\n1. 网络层的调用\n2. ACK确认帧：收到ACK确认帧代表包括当前帧在内的所有之前的帧接收方都已经接收到。\n3. 超时事件：重发所有已发出但是未确认的数据"},{"type":"Header","depth":6,"children":[{"type":"Str","value":"GBN接收方任务","loc":{"start":{"line":71,"column":7},"end":{"line":71,"column":15}},"range":[992,1000],"raw":" GBN接收方任"}],"loc":{"start":{"line":71,"column":0},"end":{"line":71,"column":15}},"range":[985,1000],"raw":"\n###### GBN接收方任"},{"type":"Paragraph","children":[{"type":"Str","value":"如果正确收到N号帧，就向发送方回复一个ACK代表N号帧以及N号帧以前所有的帧都已经正确收到了","loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":46}},"range":[1002,1048],"raw":"\n如果正确收到N号帧，就向发送方回复一个ACK代表N号帧以及N号帧以前所有的帧都已经正确收到"}],"loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":46}},"range":[1002,1048],"raw":"\n如果正确收到N号帧，就向发送方回复一个ACK代表N号帧以及N号帧以前所有的帧都已经正确收到"},{"type":"Paragraph","children":[{"type":"Str","value":"对于所有不正确的情况都是直接将帧丢弃","loc":{"start":{"line":75,"column":0},"end":{"line":75,"column":18}},"range":[1050,1068],"raw":"\n对于所有不正确的情况都是直接将帧丢"}],"loc":{"start":{"line":75,"column":0},"end":{"line":75,"column":18}},"range":[1050,1068],"raw":"\n对于所有不正确的情况都是直接将帧丢"},{"type":"Header","depth":6,"children":[{"type":"Str","value":"特点","loc":{"start":{"line":77,"column":7},"end":{"line":77,"column":9}},"range":[1077,1079],"raw":" 特"}],"loc":{"start":{"line":77,"column":0},"end":{"line":77,"column":9}},"range":[1070,1079],"raw":"\n###### 特"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"累计确认（偶尔捎带确认，确认帧跟随数据一起发送给对方）","loc":{"start":{"line":79,"column":3},"end":{"line":79,"column":30}},"range":[1084,1111],"raw":" 累计确认（偶尔捎带确认，确认帧跟随数据一起发送给对方"}],"loc":{"start":{"line":79,"column":3},"end":{"line":79,"column":30}},"range":[1084,1111],"raw":" 累计确认（偶尔捎带确认，确认帧跟随数据一起发送给对方"}],"loc":{"start":{"line":79,"column":0},"end":{"line":79,"column":30}},"range":[1081,1111],"raw":"\n1. 累计确认（偶尔捎带确认，确认帧跟随数据一起发送给对方"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"接收方按序接收，接收到错误的帧时会恢复一个已经按序到达的序号最大的帧","loc":{"start":{"line":80,"column":3},"end":{"line":80,"column":37}},"range":[1115,1149],"raw":" 接收方按序接收，接收到错误的帧时会恢复一个已经按序到达的序号最大的"}],"loc":{"start":{"line":80,"column":3},"end":{"line":80,"column":37}},"range":[1115,1149],"raw":" 接收方按序接收，接收到错误的帧时会恢复一个已经按序到达的序号最大的"}],"loc":{"start":{"line":80,"column":0},"end":{"line":80,"column":37}},"range":[1112,1149],"raw":"\n2. 接收方按序接收，接收到错误的帧时会恢复一个已经按序到达的序号最大的"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"发送窗口的最大尺寸为 ","loc":{"start":{"line":81,"column":3},"end":{"line":81,"column":14}},"range":[1153,1164],"raw":" 发送窗口的最大尺寸为"},{"type":"InlineMath","value":"2^{n}-1","data":{"hName":"span","hProperties":{"className":["math","math-inline"]},"hChildren":[{"type":"Str","value":"2^{n}-1"}]},"loc":{"start":{"line":81,"column":14},"end":{"line":81,"column":23}},"range":[1164,1173],"raw":" $2^{n}-1"},{"type":"Str","value":" ，接收窗口的尺寸为1","loc":{"start":{"line":81,"column":23},"end":{"line":81,"column":34}},"range":[1173,1184],"raw":"$ ，接收窗口的尺寸为"}],"loc":{"start":{"line":81,"column":3},"end":{"line":81,"column":34}},"range":[1153,1184],"raw":" 发送窗口的最大尺寸为 $2^{n}-1$ ，接收窗口的尺寸为"}],"loc":{"start":{"line":81,"column":0},"end":{"line":81,"column":34}},"range":[1150,1184],"raw":"\n3. 发送窗口的最大尺寸为 $2^{n}-1$ ，接收窗口的尺寸为"}],"loc":{"start":{"line":79,"column":0},"end":{"line":81,"column":34}},"range":[1081,1184],"raw":"\n1. 累计确认（偶尔捎带确认，确认帧跟随数据一起发送给对方）\n2. 接收方按序接收，接收到错误的帧时会恢复一个已经按序到达的序号最大的帧\n3. 发送窗口的最大尺寸为 $2^{n}-1$ ，接收窗口的尺寸为"},{"type":"Paragraph","children":[{"type":"Str","value":"优点：","loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":3}},"range":[1186,1189],"raw":"\n优点"}],"loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":3}},"range":[1186,1189],"raw":"\n优点"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"信道的利用率高","loc":{"start":{"line":85,"column":3},"end":{"line":85,"column":10}},"range":[1194,1201],"raw":" 信道的利用率"}],"loc":{"start":{"line":85,"column":3},"end":{"line":85,"column":10}},"range":[1194,1201],"raw":" 信道的利用率"}],"loc":{"start":{"line":85,"column":0},"end":{"line":85,"column":10}},"range":[1191,1201],"raw":"\n1. 信道的利用率"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"在一个帧未接收到时，会将这个帧后面正确到达的帧丢弃，降低传输效率","loc":{"start":{"line":86,"column":3},"end":{"line":86,"column":35}},"range":[1205,1237],"raw":" 在一个帧未接收到时，会将这个帧后面正确到达的帧丢弃，降低传输效"}],"loc":{"start":{"line":86,"column":3},"end":{"line":86,"column":35}},"range":[1205,1237],"raw":" 在一个帧未接收到时，会将这个帧后面正确到达的帧丢弃，降低传输效"}],"loc":{"start":{"line":86,"column":0},"end":{"line":86,"column":35}},"range":[1202,1237],"raw":"\n2. 在一个帧未接收到时，会将这个帧后面正确到达的帧丢弃，降低传输效"}],"loc":{"start":{"line":85,"column":0},"end":{"line":86,"column":35}},"range":[1191,1237],"raw":"\n1. 信道的利用率高\n2. 在一个帧未接收到时，会将这个帧后面正确到达的帧丢弃，降低传输效"},{"type":"Header","depth":5,"children":[{"type":"Str","value":"选择重传协议(SR)","loc":{"start":{"line":88,"column":6},"end":{"line":88,"column":16}},"range":[1245,1255],"raw":" 选择重传协议(SR"}],"loc":{"start":{"line":88,"column":0},"end":{"line":88,"column":16}},"range":[1239,1255],"raw":"\n##### 选择重传协议(SR"},{"type":"Header","depth":6,"children":[{"type":"Str","value":"SR发送端必须响应的三个事件","loc":{"start":{"line":90,"column":7},"end":{"line":90,"column":21}},"range":[1264,1278],"raw":" SR发送端必须响应的三个事"}],"loc":{"start":{"line":90,"column":0},"end":{"line":90,"column":21}},"range":[1257,1278],"raw":"\n###### SR发送端必须响应的三个事"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"网络层调用","loc":{"start":{"line":92,"column":3},"end":{"line":92,"column":8}},"range":[1283,1288],"raw":" 网络层调"}],"loc":{"start":{"line":92,"column":3},"end":{"line":92,"column":8}},"range":[1283,1288],"raw":" 网络层调"}],"loc":{"start":{"line":92,"column":0},"end":{"line":92,"column":8}},"range":[1280,1288],"raw":"\n1. 网络层调"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"接收到ACK确认帧：发送方将被确认的帧标记为已确认，如果这个帧时当前发送端窗口的下届，就可以将发送端窗口移动到其后面的第一个未被确认的帧。","loc":{"start":{"line":93,"column":3},"end":{"line":93,"column":72}},"range":[1292,1361],"raw":" 接收到ACK确认帧：发送方将被确认的帧标记为已确认，如果这个帧时当前发送端窗口的下届，就可以将发送端窗口移动到其后面的第一个未被确认的帧"}],"loc":{"start":{"line":93,"column":3},"end":{"line":93,"column":72}},"range":[1292,1361],"raw":" 接收到ACK确认帧：发送方将被确认的帧标记为已确认，如果这个帧时当前发送端窗口的下届，就可以将发送端窗口移动到其后面的第一个未被确认的帧"}],"loc":{"start":{"line":93,"column":0},"end":{"line":93,"column":72}},"range":[1289,1361],"raw":"\n2. 接收到ACK确认帧：发送方将被确认的帧标记为已确认，如果这个帧时当前发送端窗口的下届，就可以将发送端窗口移动到其后面的第一个未被确认的帧"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"超时事件：每个发送出去的帧都会有一个超时计时器，超时后就会重传超时的这个帧。","loc":{"start":{"line":94,"column":3},"end":{"line":94,"column":41}},"range":[1365,1403],"raw":" 超时事件：每个发送出去的帧都会有一个超时计时器，超时后就会重传超时的这个帧"}],"loc":{"start":{"line":94,"column":3},"end":{"line":94,"column":41}},"range":[1365,1403],"raw":" 超时事件：每个发送出去的帧都会有一个超时计时器，超时后就会重传超时的这个帧"}],"loc":{"start":{"line":94,"column":0},"end":{"line":94,"column":41}},"range":[1362,1403],"raw":"\n3. 超时事件：每个发送出去的帧都会有一个超时计时器，超时后就会重传超时的这个帧"}],"loc":{"start":{"line":92,"column":0},"end":{"line":94,"column":41}},"range":[1280,1403],"raw":"\n1. 网络层调用\n2. 接收到ACK确认帧：发送方将被确认的帧标记为已确认，如果这个帧时当前发送端窗口的下届，就可以将发送端窗口移动到其后面的第一个未被确认的帧。\n3. 超时事件：每个发送出去的帧都会有一个超时计时器，超时后就会重传超时的这个帧"},{"type":"Header","depth":6,"children":[{"type":"Str","value":"SR接收端","loc":{"start":{"line":96,"column":7},"end":{"line":96,"column":12}},"range":[1412,1417],"raw":" SR接收"}],"loc":{"start":{"line":96,"column":0},"end":{"line":96,"column":12}},"range":[1405,1417],"raw":"\n###### SR接收"},{"type":"Paragraph","children":[{"type":"Str","value":"对于接收窗口内帧来者不拒，失序的帧会被缓存，并返回一个确认帧。收到谁确认谁。直到序号更小的帧都被收到时才会将收到的帧批量交付给上层。接收端窗口移动到第一个未收到的帧。","loc":{"start":{"line":98,"column":0},"end":{"line":98,"column":83}},"range":[1419,1502],"raw":"\n对于接收窗口内帧来者不拒，失序的帧会被缓存，并返回一个确认帧。收到谁确认谁。直到序号更小的帧都被收到时才会将收到的帧批量交付给上层。接收端窗口移动到第一个未收到的帧"}],"loc":{"start":{"line":98,"column":0},"end":{"line":98,"column":83}},"range":[1419,1502],"raw":"\n对于接收窗口内帧来者不拒，失序的帧会被缓存，并返回一个确认帧。收到谁确认谁。直到序号更小的帧都被收到时才会将收到的帧批量交付给上层。接收端窗口移动到第一个未收到的帧"}],"loc":{"start":{"line":1,"column":0},"end":{"line":99,"column":0}},"range":[0,1503],"raw":"﻿---\ntitle: '数据链路层流量控制和可靠传输机制'\ntags: ['计算机网络','数据链路层']\n---\n# 数据链路层流量控制和可靠传输机制\n\n较高的发送速度和较低的接收速度不匹配，也会造成传输出错，所以流量控制也是数据链路层的一项重要的工作。\n\n## 与传输层流量控制的区别\n\n数据链路层流量控制是点到点的流量控制，控制手段是接收端接收不下，就不向发送端发送确认帧\n\n传输层流量控制是端到端的流量控制，控制手段是如果接收端缓存区不够，就向发送端发送窗口公告\n\n*****\n\n## 流量控制、可靠传输和滑动窗口机制\n\n### 流量控制的协议\n\n信道利用率：有效发送数据所用的时间占整个发送周期的比率。\n\n信道利用率 = L/C/T\n\n信号吞吐率：信号利用率*发送方的发送速率\n\n#### 停止-等待协议（特殊的滑动窗口协议）\n\n每发送完一个帧后就停止发送，等到接收到确认帧后继续发送。\n\n发送效率比较低效\n\n- 发送窗口大小 = 1\n- 接收窗口大小 = 1\n\n##### 发送帧丢失\n\n发送完一个帧后，发送端需要启动一个定时器，如果超出一定时间仍未收到这个帧的确认帧，就要自动重传当前的发送帧。\n\n1. 发送的帧必须有副本，便于出现丢失后重传\n2. 发送帧和确认帧需要有编号\n\n##### 确认帧丢失\n\n如果发送方发送完帧后，接收端也正常接收，但是接收方回复的确认帧丢失，发送方在自动重传后，接收端收到重传的数据包时，会将数据包丢弃，并重新回复一个确认帧。\n\n##### 确认帧迟到\n\n![quicker_f36260bd-21e2-497b-a436-ee200637b394.png](https://i.loli.net/2020/08/07/4BMLlgriD2XnbIU.png)\n\n接收方对迟到的确认帧直接丢弃，不做处理。\n\n#### 滑动窗口协议\n\n发送窗口：发送端维持一个连续的允许发送的帧的序号\n\n接收窗口：接收端维持一个连续的允许接收的帧的序号\n\n##### 后退N帧协议(GBN)\n\n发送窗口 > 1\n\n接收窗口 < 1\n\n###### GBN发送方必须回应的三个事件\n\n1. 网络层的调用\n2. ACK确认帧：收到ACK确认帧代表包括当前帧在内的所有之前的帧接收方都已经接收到。\n3. 超时事件：重发所有已发出但是未确认的数据帧\n\n###### GBN接收方任务\n\n如果正确收到N号帧，就向发送方回复一个ACK代表N号帧以及N号帧以前所有的帧都已经正确收到了\n\n对于所有不正确的情况都是直接将帧丢弃\n\n###### 特点\n\n1. 累计确认（偶尔捎带确认，确认帧跟随数据一起发送给对方）\n2. 接收方按序接收，接收到错误的帧时会恢复一个已经按序到达的序号最大的帧\n3. 发送窗口的最大尺寸为 $2^{n}-1$ ，接收窗口的尺寸为1\n\n优点：\n\n1. 信道的利用率高\n2. 在一个帧未接收到时，会将这个帧后面正确到达的帧丢弃，降低传输效率\n\n##### 选择重传协议(SR)\n\n###### SR发送端必须响应的三个事件\n\n1. 网络层调用\n2. 接收到ACK确认帧：发送方将被确认的帧标记为已确认，如果这个帧时当前发送端窗口的下届，就可以将发送端窗口移动到其后面的第一个未被确认的帧。\n3. 超时事件：每个发送出去的帧都会有一个超时计时器，超时后就会重传超时的这个帧。\n\n###### SR接收端\n\n对于接收窗口内帧来者不拒，失序的帧会被缓存，并返回一个确认帧。收到谁确认谁。直到序号更小的帧都被收到时才会将收到的帧批量交付给上层。接收端窗口移动到第一个未收到的帧。"},"catalogue":{"title":"数据链路层流量控制和可靠传输机制","json-path":"数据链路层流量控制和可靠传输机制.json","mdate":"2022-12-31T15:02:04.610Z","cover":"https://i.328888.xyz/2022/12/31/ndj6Q.jpeg","tags":["计算机网络","数据链路层"]}}