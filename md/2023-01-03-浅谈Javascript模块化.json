{"ast":{"type":"Document","children":[{"type":"Yaml","value":"title: 'æµ…è°ˆJavaScriptæ¨¡å—åŒ–'\ntags: ['å‰ç«¯å·¥ç¨‹åŒ–', 'å‰ç«¯', 'NodeJS', 'CommonJs', 'ES Module', 'AMD']\nrecommend: 'frontend'\nicon: 'ğŸ˜'\ncover: 'https://i.328888.xyz/2023/01/02/tNist.png'","loc":{"start":{"line":1,"column":0},"end":{"line":7,"column":3}},"range":[0,180],"raw":"---\ntitle: 'æµ…è°ˆJavaScriptæ¨¡å—åŒ–'\ntags: ['å‰ç«¯å·¥ç¨‹åŒ–', 'å‰ç«¯', 'NodeJS', 'CommonJs', 'ES Module', 'AMD']\nrecommend: 'frontend'\nicon: 'ğŸ˜'\ncover: 'https://i.328888.xyz/2023/01/02/tNist.png'\n---"},{"type":"Header","depth":1,"children":[{"type":"Str","value":"æµ…è°ˆ JavaScript æ¨¡å—åŒ–","loc":{"start":{"line":8,"column":2},"end":{"line":8,"column":19}},"range":[183,200],"raw":"æµ…è°ˆ JavaScript æ¨¡å—åŒ–"}],"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":19}},"range":[181,200],"raw":"# æµ…è°ˆ JavaScript æ¨¡å—åŒ–"},{"type":"Paragraph","children":[{"type":"Str","value":"JavaScript åœ¨æœ€å¼€å§‹æ—¶æ˜¯æ²¡æœ‰æ¨¡å—åŒ–çš„æ¦‚å¿µçš„ï¼Œå³ä½¿åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨å¤šä¸ª script æ ‡ç­¾åŠ è½½çš„ jsï¼Œä»ç„¶æ˜¯å…±äº«çš„å…¨å±€å˜é‡ç©ºé—´ã€‚","loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":68}},"range":[202,270],"raw":"JavaScript åœ¨æœ€å¼€å§‹æ—¶æ˜¯æ²¡æœ‰æ¨¡å—åŒ–çš„æ¦‚å¿µçš„ï¼Œå³ä½¿åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨å¤šä¸ª script æ ‡ç­¾åŠ è½½çš„ jsï¼Œä»ç„¶æ˜¯å…±äº«çš„å…¨å±€å˜é‡ç©ºé—´ã€‚"}],"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":68}},"range":[202,270],"raw":"JavaScript åœ¨æœ€å¼€å§‹æ—¶æ˜¯æ²¡æœ‰æ¨¡å—åŒ–çš„æ¦‚å¿µçš„ï¼Œå³ä½¿åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨å¤šä¸ª script æ ‡ç­¾åŠ è½½çš„ jsï¼Œä»ç„¶æ˜¯å…±äº«çš„å…¨å±€å˜é‡ç©ºé—´ã€‚"},{"type":"Paragraph","children":[{"type":"Strong","children":[{"type":"Str","value":"æ¨¡å—åŒ–è§„èŒƒ","loc":{"start":{"line":12,"column":2},"end":{"line":12,"column":7}},"range":[274,279],"raw":"æ¨¡å—åŒ–è§„èŒƒ"}],"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":9}},"range":[272,281],"raw":"**æ¨¡å—åŒ–è§„èŒƒ**"},{"type":"Str","value":"ä¸º JavaScript æä¾›äº†æ¨¡å—ç¼–å†™ã€æ¨¡å—ä¾èµ–å’Œæ¨¡å—è¿è¡Œçš„æ–¹æ¡ˆã€‚","loc":{"start":{"line":12,"column":9},"end":{"line":12,"column":43}},"range":[281,315],"raw":"ä¸º JavaScript æä¾›äº†æ¨¡å—ç¼–å†™ã€æ¨¡å—ä¾èµ–å’Œæ¨¡å—è¿è¡Œçš„æ–¹æ¡ˆã€‚"}],"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":43}},"range":[272,315],"raw":"**æ¨¡å—åŒ–è§„èŒƒ**ä¸º JavaScript æä¾›äº†æ¨¡å—ç¼–å†™ã€æ¨¡å—ä¾èµ–å’Œæ¨¡å—è¿è¡Œçš„æ–¹æ¡ˆã€‚"},{"type":"Paragraph","children":[{"type":"Str","value":"æ€»ä½“æ¥è¯´ï¼Œç›®å‰ JavaScript æœ‰ä¸¤ç§æ¨¡å—åŒ–è§„èŒƒ(esm å’Œ CommonJS)ï¼Œ","loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":44}},"range":[317,361],"raw":"æ€»ä½“æ¥è¯´ï¼Œç›®å‰ JavaScript æœ‰ä¸¤ç§æ¨¡å—åŒ–è§„èŒƒ(esm å’Œ CommonJS)ï¼Œ"},{"type":"Strong","children":[{"type":"Str","value":"å¹¶ä¸”è¿™ä¸¤ç§æ¨¡å—åŒ–è§„èŒƒå¹¶ä¸å®Œå…¨å…¼å®¹","loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":62}},"range":[363,379],"raw":"å¹¶ä¸”è¿™ä¸¤ç§æ¨¡å—åŒ–è§„èŒƒå¹¶ä¸å®Œå…¨å…¼å®¹"}],"loc":{"start":{"line":14,"column":44},"end":{"line":14,"column":64}},"range":[361,381],"raw":"**å¹¶ä¸”è¿™ä¸¤ç§æ¨¡å—åŒ–è§„èŒƒå¹¶ä¸å®Œå…¨å…¼å®¹**"},{"type":"Str","value":"ã€‚","loc":{"start":{"line":14,"column":64},"end":{"line":14,"column":65}},"range":[381,382],"raw":"ã€‚"}],"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":65}},"range":[317,382],"raw":"æ€»ä½“æ¥è¯´ï¼Œç›®å‰ JavaScript æœ‰ä¸¤ç§æ¨¡å—åŒ–è§„èŒƒ(esm å’Œ CommonJS)ï¼Œ**å¹¶ä¸”è¿™ä¸¤ç§æ¨¡å—åŒ–è§„èŒƒå¹¶ä¸å®Œå…¨å…¼å®¹**ã€‚"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"1. CommonJS","loc":{"start":{"line":16,"column":3},"end":{"line":16,"column":14}},"range":[387,398],"raw":"1. CommonJS"}],"loc":{"start":{"line":16,"column":0},"end":{"line":16,"column":14}},"range":[384,398],"raw":"## 1. CommonJS"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"æ¦‚è¿°","loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":6}},"range":[404,406],"raw":"æ¦‚è¿°"}],"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":6}},"range":[400,406],"raw":"### æ¦‚è¿°"},{"type":"Paragraph","children":[{"type":"Str","value":"CommonJS æ˜¯ Node é»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆã€‚","loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":25}},"range":[408,433],"raw":"CommonJS æ˜¯ Node é»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆã€‚"}],"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":25}},"range":[408,433],"raw":"CommonJS æ˜¯ Node é»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆã€‚"},{"type":"Paragraph","children":[{"type":"Str","value":"require/exports æ˜¯ç”± JavaScript ç¤¾åŒºå¼€å‘è€…åœ¨ ECMAScript åˆ¶å®šæ¨¡å—åŒ–è§„åˆ™ä¹‹å‰ï¼Œè‡ªè¡Œæ‹Ÿå®šçš„è§„åˆ™ï¼Œå¾—åˆ°äº†å¹¿æ³›çš„æ‰¿è®¤å’Œä½¿ç”¨ã€‚","loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":78}},"range":[435,513],"raw":"require/exports æ˜¯ç”± JavaScript ç¤¾åŒºå¼€å‘è€…åœ¨ ECMAScript åˆ¶å®šæ¨¡å—åŒ–è§„åˆ™ä¹‹å‰ï¼Œè‡ªè¡Œæ‹Ÿå®šçš„è§„åˆ™ï¼Œå¾—åˆ°äº†å¹¿æ³›çš„æ‰¿è®¤å’Œä½¿ç”¨ã€‚"}],"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":78}},"range":[435,513],"raw":"require/exports æ˜¯ç”± JavaScript ç¤¾åŒºå¼€å‘è€…åœ¨ ECMAScript åˆ¶å®šæ¨¡å—åŒ–è§„åˆ™ä¹‹å‰ï¼Œè‡ªè¡Œæ‹Ÿå®šçš„è§„åˆ™ï¼Œå¾—åˆ°äº†å¹¿æ³›çš„æ‰¿è®¤å’Œä½¿ç”¨ã€‚"},{"type":"Paragraph","children":[{"type":"Str","value":"CommonJS å°±æ˜¯å…¶ä»£è¡¨æ€§çš„æ¨¡å—åŒ–è§„èŒƒï¼Œä¹Ÿæ˜¯ NodeJS ä½¿ç”¨çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå¹¶ä¸” NodeJS å·²ç»æœ‰å¾ˆå¤šåŸºäº CommonJS çš„åŒ…ã€‚","loc":{"start":{"line":24,"column":0},"end":{"line":24,"column":71}},"range":[515,586],"raw":"CommonJS å°±æ˜¯å…¶ä»£è¡¨æ€§çš„æ¨¡å—åŒ–è§„èŒƒï¼Œä¹Ÿæ˜¯ NodeJS ä½¿ç”¨çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå¹¶ä¸” NodeJS å·²ç»æœ‰å¾ˆå¤šåŸºäº CommonJS çš„åŒ…ã€‚"}],"loc":{"start":{"line":24,"column":0},"end":{"line":24,"column":71}},"range":[515,586],"raw":"CommonJS å°±æ˜¯å…¶ä»£è¡¨æ€§çš„æ¨¡å—åŒ–è§„èŒƒï¼Œä¹Ÿæ˜¯ NodeJS ä½¿ç”¨çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå¹¶ä¸” NodeJS å·²ç»æœ‰å¾ˆå¤šåŸºäº CommonJS çš„åŒ…ã€‚"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"åŠ è½½è¿‡ç¨‹","loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":8}},"range":[592,596],"raw":"åŠ è½½è¿‡ç¨‹"}],"loc":{"start":{"line":26,"column":0},"end":{"line":26,"column":8}},"range":[588,596],"raw":"### åŠ è½½è¿‡ç¨‹"},{"type":"Paragraph","children":[{"type":"Strong","children":[{"type":"Str","value":"CommonJS æ¨¡å—æ˜¯åŠ¨æ€å¹¶ä¸”åŒæ­¥æ‰§è¡Œçš„","loc":{"start":{"line":28,"column":2},"end":{"line":28,"column":23}},"range":[600,621],"raw":"CommonJS æ¨¡å—æ˜¯åŠ¨æ€å¹¶ä¸”åŒæ­¥æ‰§è¡Œçš„"}],"loc":{"start":{"line":28,"column":0},"end":{"line":28,"column":25}},"range":[598,623],"raw":"**CommonJS æ¨¡å—æ˜¯åŠ¨æ€å¹¶ä¸”åŒæ­¥æ‰§è¡Œçš„**"},{"type":"Str","value":"ï¼Œæ‰§è¡Œåˆ° require å‡½æ•°è¯­å¥æ—¶ï¼Œå¯¹åº”çš„æ–‡ä»¶æ‰ä¼šè¢«åŠ è½½å¹¶æ‰§è¡Œï¼Œå°†å·¦å³ module.exports ä¸Šè®¾ç½®çš„å†…å®¹è¿”å›ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ require æ—¶ï¼Œå¹¶ä¸è¦æ±‚ require çš„ä½ç½®ï¼Œè¯¥è¯­å¥å¯ä»¥åœ¨ä»»æ„ä½ç½®æ‰§è¡Œã€‚","loc":{"start":{"line":28,"column":25},"end":{"line":28,"column":132}},"range":[623,730],"raw":"ï¼Œæ‰§è¡Œåˆ° require å‡½æ•°è¯­å¥æ—¶ï¼Œå¯¹åº”çš„æ–‡ä»¶æ‰ä¼šè¢«åŠ è½½å¹¶æ‰§è¡Œï¼Œå°†å·¦å³ module.exports ä¸Šè®¾ç½®çš„å†…å®¹è¿”å›ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ require æ—¶ï¼Œå¹¶ä¸è¦æ±‚ require çš„ä½ç½®ï¼Œè¯¥è¯­å¥å¯ä»¥åœ¨ä»»æ„ä½ç½®æ‰§è¡Œã€‚"}],"loc":{"start":{"line":28,"column":0},"end":{"line":28,"column":132}},"range":[598,730],"raw":"**CommonJS æ¨¡å—æ˜¯åŠ¨æ€å¹¶ä¸”åŒæ­¥æ‰§è¡Œçš„**ï¼Œæ‰§è¡Œåˆ° require å‡½æ•°è¯­å¥æ—¶ï¼Œå¯¹åº”çš„æ–‡ä»¶æ‰ä¼šè¢«åŠ è½½å¹¶æ‰§è¡Œï¼Œå°†å·¦å³ module.exports ä¸Šè®¾ç½®çš„å†…å®¹è¿”å›ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ require æ—¶ï¼Œå¹¶ä¸è¦æ±‚ require çš„ä½ç½®ï¼Œè¯¥è¯­å¥å¯ä»¥åœ¨ä»»æ„ä½ç½®æ‰§è¡Œã€‚"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"ç‰¹ç‚¹","loc":{"start":{"line":30,"column":4},"end":{"line":30,"column":6}},"range":[736,738],"raw":"ç‰¹ç‚¹"}],"loc":{"start":{"line":30,"column":0},"end":{"line":30,"column":6}},"range":[732,738],"raw":"### ç‰¹ç‚¹"},{"type":"Paragraph","children":[{"type":"Str","value":"å¯¼å…¥åŒ…æ—¶ä½¿ç”¨çš„ ","loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":8}},"range":[740,748],"raw":"å¯¼å…¥åŒ…æ—¶ä½¿ç”¨çš„ "},{"type":"Strong","children":[{"type":"Str","value":"require åªæ˜¯æ™®é€šçš„å‡½æ•°ï¼Œexports ä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡","loc":{"start":{"line":32,"column":10},"end":{"line":32,"column":43}},"range":[750,783],"raw":"require åªæ˜¯æ™®é€šçš„å‡½æ•°ï¼Œexports ä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡"}],"loc":{"start":{"line":32,"column":8},"end":{"line":32,"column":45}},"range":[748,785],"raw":"**require åªæ˜¯æ™®é€šçš„å‡½æ•°ï¼Œexports ä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡**"},{"type":"Str","value":"ï¼Œæ‰€ä»¥ï¼š","loc":{"start":{"line":32,"column":45},"end":{"line":32,"column":49}},"range":[785,789],"raw":"ï¼Œæ‰€ä»¥ï¼š"}],"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":49}},"range":[740,789],"raw":"å¯¼å…¥åŒ…æ—¶ä½¿ç”¨çš„ **require åªæ˜¯æ™®é€šçš„å‡½æ•°ï¼Œexports ä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡**ï¼Œæ‰€ä»¥ï¼š"},{"type":"List","ordered":false,"start":null,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"å¯¹äºåŸºç¡€æ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚ numberã€string ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†ä» require å¼•å…¥æ˜¯å€¼ä¼ é€’ï¼Œå¦‚æœæ¨¡å—å†…çš„å€¼åœ¨ exports åå‘ç”Ÿå˜åŒ–ï¼Œ","loc":{"start":{"line":34,"column":2},"end":{"line":34,"column":86}},"range":[793,877],"raw":"å¯¹äºåŸºç¡€æ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚ numberã€string ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†ä» require å¼•å…¥æ˜¯å€¼ä¼ é€’ï¼Œå¦‚æœæ¨¡å—å†…çš„å€¼åœ¨ exports åå‘ç”Ÿå˜åŒ–ï¼Œ"},{"type":"Strong","children":[{"type":"Str","value":"ç”± require å¼•å…¥çš„è¯¥å€¼å¹¶ä¸ä¼šå‘ç”Ÿå˜åŒ–","loc":{"start":{"line":34,"column":88},"end":{"line":34,"column":110}},"range":[879,901],"raw":"ç”± require å¼•å…¥çš„è¯¥å€¼å¹¶ä¸ä¼šå‘ç”Ÿå˜åŒ–"}],"loc":{"start":{"line":34,"column":86},"end":{"line":34,"column":112}},"range":[877,903],"raw":"**ç”± require å¼•å…¥çš„è¯¥å€¼å¹¶ä¸ä¼šå‘ç”Ÿå˜åŒ–**"},{"type":"Str","value":"ã€‚","loc":{"start":{"line":34,"column":112},"end":{"line":34,"column":113}},"range":[903,904],"raw":"ã€‚"}],"loc":{"start":{"line":34,"column":2},"end":{"line":34,"column":113}},"range":[793,904],"raw":"å¯¹äºåŸºç¡€æ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚ numberã€string ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†ä» require å¼•å…¥æ˜¯å€¼ä¼ é€’ï¼Œå¦‚æœæ¨¡å—å†…çš„å€¼åœ¨ exports åå‘ç”Ÿå˜åŒ–ï¼Œ**ç”± require å¼•å…¥çš„è¯¥å€¼å¹¶ä¸ä¼šå‘ç”Ÿå˜åŒ–**ã€‚"}],"loc":{"start":{"line":34,"column":0},"end":{"line":34,"column":113}},"range":[791,904],"raw":"- å¯¹äºåŸºç¡€æ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚ numberã€string ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†ä» require å¼•å…¥æ˜¯å€¼ä¼ é€’ï¼Œå¦‚æœæ¨¡å—å†…çš„å€¼åœ¨ exports åå‘ç”Ÿå˜åŒ–ï¼Œ**ç”± require å¼•å…¥çš„è¯¥å€¼å¹¶ä¸ä¼šå‘ç”Ÿå˜åŒ–**ã€‚"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"å¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†é€šè¿‡ require å¼•å…¥æ—¶ï¼Œæ˜¯æµ…æ‹·è´ã€‚","loc":{"start":{"line":35,"column":2},"end":{"line":35,"column":51}},"range":[907,956],"raw":"å¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†é€šè¿‡ require å¼•å…¥æ—¶ï¼Œæ˜¯æµ…æ‹·è´ã€‚"}],"loc":{"start":{"line":35,"column":2},"end":{"line":35,"column":51}},"range":[907,956],"raw":"å¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†é€šè¿‡ require å¼•å…¥æ—¶ï¼Œæ˜¯æµ…æ‹·è´ã€‚"}],"loc":{"start":{"line":35,"column":0},"end":{"line":35,"column":51}},"range":[905,956],"raw":"- å¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†é€šè¿‡ require å¼•å…¥æ—¶ï¼Œæ˜¯æµ…æ‹·è´ã€‚"}],"loc":{"start":{"line":34,"column":0},"end":{"line":35,"column":51}},"range":[791,956],"raw":"- å¯¹äºåŸºç¡€æ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚ numberã€string ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†ä» require å¼•å…¥æ˜¯å€¼ä¼ é€’ï¼Œå¦‚æœæ¨¡å—å†…çš„å€¼åœ¨ exports åå‘ç”Ÿå˜åŒ–ï¼Œ**ç”± require å¼•å…¥çš„è¯¥å€¼å¹¶ä¸ä¼šå‘ç”Ÿå˜åŒ–**ã€‚\n- å¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†é€šè¿‡ require å¼•å…¥æ—¶ï¼Œæ˜¯æµ…æ‹·è´ã€‚"},{"type":"HorizontalRule","loc":{"start":{"line":37,"column":0},"end":{"line":37,"column":17}},"range":[958,975],"raw":"*****************"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"2. ES Module","loc":{"start":{"line":39,"column":3},"end":{"line":39,"column":15}},"range":[980,992],"raw":"2. ES Module"}],"loc":{"start":{"line":39,"column":0},"end":{"line":39,"column":15}},"range":[977,992],"raw":"## 2. ES Module"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"æ¦‚è¿°","loc":{"start":{"line":41,"column":4},"end":{"line":41,"column":6}},"range":[998,1000],"raw":"æ¦‚è¿°"}],"loc":{"start":{"line":41,"column":0},"end":{"line":41,"column":6}},"range":[994,1000],"raw":"### æ¦‚è¿°"},{"type":"Paragraph","children":[{"type":"Str","value":"åœ¨ ES6 ä¸­ï¼Œå¼•å…¥äº†ä¸€å¥—æ–°çš„æ¨¡å—åŒ–è§„èŒƒï¼Œä»è¯­è¨€å±‚é¢å®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œé‚£å°±æ˜¯ ESMã€‚","loc":{"start":{"line":43,"column":0},"end":{"line":43,"column":42}},"range":[1002,1044],"raw":"åœ¨ ES6 ä¸­ï¼Œå¼•å…¥äº†ä¸€å¥—æ–°çš„æ¨¡å—åŒ–è§„èŒƒï¼Œä»è¯­è¨€å±‚é¢å®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œé‚£å°±æ˜¯ ESMã€‚"}],"loc":{"start":{"line":43,"column":0},"end":{"line":43,"column":42}},"range":[1002,1044],"raw":"åœ¨ ES6 ä¸­ï¼Œå¼•å…¥äº†ä¸€å¥—æ–°çš„æ¨¡å—åŒ–è§„èŒƒï¼Œä»è¯­è¨€å±‚é¢å®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œé‚£å°±æ˜¯ ESMã€‚"},{"type":"Paragraph","children":[{"type":"Str","value":"ESM æ¨¡å—çš„ import è¯­å¥ï¼Œ","loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":18}},"range":[1046,1064],"raw":"ESM æ¨¡å—çš„ import è¯­å¥ï¼Œ"},{"type":"Strong","children":[{"type":"Str","value":"æ˜¯é™æ€è§£æçš„ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œå°±ä¼šè§£æå¹¶åŠ è½½å¯¹åº”çš„æ¨¡å—","loc":{"start":{"line":45,"column":20},"end":{"line":45,"column":44}},"range":[1066,1090],"raw":"æ˜¯é™æ€è§£æçš„ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œå°±ä¼šè§£æå¹¶åŠ è½½å¯¹åº”çš„æ¨¡å—"}],"loc":{"start":{"line":45,"column":18},"end":{"line":45,"column":46}},"range":[1064,1092],"raw":"**æ˜¯é™æ€è§£æçš„ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œå°±ä¼šè§£æå¹¶åŠ è½½å¯¹åº”çš„æ¨¡å—**"},{"type":"Str","value":"ã€‚æ‰€ä»¥ä½¿ç”¨ ESM æ—¶ï¼Œimport è¯­å¥éœ€è¦åœ¨æ–‡ä»¶çš„é¡¶å±‚ã€‚","loc":{"start":{"line":45,"column":46},"end":{"line":45,"column":76}},"range":[1092,1122],"raw":"ã€‚æ‰€ä»¥ä½¿ç”¨ ESM æ—¶ï¼Œimport è¯­å¥éœ€è¦åœ¨æ–‡ä»¶çš„é¡¶å±‚ã€‚"}],"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":76}},"range":[1046,1122],"raw":"ESM æ¨¡å—çš„ import è¯­å¥ï¼Œ**æ˜¯é™æ€è§£æçš„ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œå°±ä¼šè§£æå¹¶åŠ è½½å¯¹åº”çš„æ¨¡å—**ã€‚æ‰€ä»¥ä½¿ç”¨ ESM æ—¶ï¼Œimport è¯­å¥éœ€è¦åœ¨æ–‡ä»¶çš„é¡¶å±‚ã€‚"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"åŠ è½½è¿‡ç¨‹","loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":8}},"range":[1128,1132],"raw":"åŠ è½½è¿‡ç¨‹"}],"loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":8}},"range":[1124,1132],"raw":"### åŠ è½½è¿‡ç¨‹"},{"type":"Paragraph","children":[{"type":"Str","value":"åœ¨ ESM ä¸­ï¼Œæ¨¡å—çš„åŠ è½½æ˜¯","loc":{"start":{"line":49,"column":0},"end":{"line":49,"column":14}},"range":[1134,1148],"raw":"åœ¨ ESM ä¸­ï¼Œæ¨¡å—çš„åŠ è½½æ˜¯"},{"type":"Strong","children":[{"type":"Str","value":"å¼‚æ­¥æ‰§è¡Œ","loc":{"start":{"line":49,"column":16},"end":{"line":49,"column":20}},"range":[1150,1154],"raw":"å¼‚æ­¥æ‰§è¡Œ"}],"loc":{"start":{"line":49,"column":14},"end":{"line":49,"column":22}},"range":[1148,1156],"raw":"**å¼‚æ­¥æ‰§è¡Œ**"},{"type":"Str","value":"çš„ã€‚åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œæ‰€æœ‰ä½¿ç”¨åˆ° import å’Œ export å…³é”®å­—çš„è¯­å¥éƒ½ä¼šè¢«è§£æï¼Œç”¨æ¥æ„å»º","loc":{"start":{"line":49,"column":22},"end":{"line":49,"column":68}},"range":[1156,1202],"raw":"çš„ã€‚åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œæ‰€æœ‰ä½¿ç”¨åˆ° import å’Œ export å…³é”®å­—çš„è¯­å¥éƒ½ä¼šè¢«è§£æï¼Œç”¨æ¥æ„å»º"},{"type":"Strong","children":[{"type":"Str","value":"ä¾èµ–å…³ç³»å›¾","loc":{"start":{"line":49,"column":70},"end":{"line":49,"column":75}},"range":[1204,1209],"raw":"ä¾èµ–å…³ç³»å›¾"}],"loc":{"start":{"line":49,"column":68},"end":{"line":49,"column":77}},"range":[1202,1211],"raw":"**ä¾èµ–å…³ç³»å›¾**"},{"type":"Str","value":"ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œè¢«å¼•å…¥çš„è„šæœ¬å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œã€‚","loc":{"start":{"line":49,"column":77},"end":{"line":49,"column":98}},"range":[1211,1232],"raw":"ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œè¢«å¼•å…¥çš„è„šæœ¬å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œã€‚"}],"loc":{"start":{"line":49,"column":0},"end":{"line":49,"column":98}},"range":[1134,1232],"raw":"åœ¨ ESM ä¸­ï¼Œæ¨¡å—çš„åŠ è½½æ˜¯**å¼‚æ­¥æ‰§è¡Œ**çš„ã€‚åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œæ‰€æœ‰ä½¿ç”¨åˆ° import å’Œ export å…³é”®å­—çš„è¯­å¥éƒ½ä¼šè¢«è§£æï¼Œç”¨æ¥æ„å»º**ä¾èµ–å…³ç³»å›¾**ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œè¢«å¼•å…¥çš„è„šæœ¬å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œã€‚"},{"type":"Paragraph","children":[{"type":"Str","value":"ESM æ¨¡å—åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦å®é™…æ‰§è¡Œè¢«å¼•å…¥çš„æ–‡ä»¶çš„ä»£ç ï¼Œä¸€äº› named import å†…çš„é”™è¯¯å°±å¯ä»¥è¢«å‘ç°ã€‚","loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":58}},"range":[1234,1292],"raw":"ESM æ¨¡å—åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦å®é™…æ‰§è¡Œè¢«å¼•å…¥çš„æ–‡ä»¶çš„ä»£ç ï¼Œä¸€äº› named import å†…çš„é”™è¯¯å°±å¯ä»¥è¢«å‘ç°ã€‚"}],"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":58}},"range":[1234,1292],"raw":"ESM æ¨¡å—åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦å®é™…æ‰§è¡Œè¢«å¼•å…¥çš„æ–‡ä»¶çš„ä»£ç ï¼Œä¸€äº› named import å†…çš„é”™è¯¯å°±å¯ä»¥è¢«å‘ç°ã€‚"},{"type":"Paragraph","children":[{"type":"Str","value":"ESM æ¨¡å—åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œä¼šä»å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œæ ¹æ® import å…³é”®å­—è¯­å¥ï¼Œç”±å¤–åˆ°å†…æ„å»ºæ¨¡å—ä¹‹é—´çš„**ä¾èµ–å…³ç³»å›¾ï¼Œ**ç›´åˆ°æ²¡æœ‰ä»»ä½•å…¶ä»–ä¾èµ–çš„æ¨¡å—ã€‚ç„¶åç”±å†…å‘å¤–æ‰§è¡Œï¼Œä¸€ä¸ªæ¨¡å—ä¾èµ–çš„å…¶ä»–æ¨¡å—éƒ½æ‰§è¡Œå®Œæˆä»¥åï¼Œè¿™ä¸ªæ¨¡å—æ‰èƒ½å¾—åˆ°æ‰§è¡Œã€‚","loc":{"start":{"line":53,"column":0},"end":{"line":53,"column":113}},"range":[1294,1407],"raw":"ESM æ¨¡å—åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œä¼šä»å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œæ ¹æ® import å…³é”®å­—è¯­å¥ï¼Œç”±å¤–åˆ°å†…æ„å»ºæ¨¡å—ä¹‹é—´çš„**ä¾èµ–å…³ç³»å›¾ï¼Œ**ç›´åˆ°æ²¡æœ‰ä»»ä½•å…¶ä»–ä¾èµ–çš„æ¨¡å—ã€‚ç„¶åç”±å†…å‘å¤–æ‰§è¡Œï¼Œä¸€ä¸ªæ¨¡å—ä¾èµ–çš„å…¶ä»–æ¨¡å—éƒ½æ‰§è¡Œå®Œæˆä»¥åï¼Œè¿™ä¸ªæ¨¡å—æ‰èƒ½å¾—åˆ°æ‰§è¡Œã€‚"}],"loc":{"start":{"line":53,"column":0},"end":{"line":53,"column":113}},"range":[1294,1407],"raw":"ESM æ¨¡å—åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œä¼šä»å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œæ ¹æ® import å…³é”®å­—è¯­å¥ï¼Œç”±å¤–åˆ°å†…æ„å»ºæ¨¡å—ä¹‹é—´çš„**ä¾èµ–å…³ç³»å›¾ï¼Œ**ç›´åˆ°æ²¡æœ‰ä»»ä½•å…¶ä»–ä¾èµ–çš„æ¨¡å—ã€‚ç„¶åç”±å†…å‘å¤–æ‰§è¡Œï¼Œä¸€ä¸ªæ¨¡å—ä¾èµ–çš„å…¶ä»–æ¨¡å—éƒ½æ‰§è¡Œå®Œæˆä»¥åï¼Œè¿™ä¸ªæ¨¡å—æ‰èƒ½å¾—åˆ°æ‰§è¡Œã€‚"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"ç‰¹ç‚¹","loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":6}},"range":[1413,1415],"raw":"ç‰¹ç‚¹"}],"loc":{"start":{"line":55,"column":0},"end":{"line":55,"column":6}},"range":[1409,1415],"raw":"### ç‰¹ç‚¹"},{"type":"Header","depth":4,"children":[{"type":"Str","value":"1. ESM å¯¼å…¥å’Œå¯¼å‡ºæ˜¯å¼•ç”¨ä¼ é€’","loc":{"start":{"line":57,"column":5},"end":{"line":57,"column":22}},"range":[1422,1439],"raw":"1. ESM å¯¼å…¥å’Œå¯¼å‡ºæ˜¯å¼•ç”¨ä¼ é€’"}],"loc":{"start":{"line":57,"column":0},"end":{"line":57,"column":22}},"range":[1417,1439],"raw":"#### 1. ESM å¯¼å…¥å’Œå¯¼å‡ºæ˜¯å¼•ç”¨ä¼ é€’"},{"type":"Paragraph","children":[{"type":"Str","value":"é€šè¿‡ export å¯¼å‡ºå€¼ï¼Œé€šè¿‡ import å¯¼å…¥ï¼Œ**è¿™ä¸¤ä¸ªæ˜¯å…³é”®å­—ï¼Œ**ä¸”ä½¿ç”¨ export å¯¼å‡ºçš„å€¼æ˜¯å¼•ç”¨ä¼ é€’ï¼ˆä¸¤ä¸ªæ ‡è¯†ç¬¦æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜ï¼‰","loc":{"start":{"line":59,"column":0},"end":{"line":59,"column":75}},"range":[1441,1516],"raw":"é€šè¿‡ export å¯¼å‡ºå€¼ï¼Œé€šè¿‡ import å¯¼å…¥ï¼Œ**è¿™ä¸¤ä¸ªæ˜¯å…³é”®å­—ï¼Œ**ä¸”ä½¿ç”¨ export å¯¼å‡ºçš„å€¼æ˜¯å¼•ç”¨ä¼ é€’ï¼ˆä¸¤ä¸ªæ ‡è¯†ç¬¦æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜ï¼‰"}],"loc":{"start":{"line":59,"column":0},"end":{"line":59,"column":75}},"range":[1441,1516],"raw":"é€šè¿‡ export å¯¼å‡ºå€¼ï¼Œé€šè¿‡ import å¯¼å…¥ï¼Œ**è¿™ä¸¤ä¸ªæ˜¯å…³é”®å­—ï¼Œ**ä¸”ä½¿ç”¨ export å¯¼å‡ºçš„å€¼æ˜¯å¼•ç”¨ä¼ é€’ï¼ˆä¸¤ä¸ªæ ‡è¯†ç¬¦æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜ï¼‰"},{"type":"CodeBlock","lang":"jsx","meta":null,"value":"// a.js\nexport let a = 1;\nexport function changeA(v) {\n\ta = v;\n}\n\n// b.js\nimport { a, changeA } from 'a';\nconsole.log(a);\nchangeA(2);\nconsole.log(a);\n\n// è¾“å‡º\n// 1\n// 2","loc":{"start":{"line":61,"column":0},"end":{"line":77,"column":3}},"range":[1518,1695],"raw":"```jsx\n// a.js\nexport let a = 1;\nexport function changeA(v) {\n\ta = v;\n}\n\n// b.js\nimport { a, changeA } from 'a';\nconsole.log(a);\nchangeA(2);\nconsole.log(a);\n\n// è¾“å‡º\n// 1\n// 2\n```"},{"type":"Header","depth":4,"children":[{"type":"Str","value":"2. ESM æ¨¡å—å†…æ”¯æŒ Top Level Await","loc":{"start":{"line":79,"column":5},"end":{"line":79,"column":33}},"range":[1702,1730],"raw":"2. ESM æ¨¡å—å†…æ”¯æŒ Top Level Await"}],"loc":{"start":{"line":79,"column":0},"end":{"line":79,"column":33}},"range":[1697,1730],"raw":"#### 2. ESM æ¨¡å—å†…æ”¯æŒ Top Level Await"},{"type":"Paragraph","children":[{"type":"Str","value":"å¾—ç›Šäº esm æ¨¡å—çš„åŠ è½½æœºåˆ¶ï¼Œæ¨¡å—çš„æ‰§è¡Œå‘ç”Ÿåœ¨ä¾èµ–å…³ç³»å›¾æ„å»ºå®Œæˆä»¥åï¼Œåœ¨ esm æ¨¡å—å†…ï¼Œå¯ä»¥åœ¨æ¨¡å—çš„é¡¶å±‚ä½¿ç”¨ await å…³é”®å­—ã€‚","loc":{"start":{"line":81,"column":0},"end":{"line":81,"column":67}},"range":[1732,1799],"raw":"å¾—ç›Šäº esm æ¨¡å—çš„åŠ è½½æœºåˆ¶ï¼Œæ¨¡å—çš„æ‰§è¡Œå‘ç”Ÿåœ¨ä¾èµ–å…³ç³»å›¾æ„å»ºå®Œæˆä»¥åï¼Œåœ¨ esm æ¨¡å—å†…ï¼Œå¯ä»¥åœ¨æ¨¡å—çš„é¡¶å±‚ä½¿ç”¨ await å…³é”®å­—ã€‚"}],"loc":{"start":{"line":81,"column":0},"end":{"line":81,"column":67}},"range":[1732,1799],"raw":"å¾—ç›Šäº esm æ¨¡å—çš„åŠ è½½æœºåˆ¶ï¼Œæ¨¡å—çš„æ‰§è¡Œå‘ç”Ÿåœ¨ä¾èµ–å…³ç³»å›¾æ„å»ºå®Œæˆä»¥åï¼Œåœ¨ esm æ¨¡å—å†…ï¼Œå¯ä»¥åœ¨æ¨¡å—çš„é¡¶å±‚ä½¿ç”¨ await å…³é”®å­—ã€‚"},{"type":"Paragraph","children":[{"type":"Str","value":"ä¸‹é¢æ˜¯ä¸€æ®µå¼•ç”¨è‡ª v8 åšå®¢(","loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":15}},"range":[1801,1816],"raw":"ä¸‹é¢æ˜¯ä¸€æ®µå¼•ç”¨è‡ª v8 åšå®¢("},{"type":"Link","title":null,"url":"https://v8.dev/features/top-level-await","children":[{"type":"Str","value":"Top-level await","loc":{"start":{"line":83,"column":16},"end":{"line":83,"column":31}},"range":[1817,1832],"raw":"Top-level await"}],"loc":{"start":{"line":83,"column":15},"end":{"line":83,"column":73}},"range":[1816,1874],"raw":"[Top-level await](https://v8.dev/features/top-level-await)"},{"type":"Str","value":")çš„ä¸€æ®µï¼š","loc":{"start":{"line":83,"column":73},"end":{"line":83,"column":78}},"range":[1874,1879],"raw":")çš„ä¸€æ®µï¼š"}],"loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":78}},"range":[1801,1879],"raw":"ä¸‹é¢æ˜¯ä¸€æ®µå¼•ç”¨è‡ª v8 åšå®¢([Top-level await](https://v8.dev/features/top-level-await))çš„ä¸€æ®µï¼š"},{"type":"BlockQuote","children":[{"type":"Paragraph","children":[{"type":"Str","value":"Perhaps you have seen the infamous gist by Rich Harris which initially outlined a number of concerns about top-level await and urged the JavaScript language not to implement the feature. Some specific concerns were:","loc":{"start":{"line":85,"column":2},"end":{"line":85,"column":217}},"range":[1883,2098],"raw":"Perhaps you have seen the infamous gist by Rich Harris which initially outlined a number of concerns about top-level await and urged the JavaScript language not to implement the feature. Some specific concerns were:"}],"loc":{"start":{"line":85,"column":2},"end":{"line":85,"column":217}},"range":[1883,2098],"raw":"Perhaps you have seen the infamous gist by Rich Harris which initially outlined a number of concerns about top-level await and urged the JavaScript language not to implement the feature. Some specific concerns were:"},{"type":"List","ordered":false,"start":null,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"Top-level await could block execution.","loc":{"start":{"line":87,"column":4},"end":{"line":87,"column":42}},"range":[2105,2143],"raw":"Top-level await could block execution."}],"loc":{"start":{"line":87,"column":4},"end":{"line":87,"column":42}},"range":[2105,2143],"raw":"Top-level await could block execution."}],"loc":{"start":{"line":87,"column":2},"end":{"line":87,"column":42}},"range":[2103,2143],"raw":"- Top-level await could block execution."},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"Top-level await could block fetching resources.","loc":{"start":{"line":88,"column":4},"end":{"line":88,"column":51}},"range":[2148,2195],"raw":"Top-level await could block fetching resources."}],"loc":{"start":{"line":88,"column":4},"end":{"line":88,"column":51}},"range":[2148,2195],"raw":"Top-level await could block fetching resources."}],"loc":{"start":{"line":88,"column":2},"end":{"line":88,"column":51}},"range":[2146,2195],"raw":"- Top-level await could block fetching resources."},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"There would be no clear interop story for CommonJS modules.","loc":{"start":{"line":89,"column":4},"end":{"line":89,"column":63}},"range":[2200,2259],"raw":"There would be no clear interop story for CommonJS modules."}],"loc":{"start":{"line":89,"column":4},"end":{"line":89,"column":63}},"range":[2200,2259],"raw":"There would be no clear interop story for CommonJS modules."}],"loc":{"start":{"line":89,"column":2},"end":{"line":89,"column":63}},"range":[2198,2259],"raw":"- There would be no clear interop story for CommonJS modules."}],"loc":{"start":{"line":87,"column":2},"end":{"line":90,"column":1}},"range":[2103,2261],"raw":"- Top-level await could block execution.\n> - Top-level await could block fetching resources.\n> - There would be no clear interop story for CommonJS modules.\n>"},{"type":"Paragraph","children":[{"type":"Str","value":"The stage 3 version of the proposal directly addresses these issues:","loc":{"start":{"line":91,"column":2},"end":{"line":91,"column":70}},"range":[2264,2332],"raw":"The stage 3 version of the proposal directly addresses these issues:"}],"loc":{"start":{"line":91,"column":2},"end":{"line":91,"column":70}},"range":[2264,2332],"raw":"The stage 3 version of the proposal directly addresses these issues:"},{"type":"List","ordered":false,"start":null,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Strong","children":[{"type":"Str","value":"As siblings are able to execute","loc":{"start":{"line":93,"column":6},"end":{"line":93,"column":37}},"range":[2341,2372],"raw":"As siblings are able to execute"}],"loc":{"start":{"line":93,"column":4},"end":{"line":93,"column":39}},"range":[2339,2374],"raw":"**As siblings are able to execute**"},{"type":"Str","value":", there is no definitive blocking.","loc":{"start":{"line":93,"column":39},"end":{"line":93,"column":73}},"range":[2374,2408],"raw":", there is no definitive blocking."}],"loc":{"start":{"line":93,"column":4},"end":{"line":93,"column":73}},"range":[2339,2408],"raw":"**As siblings are able to execute**, there is no definitive blocking."}],"loc":{"start":{"line":93,"column":2},"end":{"line":93,"column":73}},"range":[2337,2408],"raw":"- **As siblings are able to execute**, there is no definitive blocking."},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Strong","children":[{"type":"Str","value":"Top-level await occurs during the execution phase of the module graph","loc":{"start":{"line":94,"column":6},"end":{"line":94,"column":75}},"range":[2415,2484],"raw":"Top-level await occurs during the execution phase of the module graph"}],"loc":{"start":{"line":94,"column":4},"end":{"line":94,"column":77}},"range":[2413,2486],"raw":"**Top-level await occurs during the execution phase of the module graph**"},{"type":"Str","value":". At this point all resources have already been fetched and linked. There is no risk of blocking fetching resources.","loc":{"start":{"line":94,"column":77},"end":{"line":94,"column":193}},"range":[2486,2602],"raw":". At this point all resources have already been fetched and linked. There is no risk of blocking fetching resources."}],"loc":{"start":{"line":94,"column":4},"end":{"line":94,"column":193}},"range":[2413,2602],"raw":"**Top-level await occurs during the execution phase of the module graph**. At this point all resources have already been fetched and linked. There is no risk of blocking fetching resources."}],"loc":{"start":{"line":94,"column":2},"end":{"line":94,"column":193}},"range":[2411,2602],"raw":"- **Top-level await occurs during the execution phase of the module graph**. At this point all resources have already been fetched and linked. There is no risk of blocking fetching resources."},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Strong","children":[{"type":"Str","value":"Top-level await is limited to [ESM] modules","loc":{"start":{"line":95,"column":6},"end":{"line":95,"column":49}},"range":[2609,2652],"raw":"Top-level await is limited to [ESM] modules"}],"loc":{"start":{"line":95,"column":4},"end":{"line":95,"column":51}},"range":[2607,2654],"raw":"**Top-level await is limited to [ESM] modules**"},{"type":"Str","value":". There is explicitly no support for scripts or for CommonJS modules.","loc":{"start":{"line":95,"column":51},"end":{"line":95,"column":120}},"range":[2654,2723],"raw":". There is explicitly no support for scripts or for CommonJS modules."}],"loc":{"start":{"line":95,"column":4},"end":{"line":95,"column":120}},"range":[2607,2723],"raw":"**Top-level await is limited to [ESM] modules**. There is explicitly no support for scripts or for CommonJS modules."}],"loc":{"start":{"line":95,"column":2},"end":{"line":95,"column":120}},"range":[2605,2723],"raw":"- **Top-level await is limited to [ESM] modules**. There is explicitly no support for scripts or for CommonJS modules."}],"loc":{"start":{"line":93,"column":2},"end":{"line":95,"column":120}},"range":[2337,2723],"raw":"- **As siblings are able to execute**, there is no definitive blocking.\n> - **Top-level await occurs during the execution phase of the module graph**. At this point all resources have already been fetched and linked. There is no risk of blocking fetching resources.\n> - **Top-level await is limited to [ESM] modules**. There is explicitly no support for scripts or for CommonJS modules."}],"loc":{"start":{"line":85,"column":0},"end":{"line":95,"column":120}},"range":[1881,2723],"raw":"> Perhaps you have seen the infamous gist by Rich Harris which initially outlined a number of concerns about top-level await and urged the JavaScript language not to implement the feature. Some specific concerns were:\n>\n> - Top-level await could block execution.\n> - Top-level await could block fetching resources.\n> - There would be no clear interop story for CommonJS modules.\n>\n> The stage 3 version of the proposal directly addresses these issues:\n>\n> - **As siblings are able to execute**, there is no definitive blocking.\n> - **Top-level await occurs during the execution phase of the module graph**. At this point all resources have already been fetched and linked. There is no risk of blocking fetching resources.\n> - **Top-level await is limited to [ESM] modules**. There is explicitly no support for scripts or for CommonJS modules."},{"type":"CodeBlock","lang":"js","meta":null,"value":"// CommonJS\nconst a = require('a.cjs');\nconst b = require('b.cjs');\n// ESM\nimport { a } from 'a.mjs';\nimport { b } from 'b.mjs';","loc":{"start":{"line":97,"column":0},"end":{"line":104,"column":3}},"range":[2725,2863],"raw":"```js\n// CommonJS\nconst a = require('a.cjs');\nconst b = require('b.cjs');\n// ESM\nimport { a } from 'a.mjs';\nimport { b } from 'b.mjs';\n```"},{"type":"Paragraph","children":[{"type":"Str","value":"ç”±äº CommonJS çš„ require å‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å¦‚æœ a.cjs å†…æœ‰é¡¶å±‚çš„ await ï¼Œé‚£ä¹ˆ require(â€™b.cjsâ€™) çš„è¯­å¥å°±ä¼šè¢«é˜»å¡ï¼Œå¹¶ä¸” CommonJS æ˜¯åœ¨æ‰§è¡Œåˆ° require çš„æ—¶å€™æ‰ä¼šåŠ è½½å¹¶æ‰§è¡Œå¯¹åº”çš„æ¨¡å—ï¼Œé¡¶å±‚ await ç”šè‡³ä¼šé˜»å¡åˆ° b.cjs èµ„æºçš„åŠ è½½ã€‚","loc":{"start":{"line":106,"column":0},"end":{"line":106,"column":154}},"range":[2865,3019],"raw":"ç”±äº CommonJS çš„ require å‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å¦‚æœ a.cjs å†…æœ‰é¡¶å±‚çš„ await ï¼Œé‚£ä¹ˆ require(â€™b.cjsâ€™) çš„è¯­å¥å°±ä¼šè¢«é˜»å¡ï¼Œå¹¶ä¸” CommonJS æ˜¯åœ¨æ‰§è¡Œåˆ° require çš„æ—¶å€™æ‰ä¼šåŠ è½½å¹¶æ‰§è¡Œå¯¹åº”çš„æ¨¡å—ï¼Œé¡¶å±‚ await ç”šè‡³ä¼šé˜»å¡åˆ° b.cjs èµ„æºçš„åŠ è½½ã€‚"}],"loc":{"start":{"line":106,"column":0},"end":{"line":106,"column":154}},"range":[2865,3019],"raw":"ç”±äº CommonJS çš„ require å‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å¦‚æœ a.cjs å†…æœ‰é¡¶å±‚çš„ await ï¼Œé‚£ä¹ˆ require(â€™b.cjsâ€™) çš„è¯­å¥å°±ä¼šè¢«é˜»å¡ï¼Œå¹¶ä¸” CommonJS æ˜¯åœ¨æ‰§è¡Œåˆ° require çš„æ—¶å€™æ‰ä¼šåŠ è½½å¹¶æ‰§è¡Œå¯¹åº”çš„æ¨¡å—ï¼Œé¡¶å±‚ await ç”šè‡³ä¼šé˜»å¡åˆ° b.cjs èµ„æºçš„åŠ è½½ã€‚"},{"type":"Paragraph","children":[{"type":"Str","value":"ä½†æ˜¯åœ¨ ESM ä¸­å°±ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸º import çš„æ„å»ºä¾èµ–å…³ç³»å›¾çš„è¿‡ç¨‹æ˜¯åœ¨ç¼–è¯‘æ—¶å°±ä¼šç¡®å®šå¥½äº†ï¼Œæ­¤æ—¶ä¸ä¼šæ‰§è¡Œæ¨¡å—çš„ä»£ç ã€‚å„ä¸ªæ¨¡å—ä¹Ÿæ˜¯åœ¨ä¸€ä¸ªå¼‚æ­¥çš„å‡½æ•°å†…æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æ¨¡å—æ‰§è¡Œæ—¶ä¹Ÿä¸ä¼šç›¸äº’é˜»å¡ã€‚","loc":{"start":{"line":108,"column":0},"end":{"line":108,"column":97}},"range":[3021,3118],"raw":"ä½†æ˜¯åœ¨ ESM ä¸­å°±ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸º import çš„æ„å»ºä¾èµ–å…³ç³»å›¾çš„è¿‡ç¨‹æ˜¯åœ¨ç¼–è¯‘æ—¶å°±ä¼šç¡®å®šå¥½äº†ï¼Œæ­¤æ—¶ä¸ä¼šæ‰§è¡Œæ¨¡å—çš„ä»£ç ã€‚å„ä¸ªæ¨¡å—ä¹Ÿæ˜¯åœ¨ä¸€ä¸ªå¼‚æ­¥çš„å‡½æ•°å†…æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æ¨¡å—æ‰§è¡Œæ—¶ä¹Ÿä¸ä¼šç›¸äº’é˜»å¡ã€‚"}],"loc":{"start":{"line":108,"column":0},"end":{"line":108,"column":97}},"range":[3021,3118],"raw":"ä½†æ˜¯åœ¨ ESM ä¸­å°±ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸º import çš„æ„å»ºä¾èµ–å…³ç³»å›¾çš„è¿‡ç¨‹æ˜¯åœ¨ç¼–è¯‘æ—¶å°±ä¼šç¡®å®šå¥½äº†ï¼Œæ­¤æ—¶ä¸ä¼šæ‰§è¡Œæ¨¡å—çš„ä»£ç ã€‚å„ä¸ªæ¨¡å—ä¹Ÿæ˜¯åœ¨ä¸€ä¸ªå¼‚æ­¥çš„å‡½æ•°å†…æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æ¨¡å—æ‰§è¡Œæ—¶ä¹Ÿä¸ä¼šç›¸äº’é˜»å¡ã€‚"},{"type":"HorizontalRule","loc":{"start":{"line":110,"column":0},"end":{"line":110,"column":14}},"range":[3120,3134],"raw":"**************"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"3. AMD(define/require)","loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":25}},"range":[3139,3161],"raw":"3. AMD(define/require)"}],"loc":{"start":{"line":112,"column":0},"end":{"line":112,"column":25}},"range":[3136,3161],"raw":"## 3. AMD(define/require)"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"æ¦‚è¿°","loc":{"start":{"line":114,"column":4},"end":{"line":114,"column":6}},"range":[3167,3169],"raw":"æ¦‚è¿°"}],"loc":{"start":{"line":114,"column":0},"end":{"line":114,"column":6}},"range":[3163,3169],"raw":"### æ¦‚è¿°"},{"type":"Paragraph","children":[{"type":"Str","value":"AMD ä¹Ÿæ˜¯ä¸€ç§ç¤¾åŒºå¼€å‘è€…å®ç°çš„ JavaScript æ¨¡å—åŒ–è§„èŒƒï¼Œä¸ CommonJS ä¸åŒçš„æ˜¯ï¼ŒAMDçš„å¯¼å…¥ require æ˜¯","loc":{"start":{"line":116,"column":0},"end":{"line":116,"column":66}},"range":[3171,3237],"raw":"AMD ä¹Ÿæ˜¯ä¸€ç§ç¤¾åŒºå¼€å‘è€…å®ç°çš„ JavaScript æ¨¡å—åŒ–è§„èŒƒï¼Œä¸ CommonJS ä¸åŒçš„æ˜¯ï¼ŒAMDçš„å¯¼å…¥ require æ˜¯"},{"type":"Strong","children":[{"type":"Str","value":"å¼‚æ­¥","loc":{"start":{"line":116,"column":68},"end":{"line":116,"column":70}},"range":[3239,3241],"raw":"å¼‚æ­¥"}],"loc":{"start":{"line":116,"column":66},"end":{"line":116,"column":72}},"range":[3237,3243],"raw":"**å¼‚æ­¥**"},{"type":"Str","value":"çš„ï¼ŒAMD æ¨¡å—åŒ–è§„èŒƒæ˜¯å¯ä»¥ä¸éœ€è¦è½¬æ¢ï¼Œé€šè¿‡åœ¨æµè§ˆå™¨å†…å¼•å…¥ AMD å®ç°ï¼ˆæœ€å…·æœ‰ä»£è¡¨æ€§çš„å®ç° ","loc":{"start":{"line":116,"column":72},"end":{"line":116,"column":119}},"range":[3243,3290],"raw":"çš„ï¼ŒAMD æ¨¡å—åŒ–è§„èŒƒæ˜¯å¯ä»¥ä¸éœ€è¦è½¬æ¢ï¼Œé€šè¿‡åœ¨æµè§ˆå™¨å†…å¼•å…¥ AMD å®ç°ï¼ˆæœ€å…·æœ‰ä»£è¡¨æ€§çš„å®ç° "},{"type":"Link","title":null,"url":"https://requirejs.org/","children":[{"type":"Str","value":"requirejs","loc":{"start":{"line":116,"column":120},"end":{"line":116,"column":129}},"range":[3291,3300],"raw":"requirejs"}],"loc":{"start":{"line":116,"column":119},"end":{"line":116,"column":154}},"range":[3290,3325],"raw":"[requirejs](https://requirejs.org/)"},{"type":"Str","value":"ï¼‰çš„æ–¹å¼ï¼Œåœ¨æµè§ˆå™¨å†…ç›´æ¥è¿è¡Œçš„ã€‚","loc":{"start":{"line":116,"column":154},"end":{"line":116,"column":170}},"range":[3325,3341],"raw":"ï¼‰çš„æ–¹å¼ï¼Œåœ¨æµè§ˆå™¨å†…ç›´æ¥è¿è¡Œçš„ã€‚"}],"loc":{"start":{"line":116,"column":0},"end":{"line":116,"column":170}},"range":[3171,3341],"raw":"AMD ä¹Ÿæ˜¯ä¸€ç§ç¤¾åŒºå¼€å‘è€…å®ç°çš„ JavaScript æ¨¡å—åŒ–è§„èŒƒï¼Œä¸ CommonJS ä¸åŒçš„æ˜¯ï¼ŒAMDçš„å¯¼å…¥ require æ˜¯**å¼‚æ­¥**çš„ï¼ŒAMD æ¨¡å—åŒ–è§„èŒƒæ˜¯å¯ä»¥ä¸éœ€è¦è½¬æ¢ï¼Œé€šè¿‡åœ¨æµè§ˆå™¨å†…å¼•å…¥ AMD å®ç°ï¼ˆæœ€å…·æœ‰ä»£è¡¨æ€§çš„å®ç° [requirejs](https://requirejs.org/)ï¼‰çš„æ–¹å¼ï¼Œåœ¨æµè§ˆå™¨å†…ç›´æ¥è¿è¡Œçš„ã€‚"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"å®ç°åŸç†","loc":{"start":{"line":118,"column":4},"end":{"line":118,"column":8}},"range":[3347,3351],"raw":"å®ç°åŸç†"}],"loc":{"start":{"line":118,"column":0},"end":{"line":118,"column":8}},"range":[3343,3351],"raw":"### å®ç°åŸç†"},{"type":"Paragraph","children":[{"type":"Str","value":"åœ¨æµè§ˆå™¨å†…é€šè¿‡ ","loc":{"start":{"line":120,"column":0},"end":{"line":120,"column":8}},"range":[3353,3361],"raw":"åœ¨æµè§ˆå™¨å†…é€šè¿‡ "},{"type":"Html","value":"<script>","loc":{"start":{"line":120,"column":8},"end":{"line":120,"column":16}},"range":[3361,3369],"raw":"<script>"},{"type":"Str","value":" æ ‡ç­¾å¼•å…¥äº† AMD è§„èŒƒçš„å®ç°ä¹‹åï¼Œä¼šåœ¨æµè§ˆå™¨å…¨å±€æ³¨å†Œä¸¤ä¸ªå‡½æ•°:","loc":{"start":{"line":120,"column":16},"end":{"line":120,"column":49}},"range":[3369,3402],"raw":" æ ‡ç­¾å¼•å…¥äº† AMD è§„èŒƒçš„å®ç°ä¹‹åï¼Œä¼šåœ¨æµè§ˆå™¨å…¨å±€æ³¨å†Œä¸¤ä¸ªå‡½æ•°:"}],"loc":{"start":{"line":120,"column":0},"end":{"line":120,"column":49}},"range":[3353,3402],"raw":"åœ¨æµè§ˆå™¨å†…é€šè¿‡ <script> æ ‡ç­¾å¼•å…¥äº† AMD è§„èŒƒçš„å®ç°ä¹‹åï¼Œä¼šåœ¨æµè§ˆå™¨å…¨å±€æ³¨å†Œä¸¤ä¸ªå‡½æ•°:"},{"type":"List","ordered":false,"start":null,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"define å‡½æ•°ï¼šç”¨äºå£°æ˜æ¨¡å—ï¼Œæ¥å—3ä¸ªå‚æ•°ï¼Œæ¨¡å—çš„åç§°ã€æ¨¡å—ä¾èµ–çš„å…¶ä»–æ¨¡å—åç§°æ•°ç»„ä»¥åŠç”Ÿæˆæ¨¡å—çš„å‡½æ•°","loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":54}},"range":[3406,3458],"raw":"define å‡½æ•°ï¼šç”¨äºå£°æ˜æ¨¡å—ï¼Œæ¥å—3ä¸ªå‚æ•°ï¼Œæ¨¡å—çš„åç§°ã€æ¨¡å—ä¾èµ–çš„å…¶ä»–æ¨¡å—åç§°æ•°ç»„ä»¥åŠç”Ÿæˆæ¨¡å—çš„å‡½æ•°"}],"loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":54}},"range":[3406,3458],"raw":"define å‡½æ•°ï¼šç”¨äºå£°æ˜æ¨¡å—ï¼Œæ¥å—3ä¸ªå‚æ•°ï¼Œæ¨¡å—çš„åç§°ã€æ¨¡å—ä¾èµ–çš„å…¶ä»–æ¨¡å—åç§°æ•°ç»„ä»¥åŠç”Ÿæˆæ¨¡å—çš„å‡½æ•°"}],"loc":{"start":{"line":122,"column":0},"end":{"line":122,"column":54}},"range":[3404,3458],"raw":"- define å‡½æ•°ï¼šç”¨äºå£°æ˜æ¨¡å—ï¼Œæ¥å—3ä¸ªå‚æ•°ï¼Œæ¨¡å—çš„åç§°ã€æ¨¡å—ä¾èµ–çš„å…¶ä»–æ¨¡å—åç§°æ•°ç»„ä»¥åŠç”Ÿæˆæ¨¡å—çš„å‡½æ•°"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"require å‡½æ•°ï¼šç”¨äºé€šè¿‡æ¨¡å—çš„åç§°å¯¼å…¥å¯¹åº”çš„æ¨¡å—","loc":{"start":{"line":123,"column":2},"end":{"line":123,"column":29}},"range":[3461,3488],"raw":"require å‡½æ•°ï¼šç”¨äºé€šè¿‡æ¨¡å—çš„åç§°å¯¼å…¥å¯¹åº”çš„æ¨¡å—"}],"loc":{"start":{"line":123,"column":2},"end":{"line":123,"column":29}},"range":[3461,3488],"raw":"require å‡½æ•°ï¼šç”¨äºé€šè¿‡æ¨¡å—çš„åç§°å¯¼å…¥å¯¹åº”çš„æ¨¡å—"}],"loc":{"start":{"line":123,"column":0},"end":{"line":123,"column":29}},"range":[3459,3488],"raw":"- require å‡½æ•°ï¼šç”¨äºé€šè¿‡æ¨¡å—çš„åç§°å¯¼å…¥å¯¹åº”çš„æ¨¡å—"}],"loc":{"start":{"line":122,"column":0},"end":{"line":123,"column":29}},"range":[3404,3488],"raw":"- define å‡½æ•°ï¼šç”¨äºå£°æ˜æ¨¡å—ï¼Œæ¥å—3ä¸ªå‚æ•°ï¼Œæ¨¡å—çš„åç§°ã€æ¨¡å—ä¾èµ–çš„å…¶ä»–æ¨¡å—åç§°æ•°ç»„ä»¥åŠç”Ÿæˆæ¨¡å—çš„å‡½æ•°\n- require å‡½æ•°ï¼šç”¨äºé€šè¿‡æ¨¡å—çš„åç§°å¯¼å…¥å¯¹åº”çš„æ¨¡å—"},{"type":"CodeBlock","lang":"js","meta":null,"value":"// å®šä¹‰ä¸€ä¸ªæ¨¡å—\ndefine('module', ['dep'], function(dep) {\n  return exports;\n});\n\n// å¯¼å…¥å’Œä½¿ç”¨\nrequire(['module'], function(module) {\n});","loc":{"start":{"line":125,"column":0},"end":{"line":134,"column":3}},"range":[3490,3626],"raw":"```js\n// å®šä¹‰ä¸€ä¸ªæ¨¡å—\ndefine('module', ['dep'], function(dep) {\n  return exports;\n});\n\n// å¯¼å…¥å’Œä½¿ç”¨\nrequire(['module'], function(module) {\n});\n```"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"ä¼˜ç‚¹","loc":{"start":{"line":136,"column":4},"end":{"line":136,"column":6}},"range":[3632,3634],"raw":"ä¼˜ç‚¹"}],"loc":{"start":{"line":136,"column":0},"end":{"line":136,"column":6}},"range":[3628,3634],"raw":"### ä¼˜ç‚¹"},{"type":"List","ordered":false,"start":null,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"å¯åœ¨ä¸è½¬æ¢ä»£ç çš„æƒ…å†µä¸‹ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼›","loc":{"start":{"line":138,"column":2},"end":{"line":138,"column":23}},"range":[3638,3659],"raw":"å¯åœ¨ä¸è½¬æ¢ä»£ç çš„æƒ…å†µä¸‹ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼›"}],"loc":{"start":{"line":138,"column":2},"end":{"line":138,"column":23}},"range":[3638,3659],"raw":"å¯åœ¨ä¸è½¬æ¢ä»£ç çš„æƒ…å†µä¸‹ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼›"}],"loc":{"start":{"line":138,"column":0},"end":{"line":138,"column":23}},"range":[3636,3659],"raw":"- å¯åœ¨ä¸è½¬æ¢ä»£ç çš„æƒ…å†µä¸‹ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼›"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"å¯å¼‚æ­¥åŠ è½½ä¾èµ–ï¼›","loc":{"start":{"line":139,"column":2},"end":{"line":139,"column":10}},"range":[3662,3670],"raw":"å¯å¼‚æ­¥åŠ è½½ä¾èµ–ï¼›"}],"loc":{"start":{"line":139,"column":2},"end":{"line":139,"column":10}},"range":[3662,3670],"raw":"å¯å¼‚æ­¥åŠ è½½ä¾èµ–ï¼›"}],"loc":{"start":{"line":139,"column":0},"end":{"line":139,"column":10}},"range":[3660,3670],"raw":"- å¯å¼‚æ­¥åŠ è½½ä¾èµ–ï¼›"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"å¯å¹¶è¡ŒåŠ è½½å¤šä¸ªä¾èµ–ï¼›","loc":{"start":{"line":140,"column":2},"end":{"line":140,"column":12}},"range":[3673,3683],"raw":"å¯å¹¶è¡ŒåŠ è½½å¤šä¸ªä¾èµ–ï¼›"}],"loc":{"start":{"line":140,"column":2},"end":{"line":140,"column":12}},"range":[3673,3683],"raw":"å¯å¹¶è¡ŒåŠ è½½å¤šä¸ªä¾èµ–ï¼›"}],"loc":{"start":{"line":140,"column":0},"end":{"line":140,"column":12}},"range":[3671,3683],"raw":"- å¯å¹¶è¡ŒåŠ è½½å¤šä¸ªä¾èµ–ï¼›"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"ä»£ç å¯è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒå’Œ Node.js ç¯å¢ƒä¸‹ã€‚","loc":{"start":{"line":141,"column":2},"end":{"line":141,"column":27}},"range":[3686,3711],"raw":"ä»£ç å¯è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒå’Œ Node.js ç¯å¢ƒä¸‹ã€‚"}],"loc":{"start":{"line":141,"column":2},"end":{"line":141,"column":27}},"range":[3686,3711],"raw":"ä»£ç å¯è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒå’Œ Node.js ç¯å¢ƒä¸‹ã€‚"}],"loc":{"start":{"line":141,"column":0},"end":{"line":141,"column":27}},"range":[3684,3711],"raw":"- ä»£ç å¯è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒå’Œ Node.js ç¯å¢ƒä¸‹ã€‚"}],"loc":{"start":{"line":138,"column":0},"end":{"line":141,"column":27}},"range":[3636,3711],"raw":"- å¯åœ¨ä¸è½¬æ¢ä»£ç çš„æƒ…å†µä¸‹ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼›\n- å¯å¼‚æ­¥åŠ è½½ä¾èµ–ï¼›\n- å¯å¹¶è¡ŒåŠ è½½å¤šä¸ªä¾èµ–ï¼›\n- ä»£ç å¯è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒå’Œ Node.js ç¯å¢ƒä¸‹ã€‚"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"ç¼ºç‚¹","loc":{"start":{"line":143,"column":4},"end":{"line":143,"column":6}},"range":[3717,3719],"raw":"ç¼ºç‚¹"}],"loc":{"start":{"line":143,"column":0},"end":{"line":143,"column":6}},"range":[3713,3719],"raw":"### ç¼ºç‚¹"},{"type":"Paragraph","children":[{"type":"Str","value":"ä¸ç®¡æ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒè¿˜æ˜¯ NodeJS ç¯å¢ƒï¼ŒJavaScript åŸç”Ÿéƒ½æ˜¯ä¸æ”¯æŒ AMD æ¨¡å—åŒ–è§„èŒƒçš„ï¼Œéœ€è¦å¼•å…¥å¯¹åº”çš„åº“ä¹‹åæ‰èƒ½ä½¿ç”¨ã€‚","loc":{"start":{"line":145,"column":0},"end":{"line":145,"column":67}},"range":[3721,3788],"raw":"ä¸ç®¡æ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒè¿˜æ˜¯ NodeJS ç¯å¢ƒï¼ŒJavaScript åŸç”Ÿéƒ½æ˜¯ä¸æ”¯æŒ AMD æ¨¡å—åŒ–è§„èŒƒçš„ï¼Œéœ€è¦å¼•å…¥å¯¹åº”çš„åº“ä¹‹åæ‰èƒ½ä½¿ç”¨ã€‚"}],"loc":{"start":{"line":145,"column":0},"end":{"line":145,"column":67}},"range":[3721,3788],"raw":"ä¸ç®¡æ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒè¿˜æ˜¯ NodeJS ç¯å¢ƒï¼ŒJavaScript åŸç”Ÿéƒ½æ˜¯ä¸æ”¯æŒ AMD æ¨¡å—åŒ–è§„èŒƒçš„ï¼Œéœ€è¦å¼•å…¥å¯¹åº”çš„åº“ä¹‹åæ‰èƒ½ä½¿ç”¨ã€‚"},{"type":"Paragraph","children":[{"type":"Str","value":"å¹¶ä¸” AMD æ¨¡å—åŒ–çš„å®ç°åº“ï¼Œå¿…é¡»è¦åœ¨æ¨¡å—å£°æ˜ä¹‹å‰å°±åŠ è½½å®Œæˆã€‚","loc":{"start":{"line":147,"column":0},"end":{"line":147,"column":31}},"range":[3790,3821],"raw":"å¹¶ä¸” AMD æ¨¡å—åŒ–çš„å®ç°åº“ï¼Œå¿…é¡»è¦åœ¨æ¨¡å—å£°æ˜ä¹‹å‰å°±åŠ è½½å®Œæˆã€‚"}],"loc":{"start":{"line":147,"column":0},"end":{"line":147,"column":31}},"range":[3790,3821],"raw":"å¹¶ä¸” AMD æ¨¡å—åŒ–çš„å®ç°åº“ï¼Œå¿…é¡»è¦åœ¨æ¨¡å—å£°æ˜ä¹‹å‰å°±åŠ è½½å®Œæˆã€‚"},{"type":"Paragraph","children":[{"type":"Str","value":"æµè§ˆå™¨åŸç”Ÿæ˜¯ä¸æ”¯æŒ AMD çš„ï¼Œéœ€è¦å¯¼å…¥å®ç°äº† AMD æ¨¡å—åŒ–è§„èŒƒçš„åº“ï¼ˆä¾‹å¦‚ ","loc":{"start":{"line":149,"column":0},"end":{"line":149,"column":39}},"range":[3823,3862],"raw":"æµè§ˆå™¨åŸç”Ÿæ˜¯ä¸æ”¯æŒ AMD çš„ï¼Œéœ€è¦å¯¼å…¥å®ç°äº† AMD æ¨¡å—åŒ–è§„èŒƒçš„åº“ï¼ˆä¾‹å¦‚ "},{"type":"Link","title":null,"url":"https://requirejs.org/","children":[{"type":"Str","value":"requirejs","loc":{"start":{"line":149,"column":40},"end":{"line":149,"column":49}},"range":[3863,3872],"raw":"requirejs"}],"loc":{"start":{"line":149,"column":39},"end":{"line":149,"column":74}},"range":[3862,3897],"raw":"[requirejs](https://requirejs.org/)"},{"type":"Str","value":"ï¼‰ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚","loc":{"start":{"line":149,"column":74},"end":{"line":149,"column":82}},"range":[3897,3905],"raw":"ï¼‰ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚"}],"loc":{"start":{"line":149,"column":0},"end":{"line":149,"column":82}},"range":[3823,3905],"raw":"æµè§ˆå™¨åŸç”Ÿæ˜¯ä¸æ”¯æŒ AMD çš„ï¼Œéœ€è¦å¯¼å…¥å®ç°äº† AMD æ¨¡å—åŒ–è§„èŒƒçš„åº“ï¼ˆä¾‹å¦‚ [requirejs](https://requirejs.org/)ï¼‰ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚"},{"type":"HorizontalRule","loc":{"start":{"line":151,"column":0},"end":{"line":151,"column":14}},"range":[3907,3921],"raw":"**************"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"4. CommonJS å’Œ ESM æ¨ªå‘æ¯”è¾ƒ","loc":{"start":{"line":153,"column":3},"end":{"line":153,"column":25}},"range":[3926,3948],"raw":"4. CommonJS å’Œ ESM æ¨ªå‘æ¯”è¾ƒ"}],"loc":{"start":{"line":153,"column":0},"end":{"line":153,"column":25}},"range":[3923,3948],"raw":"## 4. CommonJS å’Œ ESM æ¨ªå‘æ¯”è¾ƒ"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":true,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"ä½¿ç”¨ esm ç¼–å†™çš„æ¨¡å—ï¼Œ","loc":{"start":{"line":155,"column":3},"end":{"line":155,"column":16}},"range":[3953,3966],"raw":"ä½¿ç”¨ esm ç¼–å†™çš„æ¨¡å—ï¼Œ"},{"type":"Strong","children":[{"type":"Str","value":"ä¸èƒ½è¢« require","loc":{"start":{"line":155,"column":18},"end":{"line":155,"column":29}},"range":[3968,3979],"raw":"ä¸èƒ½è¢« require"}],"loc":{"start":{"line":155,"column":16},"end":{"line":155,"column":31}},"range":[3966,3981],"raw":"**ä¸èƒ½è¢« require**"},{"type":"Str","value":"ï¼Œåªèƒ½ä½¿ç”¨ import å…³é”®å­—å¯¼å…¥ï¼›","loc":{"start":{"line":155,"column":31},"end":{"line":155,"column":50}},"range":[3981,4000],"raw":"ï¼Œåªèƒ½ä½¿ç”¨ import å…³é”®å­—å¯¼å…¥ï¼›"}],"loc":{"start":{"line":155,"column":3},"end":{"line":155,"column":50}},"range":[3953,4000],"raw":"ä½¿ç”¨ esm ç¼–å†™çš„æ¨¡å—ï¼Œ**ä¸èƒ½è¢« require**ï¼Œåªèƒ½ä½¿ç”¨ import å…³é”®å­—å¯¼å…¥ï¼›"},{"type":"BlockQuote","children":[{"type":"Paragraph","children":[{"type":"Str","value":"è¿™æ˜¯ç”±äº esm æ¨¡å—å†…æ˜¯æ”¯æŒé¡¶å±‚ await çš„ï¼Œä½†æ˜¯ cjs æ¨¡å—æ˜¯ä¸æ”¯æŒçš„ã€‚","loc":{"start":{"line":157,"column":5},"end":{"line":157,"column":46}},"range":[4007,4048],"raw":"è¿™æ˜¯ç”±äº esm æ¨¡å—å†…æ˜¯æ”¯æŒé¡¶å±‚ await çš„ï¼Œä½†æ˜¯ cjs æ¨¡å—æ˜¯ä¸æ”¯æŒçš„ã€‚"}],"loc":{"start":{"line":157,"column":5},"end":{"line":157,"column":46}},"range":[4007,4048],"raw":"è¿™æ˜¯ç”±äº esm æ¨¡å—å†…æ˜¯æ”¯æŒé¡¶å±‚ await çš„ï¼Œä½†æ˜¯ cjs æ¨¡å—æ˜¯ä¸æ”¯æŒçš„ã€‚"}],"loc":{"start":{"line":157,"column":3},"end":{"line":157,"column":46}},"range":[4005,4048],"raw":"> è¿™æ˜¯ç”±äº esm æ¨¡å—å†…æ˜¯æ”¯æŒé¡¶å±‚ await çš„ï¼Œä½†æ˜¯ cjs æ¨¡å—æ˜¯ä¸æ”¯æŒçš„ã€‚"}],"loc":{"start":{"line":155,"column":0},"end":{"line":157,"column":46}},"range":[3950,4048],"raw":"1. ä½¿ç”¨ esm ç¼–å†™çš„æ¨¡å—ï¼Œ**ä¸èƒ½è¢« require**ï¼Œåªèƒ½ä½¿ç”¨ import å…³é”®å­—å¯¼å…¥ï¼›\n\n   > è¿™æ˜¯ç”±äº esm æ¨¡å—å†…æ˜¯æ”¯æŒé¡¶å±‚ await çš„ï¼Œä½†æ˜¯ cjs æ¨¡å—æ˜¯ä¸æ”¯æŒçš„ã€‚"}],"loc":{"start":{"line":155,"column":0},"end":{"line":157,"column":46}},"range":[3950,4048],"raw":"1. ä½¿ç”¨ esm ç¼–å†™çš„æ¨¡å—ï¼Œ**ä¸èƒ½è¢« require**ï¼Œåªèƒ½ä½¿ç”¨ import å…³é”®å­—å¯¼å…¥ï¼›\n\n   > è¿™æ˜¯ç”±äº esm æ¨¡å—å†…æ˜¯æ”¯æŒé¡¶å±‚ await çš„ï¼Œä½†æ˜¯ cjs æ¨¡å—æ˜¯ä¸æ”¯æŒçš„ã€‚"},{"type":"BlockQuote","children":[],"loc":{"start":{"line":158,"column":0},"end":{"line":158,"column":1}},"range":[4049,4050],"raw":">"},{"type":"List","ordered":true,"start":2,"spread":false,"children":[{"type":"ListItem","spread":true,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œä¸èƒ½è¢« import å…³é”®å­—å¯¼å…¥ï¼ˆå¯ä»¥ä½¿ç”¨ default import å…¼å®¹ï¼Œè§ç¬¬3æ¡ï¼‰ï¼Œåªèƒ½ä½¿ç”¨ require å‡½æ•°æ¥å¯¼å…¥ï¼›","loc":{"start":{"line":159,"column":3},"end":{"line":159,"column":81}},"range":[4054,4132],"raw":"ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œä¸èƒ½è¢« import å…³é”®å­—å¯¼å…¥ï¼ˆå¯ä»¥ä½¿ç”¨ default import å…¼å®¹ï¼Œè§ç¬¬3æ¡ï¼‰ï¼Œåªèƒ½ä½¿ç”¨ require å‡½æ•°æ¥å¯¼å…¥ï¼›"}],"loc":{"start":{"line":159,"column":3},"end":{"line":159,"column":81}},"range":[4054,4132],"raw":"ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œä¸èƒ½è¢« import å…³é”®å­—å¯¼å…¥ï¼ˆå¯ä»¥ä½¿ç”¨ default import å…¼å®¹ï¼Œè§ç¬¬3æ¡ï¼‰ï¼Œåªèƒ½ä½¿ç”¨ require å‡½æ•°æ¥å¯¼å…¥ï¼›"},{"type":"BlockQuote","children":[{"type":"Paragraph","children":[{"type":"Str","value":"è¿™æ˜¯ç”±äº cjs ç¼–å†™çš„æ¨¡å—ï¼Œå…¶å†…éƒ¨å¯¼å‡ºçš„å†…å®¹æ˜¯åŠ¨æ€çš„ï¼Œ","loc":{"start":{"line":161,"column":5},"end":{"line":161,"column":33}},"range":[4139,4167],"raw":"è¿™æ˜¯ç”±äº cjs ç¼–å†™çš„æ¨¡å—ï¼Œå…¶å†…éƒ¨å¯¼å‡ºçš„å†…å®¹æ˜¯åŠ¨æ€çš„ï¼Œ"},{"type":"Strong","children":[{"type":"Str","value":"éœ€è¦è¢«å¯¼å…¥çš„æ–‡ä»¶æ‰§è¡Œå®Œæˆä»¥å","loc":{"start":{"line":161,"column":35},"end":{"line":161,"column":49}},"range":[4169,4183],"raw":"éœ€è¦è¢«å¯¼å…¥çš„æ–‡ä»¶æ‰§è¡Œå®Œæˆä»¥å"}],"loc":{"start":{"line":161,"column":33},"end":{"line":161,"column":51}},"range":[4167,4185],"raw":"**éœ€è¦è¢«å¯¼å…¥çš„æ–‡ä»¶æ‰§è¡Œå®Œæˆä»¥å**"},{"type":"Str","value":"ï¼Œæ‰èƒ½ç¡®å®šæœ‰å“ªäº›å†…å®¹è¢«æŒ‚è½½åˆ° module.exports ä¸Šï¼Œè€Œ import çš„å…³é”®å­—çš„è§£ææ˜¯éœ€è¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œçš„ï¼Œæ­¤æ—¶æ¨¡å—è¿˜æ²¡æœ‰è¢«æ‰§è¡Œã€‚","loc":{"start":{"line":161,"column":51},"end":{"line":161,"column":121}},"range":[4185,4255],"raw":"ï¼Œæ‰èƒ½ç¡®å®šæœ‰å“ªäº›å†…å®¹è¢«æŒ‚è½½åˆ° module.exports ä¸Šï¼Œè€Œ import çš„å…³é”®å­—çš„è§£ææ˜¯éœ€è¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œçš„ï¼Œæ­¤æ—¶æ¨¡å—è¿˜æ²¡æœ‰è¢«æ‰§è¡Œã€‚"}],"loc":{"start":{"line":161,"column":5},"end":{"line":161,"column":121}},"range":[4139,4255],"raw":"è¿™æ˜¯ç”±äº cjs ç¼–å†™çš„æ¨¡å—ï¼Œå…¶å†…éƒ¨å¯¼å‡ºçš„å†…å®¹æ˜¯åŠ¨æ€çš„ï¼Œ**éœ€è¦è¢«å¯¼å…¥çš„æ–‡ä»¶æ‰§è¡Œå®Œæˆä»¥å**ï¼Œæ‰èƒ½ç¡®å®šæœ‰å“ªäº›å†…å®¹è¢«æŒ‚è½½åˆ° module.exports ä¸Šï¼Œè€Œ import çš„å…³é”®å­—çš„è§£ææ˜¯éœ€è¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œçš„ï¼Œæ­¤æ—¶æ¨¡å—è¿˜æ²¡æœ‰è¢«æ‰§è¡Œã€‚"}],"loc":{"start":{"line":161,"column":3},"end":{"line":161,"column":121}},"range":[4137,4255],"raw":"> è¿™æ˜¯ç”±äº cjs ç¼–å†™çš„æ¨¡å—ï¼Œå…¶å†…éƒ¨å¯¼å‡ºçš„å†…å®¹æ˜¯åŠ¨æ€çš„ï¼Œ**éœ€è¦è¢«å¯¼å…¥çš„æ–‡ä»¶æ‰§è¡Œå®Œæˆä»¥å**ï¼Œæ‰èƒ½ç¡®å®šæœ‰å“ªäº›å†…å®¹è¢«æŒ‚è½½åˆ° module.exports ä¸Šï¼Œè€Œ import çš„å…³é”®å­—çš„è§£ææ˜¯éœ€è¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œçš„ï¼Œæ­¤æ—¶æ¨¡å—è¿˜æ²¡æœ‰è¢«æ‰§è¡Œã€‚"}],"loc":{"start":{"line":159,"column":0},"end":{"line":161,"column":121}},"range":[4051,4255],"raw":"2. ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œä¸èƒ½è¢« import å…³é”®å­—å¯¼å…¥ï¼ˆå¯ä»¥ä½¿ç”¨ default import å…¼å®¹ï¼Œè§ç¬¬3æ¡ï¼‰ï¼Œåªèƒ½ä½¿ç”¨ require å‡½æ•°æ¥å¯¼å…¥ï¼›\n\n   > è¿™æ˜¯ç”±äº cjs ç¼–å†™çš„æ¨¡å—ï¼Œå…¶å†…éƒ¨å¯¼å‡ºçš„å†…å®¹æ˜¯åŠ¨æ€çš„ï¼Œ**éœ€è¦è¢«å¯¼å…¥çš„æ–‡ä»¶æ‰§è¡Œå®Œæˆä»¥å**ï¼Œæ‰èƒ½ç¡®å®šæœ‰å“ªäº›å†…å®¹è¢«æŒ‚è½½åˆ° module.exports ä¸Šï¼Œè€Œ import çš„å…³é”®å­—çš„è§£ææ˜¯éœ€è¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œçš„ï¼Œæ­¤æ—¶æ¨¡å—è¿˜æ²¡æœ‰è¢«æ‰§è¡Œã€‚"}],"loc":{"start":{"line":159,"column":0},"end":{"line":161,"column":121}},"range":[4051,4255],"raw":"2. ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œä¸èƒ½è¢« import å…³é”®å­—å¯¼å…¥ï¼ˆå¯ä»¥ä½¿ç”¨ default import å…¼å®¹ï¼Œè§ç¬¬3æ¡ï¼‰ï¼Œåªèƒ½ä½¿ç”¨ require å‡½æ•°æ¥å¯¼å…¥ï¼›\n\n   > è¿™æ˜¯ç”±äº cjs ç¼–å†™çš„æ¨¡å—ï¼Œå…¶å†…éƒ¨å¯¼å‡ºçš„å†…å®¹æ˜¯åŠ¨æ€çš„ï¼Œ**éœ€è¦è¢«å¯¼å…¥çš„æ–‡ä»¶æ‰§è¡Œå®Œæˆä»¥å**ï¼Œæ‰èƒ½ç¡®å®šæœ‰å“ªäº›å†…å®¹è¢«æŒ‚è½½åˆ° module.exports ä¸Šï¼Œè€Œ import çš„å…³é”®å­—çš„è§£ææ˜¯éœ€è¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œçš„ï¼Œæ­¤æ—¶æ¨¡å—è¿˜æ²¡æœ‰è¢«æ‰§è¡Œã€‚"},{"type":"BlockQuote","children":[],"loc":{"start":{"line":162,"column":0},"end":{"line":162,"column":1}},"range":[4256,4257],"raw":">"},{"type":"List","ordered":true,"start":3,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œå¯ä»¥è¢« default import ï¼Œä½†æ˜¯ä¸èƒ½è¢« named importï¼›","loc":{"start":{"line":163,"column":3},"end":{"line":163,"column":55}},"range":[4261,4313],"raw":"ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œå¯ä»¥è¢« default import ï¼Œä½†æ˜¯ä¸èƒ½è¢« named importï¼›"}],"loc":{"start":{"line":163,"column":3},"end":{"line":163,"column":55}},"range":[4261,4313],"raw":"ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œå¯ä»¥è¢« default import ï¼Œä½†æ˜¯ä¸èƒ½è¢« named importï¼›"}],"loc":{"start":{"line":163,"column":0},"end":{"line":163,"column":55}},"range":[4258,4313],"raw":"3. ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œå¯ä»¥è¢« default import ï¼Œä½†æ˜¯ä¸èƒ½è¢« named importï¼›"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"å¯ä»¥åœ¨ esm æ¨¡å—å†…ä½¿ç”¨ require æ¥å¯¼å…¥ cjs æ¨¡å—ï¼Œå³ä½¿è¯¥ cjs æ¨¡å—ä½¿ç”¨çš„æ˜¯ named exportã€‚ä½†æ˜¯è¿™æ ·çš„ä½¿ç”¨å¯èƒ½ä¼šåœ¨ webpackã€rollup ç­‰æ„å»ºå·¥å…·ä¸­å¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ã€‚","loc":{"start":{"line":164,"column":3},"end":{"line":164,"column":106}},"range":[4317,4420],"raw":"å¯ä»¥åœ¨ esm æ¨¡å—å†…ä½¿ç”¨ require æ¥å¯¼å…¥ cjs æ¨¡å—ï¼Œå³ä½¿è¯¥ cjs æ¨¡å—ä½¿ç”¨çš„æ˜¯ named exportã€‚ä½†æ˜¯è¿™æ ·çš„ä½¿ç”¨å¯èƒ½ä¼šåœ¨ webpackã€rollup ç­‰æ„å»ºå·¥å…·ä¸­å¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ã€‚"}],"loc":{"start":{"line":164,"column":3},"end":{"line":164,"column":106}},"range":[4317,4420],"raw":"å¯ä»¥åœ¨ esm æ¨¡å—å†…ä½¿ç”¨ require æ¥å¯¼å…¥ cjs æ¨¡å—ï¼Œå³ä½¿è¯¥ cjs æ¨¡å—ä½¿ç”¨çš„æ˜¯ named exportã€‚ä½†æ˜¯è¿™æ ·çš„ä½¿ç”¨å¯èƒ½ä¼šåœ¨ webpackã€rollup ç­‰æ„å»ºå·¥å…·ä¸­å¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ã€‚"}],"loc":{"start":{"line":164,"column":0},"end":{"line":164,"column":106}},"range":[4314,4420],"raw":"4. å¯ä»¥åœ¨ esm æ¨¡å—å†…ä½¿ç”¨ require æ¥å¯¼å…¥ cjs æ¨¡å—ï¼Œå³ä½¿è¯¥ cjs æ¨¡å—ä½¿ç”¨çš„æ˜¯ named exportã€‚ä½†æ˜¯è¿™æ ·çš„ä½¿ç”¨å¯èƒ½ä¼šåœ¨ webpackã€rollup ç­‰æ„å»ºå·¥å…·ä¸­å¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ã€‚"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"cjs æ˜¯é»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨ esm ï¼Œå¯ä»¥å°† js çš„æ–‡ä»¶åç¼€åä¿®æ”¹ä¸º .mjsã€‚æˆ–è€…å¯ä»¥","loc":{"start":{"line":165,"column":3},"end":{"line":165,"column":55}},"range":[4424,4476],"raw":"cjs æ˜¯é»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨ esm ï¼Œå¯ä»¥å°† js çš„æ–‡ä»¶åç¼€åä¿®æ”¹ä¸º .mjsã€‚æˆ–è€…å¯ä»¥"},{"type":"Strong","children":[{"type":"Str","value":"å°† package.json ä¸­çš„ type è®¾ç½®ä¸º module ï¼Œå°† esm è®¾ç½®ä¸ºé»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆ","loc":{"start":{"line":165,"column":57},"end":{"line":165,"column":109}},"range":[4478,4530],"raw":"å°† package.json ä¸­çš„ type è®¾ç½®ä¸º module ï¼Œå°† esm è®¾ç½®ä¸ºé»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆ"}],"loc":{"start":{"line":165,"column":55},"end":{"line":165,"column":111}},"range":[4476,4532],"raw":"**å°† package.json ä¸­çš„ type è®¾ç½®ä¸º module ï¼Œå°† esm è®¾ç½®ä¸ºé»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆ**"},{"type":"Str","value":"ï¼Œå¦‚æœæ­¤æ—¶æƒ³ä½¿ç”¨ cjs ï¼Œéœ€è¦å°†å¯¹åº”çš„æ–‡ä»¶åç¼€åæ”¹ä¸º .mjsã€‚","loc":{"start":{"line":165,"column":111},"end":{"line":165,"column":144}},"range":[4532,4565],"raw":"ï¼Œå¦‚æœæ­¤æ—¶æƒ³ä½¿ç”¨ cjs ï¼Œéœ€è¦å°†å¯¹åº”çš„æ–‡ä»¶åç¼€åæ”¹ä¸º .mjsã€‚"}],"loc":{"start":{"line":165,"column":3},"end":{"line":165,"column":144}},"range":[4424,4565],"raw":"cjs æ˜¯é»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨ esm ï¼Œå¯ä»¥å°† js çš„æ–‡ä»¶åç¼€åä¿®æ”¹ä¸º .mjsã€‚æˆ–è€…å¯ä»¥**å°† package.json ä¸­çš„ type è®¾ç½®ä¸º module ï¼Œå°† esm è®¾ç½®ä¸ºé»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆ**ï¼Œå¦‚æœæ­¤æ—¶æƒ³ä½¿ç”¨ cjs ï¼Œéœ€è¦å°†å¯¹åº”çš„æ–‡ä»¶åç¼€åæ”¹ä¸º .mjsã€‚"}],"loc":{"start":{"line":165,"column":0},"end":{"line":165,"column":144}},"range":[4421,4565],"raw":"5. cjs æ˜¯é»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨ esm ï¼Œå¯ä»¥å°† js çš„æ–‡ä»¶åç¼€åä¿®æ”¹ä¸º .mjsã€‚æˆ–è€…å¯ä»¥**å°† package.json ä¸­çš„ type è®¾ç½®ä¸º module ï¼Œå°† esm è®¾ç½®ä¸ºé»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆ**ï¼Œå¦‚æœæ­¤æ—¶æƒ³ä½¿ç”¨ cjs ï¼Œéœ€è¦å°†å¯¹åº”çš„æ–‡ä»¶åç¼€åæ”¹ä¸º .mjsã€‚"}],"loc":{"start":{"line":163,"column":0},"end":{"line":165,"column":144}},"range":[4258,4565],"raw":"3. ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œå¯ä»¥è¢« default import ï¼Œä½†æ˜¯ä¸èƒ½è¢« named importï¼›\n4. å¯ä»¥åœ¨ esm æ¨¡å—å†…ä½¿ç”¨ require æ¥å¯¼å…¥ cjs æ¨¡å—ï¼Œå³ä½¿è¯¥ cjs æ¨¡å—ä½¿ç”¨çš„æ˜¯ named exportã€‚ä½†æ˜¯è¿™æ ·çš„ä½¿ç”¨å¯èƒ½ä¼šåœ¨ webpackã€rollup ç­‰æ„å»ºå·¥å…·ä¸­å¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ã€‚\n5. cjs æ˜¯é»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨ esm ï¼Œå¯ä»¥å°† js çš„æ–‡ä»¶åç¼€åä¿®æ”¹ä¸º .mjsã€‚æˆ–è€…å¯ä»¥**å°† package.json ä¸­çš„ type è®¾ç½®ä¸º module ï¼Œå°† esm è®¾ç½®ä¸ºé»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆ**ï¼Œå¦‚æœæ­¤æ—¶æƒ³ä½¿ç”¨ cjs ï¼Œéœ€è¦å°†å¯¹åº”çš„æ–‡ä»¶åç¼€åæ”¹ä¸º .mjsã€‚"},{"type":"HorizontalRule","loc":{"start":{"line":167,"column":0},"end":{"line":167,"column":13}},"range":[4567,4580],"raw":"*************"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"5. æ¡ˆä¾‹å’Œå‘","loc":{"start":{"line":169,"column":3},"end":{"line":169,"column":10}},"range":[4585,4592],"raw":"5. æ¡ˆä¾‹å’Œå‘"}],"loc":{"start":{"line":169,"column":0},"end":{"line":169,"column":10}},"range":[4582,4592],"raw":"## 5. æ¡ˆä¾‹å’Œå‘"},{"type":"Paragraph","children":[{"type":"Str","value":"éšä¾¿æ‰“å¼€ä¸€ä¸ª React é¡¹ç›®çš„ node_modules ï¼Œä¸éš¾å‘ç°ï¼Œå…¶å® React åªæä¾›äº† cjs æ ¼å¼çš„åŒ…ï¼š","loc":{"start":{"line":171,"column":0},"end":{"line":171,"column":59}},"range":[4594,4653],"raw":"éšä¾¿æ‰“å¼€ä¸€ä¸ª React é¡¹ç›®çš„ node_modules ï¼Œä¸éš¾å‘ç°ï¼Œå…¶å® React åªæä¾›äº† cjs æ ¼å¼çš„åŒ…ï¼š"}],"loc":{"start":{"line":171,"column":0},"end":{"line":171,"column":59}},"range":[4594,4653],"raw":"éšä¾¿æ‰“å¼€ä¸€ä¸ª React é¡¹ç›®çš„ node_modules ï¼Œä¸éš¾å‘ç°ï¼Œå…¶å® React åªæä¾›äº† cjs æ ¼å¼çš„åŒ…ï¼š"},{"type":"Paragraph","children":[{"type":"Image","title":null,"url":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0c6ae159-0da8-4def-a35c-aa22272513d1/Untitled.png","alt":"Untitled","loc":{"start":{"line":173,"column":0},"end":{"line":173,"column":122}},"range":[4655,4777],"raw":"![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0c6ae159-0da8-4def-a35c-aa22272513d1/Untitled.png)"}],"loc":{"start":{"line":173,"column":0},"end":{"line":173,"column":122}},"range":[4655,4777],"raw":"![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0c6ae159-0da8-4def-a35c-aa22272513d1/Untitled.png)"},{"type":"Paragraph","children":[{"type":"Str","value":"æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨ä»£ç é‡Œä½¿ç”¨ React çš„æ—¶å€™ï¼Œåº”è¯¥æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼æ¥å¼•å…¥ï¼š","loc":{"start":{"line":175,"column":0},"end":{"line":175,"column":38}},"range":[4779,4817],"raw":"æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨ä»£ç é‡Œä½¿ç”¨ React çš„æ—¶å€™ï¼Œåº”è¯¥æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼æ¥å¼•å…¥ï¼š"}],"loc":{"start":{"line":175,"column":0},"end":{"line":175,"column":38}},"range":[4779,4817],"raw":"æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨ä»£ç é‡Œä½¿ç”¨ React çš„æ—¶å€™ï¼Œåº”è¯¥æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼æ¥å¼•å…¥ï¼š"},{"type":"CodeBlock","lang":"jsx","meta":null,"value":"import React from 'react';\nconst { useEffect } = React;","loc":{"start":{"line":177,"column":0},"end":{"line":180,"column":3}},"range":[4819,4885],"raw":"```jsx\nimport React from 'react';\nconst { useEffect } = React;\n```"},{"type":"Paragraph","children":[{"type":"Str","value":"ä½†æ˜¯åœ¨é¡¹ç›®å®é™…å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥æŒ‰ç…§ esm çš„æ–¹å¼æ¥å¼•å…¥ React æ›´ä¸ºå¸¸è§ï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œæ‰§è¡Œèµ·æ¥ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚","loc":{"start":{"line":182,"column":0},"end":{"line":182,"column":61}},"range":[4887,4948],"raw":"ä½†æ˜¯åœ¨é¡¹ç›®å®é™…å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥æŒ‰ç…§ esm çš„æ–¹å¼æ¥å¼•å…¥ React æ›´ä¸ºå¸¸è§ï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œæ‰§è¡Œèµ·æ¥ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚"}],"loc":{"start":{"line":182,"column":0},"end":{"line":182,"column":61}},"range":[4887,4948],"raw":"ä½†æ˜¯åœ¨é¡¹ç›®å®é™…å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥æŒ‰ç…§ esm çš„æ–¹å¼æ¥å¼•å…¥ React æ›´ä¸ºå¸¸è§ï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œæ‰§è¡Œèµ·æ¥ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚"},{"type":"CodeBlock","lang":"jsx","meta":null,"value":"import React, { useEffect } from 'react';","loc":{"start":{"line":184,"column":0},"end":{"line":186,"column":3}},"range":[4950,5002],"raw":"```jsx\nimport React, { useEffect } from 'react';\n```"},{"type":"Paragraph","children":[{"type":"Str","value":"è¿™æ˜¯ç”±äº babelã€webpack ç­‰ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™å¯¹ React è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œè®©å…¶æ”¯æŒé€šè¿‡ esm çš„æ–¹å¼æ¥å¼•å…¥ npm åŒ…ã€‚","loc":{"start":{"line":188,"column":0},"end":{"line":188,"column":66}},"range":[5004,5070],"raw":"è¿™æ˜¯ç”±äº babelã€webpack ç­‰ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™å¯¹ React è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œè®©å…¶æ”¯æŒé€šè¿‡ esm çš„æ–¹å¼æ¥å¼•å…¥ npm åŒ…ã€‚"}],"loc":{"start":{"line":188,"column":0},"end":{"line":188,"column":66}},"range":[5004,5070],"raw":"è¿™æ˜¯ç”±äº babelã€webpack ç­‰ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™å¯¹ React è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œè®©å…¶æ”¯æŒé€šè¿‡ esm çš„æ–¹å¼æ¥å¼•å…¥ npm åŒ…ã€‚"}],"loc":{"start":{"line":1,"column":0},"end":{"line":189,"column":0}},"range":[0,5071],"raw":"---\ntitle: 'æµ…è°ˆJavaScriptæ¨¡å—åŒ–'\ntags: ['å‰ç«¯å·¥ç¨‹åŒ–', 'å‰ç«¯', 'NodeJS', 'CommonJs', 'ES Module', 'AMD']\nrecommend: 'frontend'\nicon: 'ğŸ˜'\ncover: 'https://i.328888.xyz/2023/01/02/tNist.png'\n---\n# æµ…è°ˆ JavaScript æ¨¡å—åŒ–\n\nJavaScript åœ¨æœ€å¼€å§‹æ—¶æ˜¯æ²¡æœ‰æ¨¡å—åŒ–çš„æ¦‚å¿µçš„ï¼Œå³ä½¿åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨å¤šä¸ª script æ ‡ç­¾åŠ è½½çš„ jsï¼Œä»ç„¶æ˜¯å…±äº«çš„å…¨å±€å˜é‡ç©ºé—´ã€‚\n\n**æ¨¡å—åŒ–è§„èŒƒ**ä¸º JavaScript æä¾›äº†æ¨¡å—ç¼–å†™ã€æ¨¡å—ä¾èµ–å’Œæ¨¡å—è¿è¡Œçš„æ–¹æ¡ˆã€‚\n\næ€»ä½“æ¥è¯´ï¼Œç›®å‰ JavaScript æœ‰ä¸¤ç§æ¨¡å—åŒ–è§„èŒƒ(esm å’Œ CommonJS)ï¼Œ**å¹¶ä¸”è¿™ä¸¤ç§æ¨¡å—åŒ–è§„èŒƒå¹¶ä¸å®Œå…¨å…¼å®¹**ã€‚\n\n## 1. CommonJS\n\n### æ¦‚è¿°\n\nCommonJS æ˜¯ Node é»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆã€‚\n\nrequire/exports æ˜¯ç”± JavaScript ç¤¾åŒºå¼€å‘è€…åœ¨ ECMAScript åˆ¶å®šæ¨¡å—åŒ–è§„åˆ™ä¹‹å‰ï¼Œè‡ªè¡Œæ‹Ÿå®šçš„è§„åˆ™ï¼Œå¾—åˆ°äº†å¹¿æ³›çš„æ‰¿è®¤å’Œä½¿ç”¨ã€‚\n\nCommonJS å°±æ˜¯å…¶ä»£è¡¨æ€§çš„æ¨¡å—åŒ–è§„èŒƒï¼Œä¹Ÿæ˜¯ NodeJS ä½¿ç”¨çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå¹¶ä¸” NodeJS å·²ç»æœ‰å¾ˆå¤šåŸºäº CommonJS çš„åŒ…ã€‚\n\n### åŠ è½½è¿‡ç¨‹\n\n**CommonJS æ¨¡å—æ˜¯åŠ¨æ€å¹¶ä¸”åŒæ­¥æ‰§è¡Œçš„**ï¼Œæ‰§è¡Œåˆ° require å‡½æ•°è¯­å¥æ—¶ï¼Œå¯¹åº”çš„æ–‡ä»¶æ‰ä¼šè¢«åŠ è½½å¹¶æ‰§è¡Œï¼Œå°†å·¦å³ module.exports ä¸Šè®¾ç½®çš„å†…å®¹è¿”å›ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ require æ—¶ï¼Œå¹¶ä¸è¦æ±‚ require çš„ä½ç½®ï¼Œè¯¥è¯­å¥å¯ä»¥åœ¨ä»»æ„ä½ç½®æ‰§è¡Œã€‚\n\n### ç‰¹ç‚¹\n\nå¯¼å…¥åŒ…æ—¶ä½¿ç”¨çš„ **require åªæ˜¯æ™®é€šçš„å‡½æ•°ï¼Œexports ä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡**ï¼Œæ‰€ä»¥ï¼š\n\n- å¯¹äºåŸºç¡€æ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚ numberã€string ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†ä» require å¼•å…¥æ˜¯å€¼ä¼ é€’ï¼Œå¦‚æœæ¨¡å—å†…çš„å€¼åœ¨ exports åå‘ç”Ÿå˜åŒ–ï¼Œ**ç”± require å¼•å…¥çš„è¯¥å€¼å¹¶ä¸ä¼šå‘ç”Ÿå˜åŒ–**ã€‚\n- å¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ç­‰ï¼‰ï¼Œé€šè¿‡ exports æš´éœ²åå†é€šè¿‡ require å¼•å…¥æ—¶ï¼Œæ˜¯æµ…æ‹·è´ã€‚\n\n*****************\n\n## 2. ES Module\n\n### æ¦‚è¿°\n\nåœ¨ ES6 ä¸­ï¼Œå¼•å…¥äº†ä¸€å¥—æ–°çš„æ¨¡å—åŒ–è§„èŒƒï¼Œä»è¯­è¨€å±‚é¢å®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œé‚£å°±æ˜¯ ESMã€‚\n\nESM æ¨¡å—çš„ import è¯­å¥ï¼Œ**æ˜¯é™æ€è§£æçš„ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œå°±ä¼šè§£æå¹¶åŠ è½½å¯¹åº”çš„æ¨¡å—**ã€‚æ‰€ä»¥ä½¿ç”¨ ESM æ—¶ï¼Œimport è¯­å¥éœ€è¦åœ¨æ–‡ä»¶çš„é¡¶å±‚ã€‚\n\n### åŠ è½½è¿‡ç¨‹\n\nåœ¨ ESM ä¸­ï¼Œæ¨¡å—çš„åŠ è½½æ˜¯**å¼‚æ­¥æ‰§è¡Œ**çš„ã€‚åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œæ‰€æœ‰ä½¿ç”¨åˆ° import å’Œ export å…³é”®å­—çš„è¯­å¥éƒ½ä¼šè¢«è§£æï¼Œç”¨æ¥æ„å»º**ä¾èµ–å…³ç³»å›¾**ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œè¢«å¼•å…¥çš„è„šæœ¬å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œã€‚\n\nESM æ¨¡å—åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦å®é™…æ‰§è¡Œè¢«å¼•å…¥çš„æ–‡ä»¶çš„ä»£ç ï¼Œä¸€äº› named import å†…çš„é”™è¯¯å°±å¯ä»¥è¢«å‘ç°ã€‚\n\nESM æ¨¡å—åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œä¼šä»å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œæ ¹æ® import å…³é”®å­—è¯­å¥ï¼Œç”±å¤–åˆ°å†…æ„å»ºæ¨¡å—ä¹‹é—´çš„**ä¾èµ–å…³ç³»å›¾ï¼Œ**ç›´åˆ°æ²¡æœ‰ä»»ä½•å…¶ä»–ä¾èµ–çš„æ¨¡å—ã€‚ç„¶åç”±å†…å‘å¤–æ‰§è¡Œï¼Œä¸€ä¸ªæ¨¡å—ä¾èµ–çš„å…¶ä»–æ¨¡å—éƒ½æ‰§è¡Œå®Œæˆä»¥åï¼Œè¿™ä¸ªæ¨¡å—æ‰èƒ½å¾—åˆ°æ‰§è¡Œã€‚\n\n### ç‰¹ç‚¹\n\n#### 1. ESM å¯¼å…¥å’Œå¯¼å‡ºæ˜¯å¼•ç”¨ä¼ é€’\n\né€šè¿‡ export å¯¼å‡ºå€¼ï¼Œé€šè¿‡ import å¯¼å…¥ï¼Œ**è¿™ä¸¤ä¸ªæ˜¯å…³é”®å­—ï¼Œ**ä¸”ä½¿ç”¨ export å¯¼å‡ºçš„å€¼æ˜¯å¼•ç”¨ä¼ é€’ï¼ˆä¸¤ä¸ªæ ‡è¯†ç¬¦æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜ï¼‰\n\n```jsx\n// a.js\nexport let a = 1;\nexport function changeA(v) {\n\ta = v;\n}\n\n// b.js\nimport { a, changeA } from 'a';\nconsole.log(a);\nchangeA(2);\nconsole.log(a);\n\n// è¾“å‡º\n// 1\n// 2\n```\n\n#### 2. ESM æ¨¡å—å†…æ”¯æŒ Top Level Await\n\nå¾—ç›Šäº esm æ¨¡å—çš„åŠ è½½æœºåˆ¶ï¼Œæ¨¡å—çš„æ‰§è¡Œå‘ç”Ÿåœ¨ä¾èµ–å…³ç³»å›¾æ„å»ºå®Œæˆä»¥åï¼Œåœ¨ esm æ¨¡å—å†…ï¼Œå¯ä»¥åœ¨æ¨¡å—çš„é¡¶å±‚ä½¿ç”¨ await å…³é”®å­—ã€‚\n\nä¸‹é¢æ˜¯ä¸€æ®µå¼•ç”¨è‡ª v8 åšå®¢([Top-level await](https://v8.dev/features/top-level-await))çš„ä¸€æ®µï¼š\n\n> Perhaps you have seen the infamous gist by Rich Harris which initially outlined a number of concerns about top-level await and urged the JavaScript language not to implement the feature. Some specific concerns were:\n>\n> - Top-level await could block execution.\n> - Top-level await could block fetching resources.\n> - There would be no clear interop story for CommonJS modules.\n>\n> The stage 3 version of the proposal directly addresses these issues:\n>\n> - **As siblings are able to execute**, there is no definitive blocking.\n> - **Top-level await occurs during the execution phase of the module graph**. At this point all resources have already been fetched and linked. There is no risk of blocking fetching resources.\n> - **Top-level await is limited to [ESM] modules**. There is explicitly no support for scripts or for CommonJS modules.\n\n```js\n// CommonJS\nconst a = require('a.cjs');\nconst b = require('b.cjs');\n// ESM\nimport { a } from 'a.mjs';\nimport { b } from 'b.mjs';\n```\n\nç”±äº CommonJS çš„ require å‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å¦‚æœ a.cjs å†…æœ‰é¡¶å±‚çš„ await ï¼Œé‚£ä¹ˆ require(â€™b.cjsâ€™) çš„è¯­å¥å°±ä¼šè¢«é˜»å¡ï¼Œå¹¶ä¸” CommonJS æ˜¯åœ¨æ‰§è¡Œåˆ° require çš„æ—¶å€™æ‰ä¼šåŠ è½½å¹¶æ‰§è¡Œå¯¹åº”çš„æ¨¡å—ï¼Œé¡¶å±‚ await ç”šè‡³ä¼šé˜»å¡åˆ° b.cjs èµ„æºçš„åŠ è½½ã€‚\n\nä½†æ˜¯åœ¨ ESM ä¸­å°±ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸º import çš„æ„å»ºä¾èµ–å…³ç³»å›¾çš„è¿‡ç¨‹æ˜¯åœ¨ç¼–è¯‘æ—¶å°±ä¼šç¡®å®šå¥½äº†ï¼Œæ­¤æ—¶ä¸ä¼šæ‰§è¡Œæ¨¡å—çš„ä»£ç ã€‚å„ä¸ªæ¨¡å—ä¹Ÿæ˜¯åœ¨ä¸€ä¸ªå¼‚æ­¥çš„å‡½æ•°å†…æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æ¨¡å—æ‰§è¡Œæ—¶ä¹Ÿä¸ä¼šç›¸äº’é˜»å¡ã€‚\n\n**************\n\n## 3. AMD(define/require)\n\n### æ¦‚è¿°\n\nAMD ä¹Ÿæ˜¯ä¸€ç§ç¤¾åŒºå¼€å‘è€…å®ç°çš„ JavaScript æ¨¡å—åŒ–è§„èŒƒï¼Œä¸ CommonJS ä¸åŒçš„æ˜¯ï¼ŒAMDçš„å¯¼å…¥ require æ˜¯**å¼‚æ­¥**çš„ï¼ŒAMD æ¨¡å—åŒ–è§„èŒƒæ˜¯å¯ä»¥ä¸éœ€è¦è½¬æ¢ï¼Œé€šè¿‡åœ¨æµè§ˆå™¨å†…å¼•å…¥ AMD å®ç°ï¼ˆæœ€å…·æœ‰ä»£è¡¨æ€§çš„å®ç° [requirejs](https://requirejs.org/)ï¼‰çš„æ–¹å¼ï¼Œåœ¨æµè§ˆå™¨å†…ç›´æ¥è¿è¡Œçš„ã€‚\n\n### å®ç°åŸç†\n\nåœ¨æµè§ˆå™¨å†…é€šè¿‡ <script> æ ‡ç­¾å¼•å…¥äº† AMD è§„èŒƒçš„å®ç°ä¹‹åï¼Œä¼šåœ¨æµè§ˆå™¨å…¨å±€æ³¨å†Œä¸¤ä¸ªå‡½æ•°:\n\n- define å‡½æ•°ï¼šç”¨äºå£°æ˜æ¨¡å—ï¼Œæ¥å—3ä¸ªå‚æ•°ï¼Œæ¨¡å—çš„åç§°ã€æ¨¡å—ä¾èµ–çš„å…¶ä»–æ¨¡å—åç§°æ•°ç»„ä»¥åŠç”Ÿæˆæ¨¡å—çš„å‡½æ•°\n- require å‡½æ•°ï¼šç”¨äºé€šè¿‡æ¨¡å—çš„åç§°å¯¼å…¥å¯¹åº”çš„æ¨¡å—\n\n```js\n// å®šä¹‰ä¸€ä¸ªæ¨¡å—\ndefine('module', ['dep'], function(dep) {\n  return exports;\n});\n\n// å¯¼å…¥å’Œä½¿ç”¨\nrequire(['module'], function(module) {\n});\n```\n\n### ä¼˜ç‚¹\n\n- å¯åœ¨ä¸è½¬æ¢ä»£ç çš„æƒ…å†µä¸‹ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼›\n- å¯å¼‚æ­¥åŠ è½½ä¾èµ–ï¼›\n- å¯å¹¶è¡ŒåŠ è½½å¤šä¸ªä¾èµ–ï¼›\n- ä»£ç å¯è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒå’Œ Node.js ç¯å¢ƒä¸‹ã€‚\n\n### ç¼ºç‚¹\n\nä¸ç®¡æ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒè¿˜æ˜¯ NodeJS ç¯å¢ƒï¼ŒJavaScript åŸç”Ÿéƒ½æ˜¯ä¸æ”¯æŒ AMD æ¨¡å—åŒ–è§„èŒƒçš„ï¼Œéœ€è¦å¼•å…¥å¯¹åº”çš„åº“ä¹‹åæ‰èƒ½ä½¿ç”¨ã€‚\n\nå¹¶ä¸” AMD æ¨¡å—åŒ–çš„å®ç°åº“ï¼Œå¿…é¡»è¦åœ¨æ¨¡å—å£°æ˜ä¹‹å‰å°±åŠ è½½å®Œæˆã€‚\n\næµè§ˆå™¨åŸç”Ÿæ˜¯ä¸æ”¯æŒ AMD çš„ï¼Œéœ€è¦å¯¼å…¥å®ç°äº† AMD æ¨¡å—åŒ–è§„èŒƒçš„åº“ï¼ˆä¾‹å¦‚ [requirejs](https://requirejs.org/)ï¼‰ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚\n\n**************\n\n## 4. CommonJS å’Œ ESM æ¨ªå‘æ¯”è¾ƒ\n\n1. ä½¿ç”¨ esm ç¼–å†™çš„æ¨¡å—ï¼Œ**ä¸èƒ½è¢« require**ï¼Œåªèƒ½ä½¿ç”¨ import å…³é”®å­—å¯¼å…¥ï¼›\n\n   > è¿™æ˜¯ç”±äº esm æ¨¡å—å†…æ˜¯æ”¯æŒé¡¶å±‚ await çš„ï¼Œä½†æ˜¯ cjs æ¨¡å—æ˜¯ä¸æ”¯æŒçš„ã€‚\n>\n2. ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œä¸èƒ½è¢« import å…³é”®å­—å¯¼å…¥ï¼ˆå¯ä»¥ä½¿ç”¨ default import å…¼å®¹ï¼Œè§ç¬¬3æ¡ï¼‰ï¼Œåªèƒ½ä½¿ç”¨ require å‡½æ•°æ¥å¯¼å…¥ï¼›\n\n   > è¿™æ˜¯ç”±äº cjs ç¼–å†™çš„æ¨¡å—ï¼Œå…¶å†…éƒ¨å¯¼å‡ºçš„å†…å®¹æ˜¯åŠ¨æ€çš„ï¼Œ**éœ€è¦è¢«å¯¼å…¥çš„æ–‡ä»¶æ‰§è¡Œå®Œæˆä»¥å**ï¼Œæ‰èƒ½ç¡®å®šæœ‰å“ªäº›å†…å®¹è¢«æŒ‚è½½åˆ° module.exports ä¸Šï¼Œè€Œ import çš„å…³é”®å­—çš„è§£ææ˜¯éœ€è¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œçš„ï¼Œæ­¤æ—¶æ¨¡å—è¿˜æ²¡æœ‰è¢«æ‰§è¡Œã€‚\n>\n3. ä½¿ç”¨ cjs ç¼–å†™çš„æ¨¡å—ï¼Œå¯ä»¥è¢« default import ï¼Œä½†æ˜¯ä¸èƒ½è¢« named importï¼›\n4. å¯ä»¥åœ¨ esm æ¨¡å—å†…ä½¿ç”¨ require æ¥å¯¼å…¥ cjs æ¨¡å—ï¼Œå³ä½¿è¯¥ cjs æ¨¡å—ä½¿ç”¨çš„æ˜¯ named exportã€‚ä½†æ˜¯è¿™æ ·çš„ä½¿ç”¨å¯èƒ½ä¼šåœ¨ webpackã€rollup ç­‰æ„å»ºå·¥å…·ä¸­å¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ã€‚\n5. cjs æ˜¯é»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨ esm ï¼Œå¯ä»¥å°† js çš„æ–‡ä»¶åç¼€åä¿®æ”¹ä¸º .mjsã€‚æˆ–è€…å¯ä»¥**å°† package.json ä¸­çš„ type è®¾ç½®ä¸º module ï¼Œå°† esm è®¾ç½®ä¸ºé»˜è®¤çš„æ¨¡å—åŒ–æ–¹æ¡ˆ**ï¼Œå¦‚æœæ­¤æ—¶æƒ³ä½¿ç”¨ cjs ï¼Œéœ€è¦å°†å¯¹åº”çš„æ–‡ä»¶åç¼€åæ”¹ä¸º .mjsã€‚\n\n*************\n\n## 5. æ¡ˆä¾‹å’Œå‘\n\néšä¾¿æ‰“å¼€ä¸€ä¸ª React é¡¹ç›®çš„ node_modules ï¼Œä¸éš¾å‘ç°ï¼Œå…¶å® React åªæä¾›äº† cjs æ ¼å¼çš„åŒ…ï¼š\n\n![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0c6ae159-0da8-4def-a35c-aa22272513d1/Untitled.png)\n\næ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨ä»£ç é‡Œä½¿ç”¨ React çš„æ—¶å€™ï¼Œåº”è¯¥æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼æ¥å¼•å…¥ï¼š\n\n```jsx\nimport React from 'react';\nconst { useEffect } = React;\n```\n\nä½†æ˜¯åœ¨é¡¹ç›®å®é™…å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥æŒ‰ç…§ esm çš„æ–¹å¼æ¥å¼•å…¥ React æ›´ä¸ºå¸¸è§ï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œæ‰§è¡Œèµ·æ¥ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚\n\n```jsx\nimport React, { useEffect } from 'react';\n```\n\nè¿™æ˜¯ç”±äº babelã€webpack ç­‰ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™å¯¹ React è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œè®©å…¶æ”¯æŒé€šè¿‡ esm çš„æ–¹å¼æ¥å¼•å…¥ npm åŒ…ã€‚\n"},"catalogue":{"title":"æµ…è°ˆJavaScriptæ¨¡å—åŒ–","json-path":"2023-01-03-æµ…è°ˆJavascriptæ¨¡å—åŒ–.json","mdate":"2023-01-03","cover":"https://i.328888.xyz/2023/01/02/tNist.png","icon":"ğŸ˜","tags":["å‰ç«¯å·¥ç¨‹åŒ–","å‰ç«¯","NodeJS","CommonJs","ES Module","AMD"],"recommend":"frontend"}}