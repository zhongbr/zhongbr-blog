{"ast":{"type":"Document","children":[{"type":"Yaml","value":"title: 'ä¿¡å·é‡æœºåˆ¶'\ntags: ['æ“ä½œç³»ç»Ÿ','ä¿¡å·é‡']","loc":{"start":{"line":1,"column":0},"end":{"line":4,"column":3}},"range":[0,43],"raw":"ï»¿---\ntitle: 'ä¿¡å·é‡æœºåˆ¶'\ntags: ['æ“ä½œç³»ç»Ÿ','ä¿¡å·é‡']\n--","visible":false},{"type":"Header","depth":1,"children":[{"type":"Str","value":"ä¿¡å·é‡æœºåˆ¶","loc":{"start":{"line":5,"column":2},"end":{"line":5,"column":7}},"range":[46,51],"raw":" ä¿¡å·é‡æœº"}],"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":7}},"range":[44,51],"raw":"\n# ä¿¡å·é‡æœº"},{"type":"Paragraph","children":[{"type":"Str","value":"è¿›ç¨‹äº’æ–¥çš„å››ç§è½¯ä»¶å®ç°æ–¹å¼ï¼ˆå•æ ‡å¿—æ³•ã€åŒæ ‡å¿—æ³•ã€åŒæ ‡å¿—åæ£€æŸ¥æ³•ã€Petersonç®—æ³•ï¼‰å’Œä¸‰ç§ç¡¬ä»¶å®ç°æ–¹å¼ï¼ˆä¸­æ–­å±è”½ã€TSLæŒ‡ä»¤å’ŒSWAPæŒ‡ä»¤ï¼‰ã€‚","loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":72}},"range":[53,125],"raw":"\nè¿›ç¨‹äº’æ–¥çš„å››ç§è½¯ä»¶å®ç°æ–¹å¼ï¼ˆå•æ ‡å¿—æ³•ã€åŒæ ‡å¿—æ³•ã€åŒæ ‡å¿—åæ£€æŸ¥æ³•ã€Petersonç®—æ³•ï¼‰å’Œä¸‰ç§ç¡¬ä»¶å®ç°æ–¹å¼ï¼ˆä¸­æ–­å±è”½ã€TSLæŒ‡ä»¤å’ŒSWAPæŒ‡ä»¤ï¼‰"}],"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":72}},"range":[53,125],"raw":"\nè¿›ç¨‹äº’æ–¥çš„å››ç§è½¯ä»¶å®ç°æ–¹å¼ï¼ˆå•æ ‡å¿—æ³•ã€åŒæ ‡å¿—æ³•ã€åŒæ ‡å¿—åæ£€æŸ¥æ³•ã€Petersonç®—æ³•ï¼‰å’Œä¸‰ç§ç¡¬ä»¶å®ç°æ–¹å¼ï¼ˆä¸­æ–­å±è”½ã€TSLæŒ‡ä»¤å’ŒSWAPæŒ‡ä»¤ï¼‰"},{"type":"Paragraph","children":[{"type":"Str","value":"ä»¥ä¸Šçš„æ‰€æœ‰æ–¹å¼éƒ½æ²¡æœ‰éµå¾ªâ€œè®©æƒç­‰å¾…â€åŸåˆ™ï¼Œåœ¨æ— æ³•è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œä¹Ÿä¸ä¼šæŠŠCPUèµ„æºè®©ç»™å…¶ä»–è¿›ç¨‹ã€‚","loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":47}},"range":[127,174],"raw":"\nä»¥ä¸Šçš„æ‰€æœ‰æ–¹å¼éƒ½æ²¡æœ‰éµå¾ªâ€œè®©æƒç­‰å¾…â€åŸåˆ™ï¼Œåœ¨æ— æ³•è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œä¹Ÿä¸ä¼šæŠŠCPUèµ„æºè®©ç»™å…¶ä»–è¿›ç¨‹"}],"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":47}},"range":[127,174],"raw":"\nä»¥ä¸Šçš„æ‰€æœ‰æ–¹å¼éƒ½æ²¡æœ‰éµå¾ªâ€œè®©æƒç­‰å¾…â€åŸåˆ™ï¼Œåœ¨æ— æ³•è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œä¹Ÿä¸ä¼šæŠŠCPUèµ„æºè®©ç»™å…¶ä»–è¿›ç¨‹"},{"type":"List","ordered":false,"start":null,"spread":false,"children":[{"type":"ListItem","spread":true,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"ä¿¡å·é‡æœºåˆ¶ï¼šç”¨æˆ·è¿›ç¨‹å¯ä»¥é€šè¿‡","loc":{"start":{"line":11,"column":2},"end":{"line":11,"column":16}},"range":[178,192],"raw":" ä¿¡å·é‡æœºåˆ¶ï¼šç”¨æˆ·è¿›ç¨‹å¯ä»¥é€š"},{"type":"Strong","children":[{"type":"Str","value":"æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€å¯¹åŸè¯­","loc":{"start":{"line":11,"column":18},"end":{"line":11,"column":29}},"range":[194,205],"raw":"*æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€å¯¹åŸ"}],"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":31}},"range":[192,207],"raw":"è¿‡**æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€å¯¹åŸè¯­*"},{"type":"Str","value":"ï¼Œæ¥å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œï¼Œæ–¹ä¾¿åœ°å®ç°äº†è¿›ç¨‹ä¹‹é—´åœ°äº’æ–¥å’ŒåŒæ­¥ã€‚","loc":{"start":{"line":11,"column":31},"end":{"line":11,"column":59}},"range":[207,235],"raw":"*ï¼Œæ¥å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œï¼Œæ–¹ä¾¿åœ°å®ç°äº†è¿›ç¨‹ä¹‹é—´åœ°äº’æ–¥å’ŒåŒæ­¥"}],"loc":{"start":{"line":11,"column":2},"end":{"line":11,"column":59}},"range":[178,235],"raw":" ä¿¡å·é‡æœºåˆ¶ï¼šç”¨æˆ·è¿›ç¨‹å¯ä»¥é€šè¿‡**æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€å¯¹åŸè¯­**ï¼Œæ¥å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œï¼Œæ–¹ä¾¿åœ°å®ç°äº†è¿›ç¨‹ä¹‹é—´åœ°äº’æ–¥å’ŒåŒæ­¥"},{"type":"Paragraph","children":[{"type":"Str","value":"ä¿¡å·é‡å…¶å®æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªä¿¡å·é‡æ¥æè¿°ç³»ç»Ÿä¸­æŸç§èµ„æºåœ°æ•°é‡ï¼ˆæ¯”å¦‚ä¸€å°æ‰“å°æœºå°±å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå€¼ä¸º1åœ°ä¿¡å·é‡ï¼‰ã€‚","loc":{"start":{"line":13,"column":2},"end":{"line":13,"column":59}},"range":[239,296],"raw":" ä¿¡å·é‡å…¶å®æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªä¿¡å·é‡æ¥æè¿°ç³»ç»Ÿä¸­æŸç§èµ„æºåœ°æ•°é‡ï¼ˆæ¯”å¦‚ä¸€å°æ‰“å°æœºå°±å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå€¼ä¸º1åœ°ä¿¡å·é‡ï¼‰"}],"loc":{"start":{"line":13,"column":2},"end":{"line":13,"column":59}},"range":[239,296],"raw":" ä¿¡å·é‡å…¶å®æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªä¿¡å·é‡æ¥æè¿°ç³»ç»Ÿä¸­æŸç§èµ„æºåœ°æ•°é‡ï¼ˆæ¯”å¦‚ä¸€å°æ‰“å°æœºå°±å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå€¼ä¸º1åœ°ä¿¡å·é‡ï¼‰"}],"loc":{"start":{"line":11,"column":0},"end":{"line":13,"column":59}},"range":[176,296],"raw":"\n- ä¿¡å·é‡æœºåˆ¶ï¼šç”¨æˆ·è¿›ç¨‹å¯ä»¥é€šè¿‡**æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€å¯¹åŸè¯­**ï¼Œæ¥å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œï¼Œæ–¹ä¾¿åœ°å®ç°äº†è¿›ç¨‹ä¹‹é—´åœ°äº’æ–¥å’ŒåŒæ­¥ã€‚\n\n  ä¿¡å·é‡å…¶å®æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªä¿¡å·é‡æ¥æè¿°ç³»ç»Ÿä¸­æŸç§èµ„æºåœ°æ•°é‡ï¼ˆæ¯”å¦‚ä¸€å°æ‰“å°æœºå°±å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå€¼ä¸º1åœ°ä¿¡å·é‡ï¼‰"}],"loc":{"start":{"line":11,"column":0},"end":{"line":13,"column":59}},"range":[176,296],"raw":"\n- ä¿¡å·é‡æœºåˆ¶ï¼šç”¨æˆ·è¿›ç¨‹å¯ä»¥é€šè¿‡**æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€å¯¹åŸè¯­**ï¼Œæ¥å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œï¼Œæ–¹ä¾¿åœ°å®ç°äº†è¿›ç¨‹ä¹‹é—´åœ°äº’æ–¥å’ŒåŒæ­¥ã€‚\n\n  ä¿¡å·é‡å…¶å®æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªä¿¡å·é‡æ¥æè¿°ç³»ç»Ÿä¸­æŸç§èµ„æºåœ°æ•°é‡ï¼ˆæ¯”å¦‚ä¸€å°æ‰“å°æœºå°±å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå€¼ä¸º1åœ°ä¿¡å·é‡ï¼‰"},{"type":"Paragraph","children":[{"type":"Str","value":"wait(S)åŸè¯­å’Œsignal(S)åŸè¯­ï¼Œä¸¤ä¸ªæ“ä½œå¯ä»¥åˆ†åˆ«å†™ä¸ºP(S)å’ŒV(s)ã€‚","loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":42}},"range":[298,340],"raw":"\nwait(S)åŸè¯­å’Œsignal(S)åŸè¯­ï¼Œä¸¤ä¸ªæ“ä½œå¯ä»¥åˆ†åˆ«å†™ä¸ºP(S)å’ŒV(s)"}],"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":42}},"range":[298,340],"raw":"\nwait(S)åŸè¯­å’Œsignal(S)åŸè¯­ï¼Œä¸¤ä¸ªæ“ä½œå¯ä»¥åˆ†åˆ«å†™ä¸ºP(S)å’ŒV(s)"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"æ•´å‹ä¿¡å·é‡","loc":{"start":{"line":17,"column":3},"end":{"line":17,"column":8}},"range":[345,350],"raw":" æ•´å‹ä¿¡å·"}],"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":8}},"range":[342,350],"raw":"\n## æ•´å‹ä¿¡å·"},{"type":"Paragraph","children":[{"type":"Str","value":"ç”¨ä¸€ä¸ªæ•´æ•°æ¥è¡¨ç¤ºç³»ç»ŸæŸç§èµ„æºçš„æ•°é‡ã€‚","loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":18}},"range":[352,370],"raw":"\nç”¨ä¸€ä¸ªæ•´æ•°æ¥è¡¨ç¤ºç³»ç»ŸæŸç§èµ„æºçš„æ•°é‡"}],"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":18}},"range":[352,370],"raw":"\nç”¨ä¸€ä¸ªæ•´æ•°æ¥è¡¨ç¤ºç³»ç»ŸæŸç§èµ„æºçš„æ•°é‡"},{"type":"Paragraph","children":[{"type":"Str","value":"ä¸æ™®é€šçš„æ•´å‹å˜é‡ç›¸æ¯”ï¼Œæ•´å‹ä¿¡å·é‡åªèƒ½è¿›è¡Œåˆå§‹åŒ–ã€Pæ“ä½œå’ŒVæ“ä½œã€‚","loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":32}},"range":[372,404],"raw":"\nä¸æ™®é€šçš„æ•´å‹å˜é‡ç›¸æ¯”ï¼Œæ•´å‹ä¿¡å·é‡åªèƒ½è¿›è¡Œåˆå§‹åŒ–ã€Pæ“ä½œå’ŒVæ“ä½œ"}],"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":32}},"range":[372,404],"raw":"\nä¸æ™®é€šçš„æ•´å‹å˜é‡ç›¸æ¯”ï¼Œæ•´å‹ä¿¡å·é‡åªèƒ½è¿›è¡Œåˆå§‹åŒ–ã€Pæ“ä½œå’ŒVæ“ä½œ"},{"type":"CodeBlock","lang":"c","meta":null,"value":"int S=1; // ç³»ç»Ÿä¸­æŸç§èµ„æºæ•°\n\n// waitåŸè¯­çš„é€»è¾‘\nvoid wait(int S){\n    while(S<=0);\n    S--;\n}\n// signalåŸè¯­çš„é€»è¾‘\nvoid signal(int S){\n    S++;\n}\n\n// ä½¿ç”¨ä¿¡å·é‡çš„é€»è¾‘\n// è¿›ç¨‹P0\nwait(S); // è¿›å…¥åŒº\n// ä¸´ç•ŒåŒºä»£ç \nsignal(S); // é€€å‡ºåŒº","loc":{"start":{"line":23,"column":0},"end":{"line":41,"column":3}},"range":[406,605],"raw":"\n```c\nint S=1; // ç³»ç»Ÿä¸­æŸç§èµ„æºæ•°\n\n// waitåŸè¯­çš„é€»è¾‘\nvoid wait(int S){\n    while(S<=0);\n    S--;\n}\n// signalåŸè¯­çš„é€»è¾‘\nvoid signal(int S){\n    S++;\n}\n\n// ä½¿ç”¨ä¿¡å·é‡çš„é€»è¾‘\n// è¿›ç¨‹P0\nwait(S); // è¿›å…¥åŒº\n// ä¸´ç•ŒåŒºä»£ç \nsignal(S); // é€€å‡ºåŒº\n``"},{"type":"Paragraph","children":[{"type":"Str","value":"ç¼ºç‚¹ï¼šä¸æ»¡è¶³â€œè®©æƒç­‰å¾…â€åŸåˆ™","loc":{"start":{"line":43,"column":1},"end":{"line":43,"column":15}},"range":[608,622],"raw":" ç¼ºç‚¹ï¼šä¸æ»¡è¶³â€œè®©æƒç­‰å¾…â€åŸ"}],"loc":{"start":{"line":43,"column":1},"end":{"line":43,"column":15}},"range":[608,622],"raw":" ç¼ºç‚¹ï¼šä¸æ»¡è¶³â€œè®©æƒç­‰å¾…â€åŸ"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"è®°å½•å‹ä¿¡å·é‡","loc":{"start":{"line":45,"column":3},"end":{"line":45,"column":9}},"range":[627,633],"raw":" è®°å½•å‹ä¿¡å·"}],"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":9}},"range":[624,633],"raw":"\n## è®°å½•å‹ä¿¡å·"},{"type":"Paragraph","children":[{"type":"Str","value":"ç”¨è®°å½•å‹æ•°æ®è§£é›‡è¡¨ç¤ºä¿¡å·é‡ï¼Œå¯ä»¥è§£å†³æ•´å‹ä¿¡å·é‡å­˜åœ¨çš„â€œå¿™ç­‰â€çš„é—®é¢˜ã€‚","loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":34}},"range":[635,669],"raw":"\nç”¨è®°å½•å‹æ•°æ®è§£é›‡è¡¨ç¤ºä¿¡å·é‡ï¼Œå¯ä»¥è§£å†³æ•´å‹ä¿¡å·é‡å­˜åœ¨çš„â€œå¿™ç­‰â€çš„é—®é¢˜"}],"loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":34}},"range":[635,669],"raw":"\nç”¨è®°å½•å‹æ•°æ®è§£é›‡è¡¨ç¤ºä¿¡å·é‡ï¼Œå¯ä»¥è§£å†³æ•´å‹ä¿¡å·é‡å­˜åœ¨çš„â€œå¿™ç­‰â€çš„é—®é¢˜"},{"type":"CodeBlock","lang":"c","meta":null,"value":"//è®°å½•å‹ä¿¡å·é‡\ntypedef struct {\n    int value;\t// å‰©ä½™èµ„æºæ•°\n    struct process *L; // ç­‰å¾…çš„èµ„æº\n} semphore;\n// waitåŸè¯­\nvoid wait(semaphore S){\n    S.value --;\n    if(S.value < 0) block(S.L); // å‰©ä½™çš„èµ„æºæ•°ä¸å¤Ÿï¼Œä½¿ç”¨blockåŸè¯­æŠŠå½“å‰çš„è¿›ç¨‹é˜»å¡\n}\nvoid signal(semaphore S){\n    s.value++;\n    if(S.value <= 0) wakeup(S.L); // è¯´æ˜åœ¨é‡Šæ”¾èµ„æºä¹‹å‰ï¼Œè¿˜æœ‰è¿›ç¨‹åœ¨ç­‰å¾…ä½¿ç”¨è¿™ä¸ªèµ„æº\n}","loc":{"start":{"line":49,"column":0},"end":{"line":64,"column":3}},"range":[671,991],"raw":"\n```c\n//è®°å½•å‹ä¿¡å·é‡\ntypedef struct {\n    int value;\t// å‰©ä½™èµ„æºæ•°\n    struct process *L; // ç­‰å¾…çš„èµ„æº\n} semphore;\n// waitåŸè¯­\nvoid wait(semaphore S){\n    S.value --;\n    if(S.value < 0) block(S.L); // å‰©ä½™çš„èµ„æºæ•°ä¸å¤Ÿï¼Œä½¿ç”¨blockåŸè¯­æŠŠå½“å‰çš„è¿›ç¨‹é˜»å¡\n}\nvoid signal(semaphore S){\n    s.value++;\n    if(S.value <= 0) wakeup(S.L); // è¯´æ˜åœ¨é‡Šæ”¾èµ„æºä¹‹å‰ï¼Œè¿˜æœ‰è¿›ç¨‹åœ¨ç­‰å¾…ä½¿ç”¨è¿™ä¸ªèµ„æº\n}\n``"},{"type":"Paragraph","children":[{"type":"Str","value":"ä¼˜ç‚¹ï¼šéµå¾ªäº†â€œè®©æƒç­‰å¾…â€åŸåˆ™","loc":{"start":{"line":66,"column":0},"end":{"line":66,"column":14}},"range":[993,1007],"raw":"\nä¼˜ç‚¹ï¼šéµå¾ªäº†â€œè®©æƒç­‰å¾…â€åŸ"}],"loc":{"start":{"line":66,"column":0},"end":{"line":66,"column":14}},"range":[993,1007],"raw":"\nä¼˜ç‚¹ï¼šéµå¾ªäº†â€œè®©æƒç­‰å¾…â€åŸ"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"ä¿¡å·é‡è¿›åˆ¶å®ç°è¿›ç¨‹äº’æ–¥","loc":{"start":{"line":68,"column":3},"end":{"line":68,"column":14}},"range":[1012,1023],"raw":" ä¿¡å·é‡è¿›åˆ¶å®ç°è¿›ç¨‹äº’"}],"loc":{"start":{"line":68,"column":0},"end":{"line":68,"column":14}},"range":[1009,1023],"raw":"\n## ä¿¡å·é‡è¿›åˆ¶å®ç°è¿›ç¨‹äº’"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"åˆ†æå¹¶å‘è¿›ç¨‹çš„å…³é”®æ´»åŠ¨ã€åˆ’å®šä¸´ç•ŒåŒº","loc":{"start":{"line":70,"column":3},"end":{"line":70,"column":20}},"range":[1028,1045],"raw":" åˆ†æå¹¶å‘è¿›ç¨‹çš„å…³é”®æ´»åŠ¨ã€åˆ’å®šä¸´ç•Œ"}],"loc":{"start":{"line":70,"column":3},"end":{"line":70,"column":20}},"range":[1028,1045],"raw":" åˆ†æå¹¶å‘è¿›ç¨‹çš„å…³é”®æ´»åŠ¨ã€åˆ’å®šä¸´ç•Œ"}],"loc":{"start":{"line":70,"column":0},"end":{"line":70,"column":20}},"range":[1025,1045],"raw":"\n1. åˆ†æå¹¶å‘è¿›ç¨‹çš„å…³é”®æ´»åŠ¨ã€åˆ’å®šä¸´ç•Œ"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"è®¾ç½®äº’æ–¥ä¿¡å·é‡mutexï¼Œåˆå§‹å€¼ä¸º1","loc":{"start":{"line":71,"column":3},"end":{"line":71,"column":21}},"range":[1049,1067],"raw":" è®¾ç½®äº’æ–¥ä¿¡å·é‡mutexï¼Œåˆå§‹å€¼ä¸º"}],"loc":{"start":{"line":71,"column":3},"end":{"line":71,"column":21}},"range":[1049,1067],"raw":" è®¾ç½®äº’æ–¥ä¿¡å·é‡mutexï¼Œåˆå§‹å€¼ä¸º"}],"loc":{"start":{"line":71,"column":0},"end":{"line":71,"column":21}},"range":[1046,1067],"raw":"\n2. è®¾ç½®äº’æ–¥ä¿¡å·é‡mutexï¼Œåˆå§‹å€¼ä¸º"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"åœ¨ä¸´ç•ŒåŒºä¹‹å‰å¯¹ä¿¡å·é‡mutexæ‰§è¡ŒPæ“ä½œ","loc":{"start":{"line":72,"column":3},"end":{"line":72,"column":23}},"range":[1071,1091],"raw":" åœ¨ä¸´ç•ŒåŒºä¹‹å‰å¯¹ä¿¡å·é‡mutexæ‰§è¡ŒPæ“"}],"loc":{"start":{"line":72,"column":3},"end":{"line":72,"column":23}},"range":[1071,1091],"raw":" åœ¨ä¸´ç•ŒåŒºä¹‹å‰å¯¹ä¿¡å·é‡mutexæ‰§è¡ŒPæ“"}],"loc":{"start":{"line":72,"column":0},"end":{"line":72,"column":23}},"range":[1068,1091],"raw":"\n3. åœ¨ä¸´ç•ŒåŒºä¹‹å‰å¯¹ä¿¡å·é‡mutexæ‰§è¡ŒPæ“"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"åœ¨ä¸´ç•ŒåŒºä¹‹åå¯¹ä¿¡å·é‡mutexæ‰§è¡ŒVæ“ä½œ","loc":{"start":{"line":73,"column":3},"end":{"line":73,"column":23}},"range":[1095,1115],"raw":" åœ¨ä¸´ç•ŒåŒºä¹‹åå¯¹ä¿¡å·é‡mutexæ‰§è¡ŒVæ“"}],"loc":{"start":{"line":73,"column":3},"end":{"line":73,"column":23}},"range":[1095,1115],"raw":" åœ¨ä¸´ç•ŒåŒºä¹‹åå¯¹ä¿¡å·é‡mutexæ‰§è¡ŒVæ“"}],"loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":23}},"range":[1092,1115],"raw":"\n4. åœ¨ä¸´ç•ŒåŒºä¹‹åå¯¹ä¿¡å·é‡mutexæ‰§è¡ŒVæ“"}],"loc":{"start":{"line":70,"column":0},"end":{"line":73,"column":23}},"range":[1025,1115],"raw":"\n1. åˆ†æå¹¶å‘è¿›ç¨‹çš„å…³é”®æ´»åŠ¨ã€åˆ’å®šä¸´ç•ŒåŒº\n2. è®¾ç½®äº’æ–¥ä¿¡å·é‡mutexï¼Œåˆå§‹å€¼ä¸º1\n3. åœ¨ä¸´ç•ŒåŒºä¹‹å‰å¯¹ä¿¡å·é‡mutexæ‰§è¡ŒPæ“ä½œ\n4. åœ¨ä¸´ç•ŒåŒºä¹‹åå¯¹ä¿¡å·é‡mutexæ‰§è¡ŒVæ“"},{"type":"Paragraph","children":[{"type":"Str","value":"å¯¹äºä¸åŒçš„ä¸´ç•Œèµ„æºï¼Œéœ€è¦è®¾ç½®","loc":{"start":{"line":75,"column":0},"end":{"line":75,"column":14}},"range":[1117,1131],"raw":"\nå¯¹äºä¸åŒçš„ä¸´ç•Œèµ„æºï¼Œéœ€è¦è®¾"},{"type":"Strong","children":[{"type":"Str","value":"ä¸åŒçš„äº’æ–¥ä¿¡å·é‡","loc":{"start":{"line":75,"column":16},"end":{"line":75,"column":24}},"range":[1133,1141],"raw":"*ä¸åŒçš„äº’æ–¥ä¿¡å·"}],"loc":{"start":{"line":75,"column":14},"end":{"line":75,"column":26}},"range":[1131,1143],"raw":"ç½®**ä¸åŒçš„äº’æ–¥ä¿¡å·é‡*"}],"loc":{"start":{"line":75,"column":0},"end":{"line":75,"column":26}},"range":[1117,1143],"raw":"\nå¯¹äºä¸åŒçš„ä¸´ç•Œèµ„æºï¼Œéœ€è¦è®¾ç½®**ä¸åŒçš„äº’æ–¥ä¿¡å·é‡*"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹åŒæ­¥","loc":{"start":{"line":77,"column":3},"end":{"line":77,"column":14}},"range":[1148,1159],"raw":" ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹åŒ"}],"loc":{"start":{"line":77,"column":0},"end":{"line":77,"column":14}},"range":[1145,1159],"raw":"\n## ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹åŒ"},{"type":"Paragraph","children":[{"type":"Str","value":"è¿›ç¨‹åŒæ­¥ï¼šè®©å„ä¸ªè¿›ç¨‹æœ‰åºåœ°æ¨è¿›","loc":{"start":{"line":79,"column":0},"end":{"line":79,"column":15}},"range":[1161,1176],"raw":"\nè¿›ç¨‹åŒæ­¥ï¼šè®©å„ä¸ªè¿›ç¨‹æœ‰åºåœ°æ¨"}],"loc":{"start":{"line":79,"column":0},"end":{"line":79,"column":15}},"range":[1161,1176],"raw":"\nè¿›ç¨‹åŒæ­¥ï¼šè®©å„ä¸ªè¿›ç¨‹æœ‰åºåœ°æ¨"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"åˆ†æéœ€è¦å®ç°åŒæ­¥å…³ç³»çš„ä½ç½®","loc":{"start":{"line":81,"column":3},"end":{"line":81,"column":16}},"range":[1181,1194],"raw":" åˆ†æéœ€è¦å®ç°åŒæ­¥å…³ç³»çš„ä½"}],"loc":{"start":{"line":81,"column":3},"end":{"line":81,"column":16}},"range":[1181,1194],"raw":" åˆ†æéœ€è¦å®ç°åŒæ­¥å…³ç³»çš„ä½"}],"loc":{"start":{"line":81,"column":0},"end":{"line":81,"column":16}},"range":[1178,1194],"raw":"\n1. åˆ†æéœ€è¦å®ç°åŒæ­¥å…³ç³»çš„ä½"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"è®¾ç½®åŒæ­¥ä¿¡å·é‡Sï¼Œåˆå§‹å€¼ä¸º0","loc":{"start":{"line":82,"column":3},"end":{"line":82,"column":17}},"range":[1198,1212],"raw":" è®¾ç½®åŒæ­¥ä¿¡å·é‡Sï¼Œåˆå§‹å€¼ä¸º"}],"loc":{"start":{"line":82,"column":3},"end":{"line":82,"column":17}},"range":[1198,1212],"raw":" è®¾ç½®åŒæ­¥ä¿¡å·é‡Sï¼Œåˆå§‹å€¼ä¸º"}],"loc":{"start":{"line":82,"column":0},"end":{"line":82,"column":17}},"range":[1195,1212],"raw":"\n2. è®¾ç½®åŒæ­¥ä¿¡å·é‡Sï¼Œåˆå§‹å€¼ä¸º"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"åœ¨â€œå‰æ“ä½œâ€ä¹‹åæ‰§è¡ŒVæ“ä½œï¼ˆå‰æ“ä½œæ‰§è¡Œå®Œæˆï¼Œå”¤é†’åæ“ä½œï¼‰","loc":{"start":{"line":83,"column":3},"end":{"line":83,"column":31}},"range":[1216,1244],"raw":" åœ¨â€œå‰æ“ä½œâ€ä¹‹åæ‰§è¡ŒVæ“ä½œï¼ˆå‰æ“ä½œæ‰§è¡Œå®Œæˆï¼Œå”¤é†’åæ“ä½œ"}],"loc":{"start":{"line":83,"column":3},"end":{"line":83,"column":31}},"range":[1216,1244],"raw":" åœ¨â€œå‰æ“ä½œâ€ä¹‹åæ‰§è¡ŒVæ“ä½œï¼ˆå‰æ“ä½œæ‰§è¡Œå®Œæˆï¼Œå”¤é†’åæ“ä½œ"}],"loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":31}},"range":[1213,1244],"raw":"\n3. åœ¨â€œå‰æ“ä½œâ€ä¹‹åæ‰§è¡ŒVæ“ä½œï¼ˆå‰æ“ä½œæ‰§è¡Œå®Œæˆï¼Œå”¤é†’åæ“ä½œ"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"åœ¨â€œåæ“ä½œâ€ä¹‹å‰æ‰§è¡ŒPæ“ä½œï¼ˆå‰æ“ä½œè¿˜æœªæ‰§è¡Œå°±ä¼šå°†åæ“ä½œé˜»å¡ï¼‰","loc":{"start":{"line":84,"column":3},"end":{"line":84,"column":33}},"range":[1248,1278],"raw":" åœ¨â€œåæ“ä½œâ€ä¹‹å‰æ‰§è¡ŒPæ“ä½œï¼ˆå‰æ“ä½œè¿˜æœªæ‰§è¡Œå°±ä¼šå°†åæ“ä½œé˜»å¡"}],"loc":{"start":{"line":84,"column":3},"end":{"line":84,"column":33}},"range":[1248,1278],"raw":" åœ¨â€œåæ“ä½œâ€ä¹‹å‰æ‰§è¡ŒPæ“ä½œï¼ˆå‰æ“ä½œè¿˜æœªæ‰§è¡Œå°±ä¼šå°†åæ“ä½œé˜»å¡"}],"loc":{"start":{"line":84,"column":0},"end":{"line":84,"column":33}},"range":[1245,1278],"raw":"\n4. åœ¨â€œåæ“ä½œâ€ä¹‹å‰æ‰§è¡ŒPæ“ä½œï¼ˆå‰æ“ä½œè¿˜æœªæ‰§è¡Œå°±ä¼šå°†åæ“ä½œé˜»å¡"}],"loc":{"start":{"line":81,"column":0},"end":{"line":84,"column":33}},"range":[1178,1278],"raw":"\n1. åˆ†æéœ€è¦å®ç°åŒæ­¥å…³ç³»çš„ä½ç½®\n2. è®¾ç½®åŒæ­¥ä¿¡å·é‡Sï¼Œåˆå§‹å€¼ä¸º0\n3. åœ¨â€œå‰æ“ä½œâ€ä¹‹åæ‰§è¡ŒVæ“ä½œï¼ˆå‰æ“ä½œæ‰§è¡Œå®Œæˆï¼Œå”¤é†’åæ“ä½œï¼‰\n4. åœ¨â€œåæ“ä½œâ€ä¹‹å‰æ‰§è¡ŒPæ“ä½œï¼ˆå‰æ“ä½œè¿˜æœªæ‰§è¡Œå°±ä¼šå°†åæ“ä½œé˜»å¡"},{"type":"CodeBlock","lang":"c","meta":null,"value":"semaphore S=0;\n\n// å‰æ“ä½œ\nP1(){\n    // å‰æ“ä½œä»£ç \n    V(S); // signalåŸè¯­ï¼Œå”¤é†’åæ“ä½œè¿›ç¨‹\n    // å‰©ä½™ä»£ç \n}\n\n// åæ“ä½œ\nP2(){\n    P(S); // waitåŸè¯­ï¼Œæ£€æŸ¥å‰æ“ä½œæ˜¯å¦å®Œæˆäº†\n    // åæ“ä½œä»£ç \n   \t// å‰©ä½™ä»£ç \n}","loc":{"start":{"line":86,"column":0},"end":{"line":102,"column":3}},"range":[1280,1446],"raw":"\n```c\nsemaphore S=0;\n\n// å‰æ“ä½œ\nP1(){\n    // å‰æ“ä½œä»£ç \n    V(S); // signalåŸè¯­ï¼Œå”¤é†’åæ“ä½œè¿›ç¨‹\n    // å‰©ä½™ä»£ç \n}\n\n// åæ“ä½œ\nP2(){\n    P(S); // waitåŸè¯­ï¼Œæ£€æŸ¥å‰æ“ä½œæ˜¯å¦å®Œæˆäº†\n    // åæ“ä½œä»£ç \n   \t// å‰©ä½™ä»£ç \n}\n``"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹çš„å‰é©±å…³ç³»","loc":{"start":{"line":104,"column":3},"end":{"line":104,"column":17}},"range":[1451,1465],"raw":" ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹çš„å‰é©±å…³"}],"loc":{"start":{"line":104,"column":0},"end":{"line":104,"column":17}},"range":[1448,1465],"raw":"\n## ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹çš„å‰é©±å…³"},{"type":"Paragraph","children":[{"type":"Image","title":null,"url":"https://i.loli.net/2020/08/14/61DyjLnH9xqXtP2.png","alt":"quicker_283a6535-3b5b-4f96-a2ae-42da1a3153bd.png","loc":{"start":{"line":106,"column":0},"end":{"line":106,"column":102}},"range":[1467,1569],"raw":"\n![quicker_283a6535-3b5b-4f96-a2ae-42da1a3153bd.png](https://i.loli.net/2020/08/14/61DyjLnH9xqXtP2.png"}],"loc":{"start":{"line":106,"column":0},"end":{"line":106,"column":102}},"range":[1467,1569],"raw":"\n![quicker_283a6535-3b5b-4f96-a2ae-42da1a3153bd.png](https://i.loli.net/2020/08/14/61DyjLnH9xqXtP2.png"},{"type":"Paragraph","children":[{"type":"Str","value":"å„ä¸ªè¿›ç¨‹è¦æŒ‰ç…§å¦‚ä¸Šå›¾æ‰€ç¤ºçš„é¡ºåºæ¥æ‰§è¡Œã€‚å…¶ä¸­æ¯ä¸€å¯¹å‰é©±å…³ç³»éƒ½æ˜¯ä¸€ç§è¿›ç¨‹åŒæ­¥å…³ç³»ï¼Œæ‰€ä»¥ï¼š","loc":{"start":{"line":108,"column":0},"end":{"line":108,"column":42}},"range":[1571,1613],"raw":"\nå„ä¸ªè¿›ç¨‹è¦æŒ‰ç…§å¦‚ä¸Šå›¾æ‰€ç¤ºçš„é¡ºåºæ¥æ‰§è¡Œã€‚å…¶ä¸­æ¯ä¸€å¯¹å‰é©±å…³ç³»éƒ½æ˜¯ä¸€ç§è¿›ç¨‹åŒæ­¥å…³ç³»ï¼Œæ‰€ä»¥"}],"loc":{"start":{"line":108,"column":0},"end":{"line":108,"column":42}},"range":[1571,1613],"raw":"\nå„ä¸ªè¿›ç¨‹è¦æŒ‰ç…§å¦‚ä¸Šå›¾æ‰€ç¤ºçš„é¡ºåºæ¥æ‰§è¡Œã€‚å…¶ä¸­æ¯ä¸€å¯¹å‰é©±å…³ç³»éƒ½æ˜¯ä¸€ç§è¿›ç¨‹åŒæ­¥å…³ç³»ï¼Œæ‰€ä»¥"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"ä¸ºæ¯ä¸€å¯¹å‰é©±å…³ç³»å„è®¾ç½®ä¸€ä¸ªåŒæ­¥ä¿¡å·é‡","loc":{"start":{"line":110,"column":3},"end":{"line":110,"column":21}},"range":[1618,1636],"raw":" ä¸ºæ¯ä¸€å¯¹å‰é©±å…³ç³»å„è®¾ç½®ä¸€ä¸ªåŒæ­¥ä¿¡å·"}],"loc":{"start":{"line":110,"column":3},"end":{"line":110,"column":21}},"range":[1618,1636],"raw":" ä¸ºæ¯ä¸€å¯¹å‰é©±å…³ç³»å„è®¾ç½®ä¸€ä¸ªåŒæ­¥ä¿¡å·"}],"loc":{"start":{"line":110,"column":0},"end":{"line":110,"column":21}},"range":[1615,1636],"raw":"\n1. ä¸ºæ¯ä¸€å¯¹å‰é©±å…³ç³»å„è®¾ç½®ä¸€ä¸ªåŒæ­¥ä¿¡å·"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"åœ¨â€œå‰æ“ä½œâ€ä¹‹åå¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒVæ“ä½œ","loc":{"start":{"line":111,"column":3},"end":{"line":111,"column":25}},"range":[1640,1662],"raw":" åœ¨â€œå‰æ“ä½œâ€ä¹‹åå¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒVæ“"}],"loc":{"start":{"line":111,"column":3},"end":{"line":111,"column":25}},"range":[1640,1662],"raw":" åœ¨â€œå‰æ“ä½œâ€ä¹‹åå¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒVæ“"}],"loc":{"start":{"line":111,"column":0},"end":{"line":111,"column":25}},"range":[1637,1662],"raw":"\n2. åœ¨â€œå‰æ“ä½œâ€ä¹‹åå¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒVæ“"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"åœ¨â€œåæ“ä½œâ€ä¹‹å‰å¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒPæ“ä½œ","loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":25}},"range":[1666,1688],"raw":" åœ¨â€œåæ“ä½œâ€ä¹‹å‰å¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒPæ“"}],"loc":{"start":{"line":112,"column":3},"end":{"line":112,"column":25}},"range":[1666,1688],"raw":" åœ¨â€œåæ“ä½œâ€ä¹‹å‰å¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒPæ“"}],"loc":{"start":{"line":112,"column":0},"end":{"line":112,"column":25}},"range":[1663,1688],"raw":"\n3. åœ¨â€œåæ“ä½œâ€ä¹‹å‰å¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒPæ“"}],"loc":{"start":{"line":110,"column":0},"end":{"line":112,"column":25}},"range":[1615,1688],"raw":"\n1. ä¸ºæ¯ä¸€å¯¹å‰é©±å…³ç³»å„è®¾ç½®ä¸€ä¸ªåŒæ­¥ä¿¡å·é‡\n2. åœ¨â€œå‰æ“ä½œâ€ä¹‹åå¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒVæ“ä½œ\n3. åœ¨â€œåæ“ä½œâ€ä¹‹å‰å¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒPæ“"},{"type":"CodeBlock","lang":"c","meta":null,"value":"// å®šä¹‰ä¿¡å·é‡\nsemaphore s1s2 = 0;\nsemaphore s1s3 = 0;\nsemaphore s2s4 = 0;\nsemaphore s2s5 = 0;\nsemaphore s3s6 = 0;\nsemaphore s4s6 = 0;\nsemaphore s5s6 = 0;\n\nP1(){\n    S1;\n    V(s1s2);\n    V(s1s3);\n}\nP2(){\n    P(s1s2);\n    S2;\n    V(s2s4);\n    V(s2s5);\n}\nP3(){\n    P(s1s3);\n    S3;\n    V(s3s6);\n}\nP4(){\n    P(s2s4);\n    S4;\n    V(s4s6);\n}\nP5(){\n    P(s2s5);\n    S5;\n    V(s5s6);\n}\nP6(){\n    P(s5s6);\n    P(s3s6);\n    P(s4s6);\n    S6;\n}","loc":{"start":{"line":114,"column":0},"end":{"line":156,"column":3}},"range":[1690,2126],"raw":"\n```c\n// å®šä¹‰ä¿¡å·é‡\nsemaphore s1s2 = 0;\nsemaphore s1s3 = 0;\nsemaphore s2s4 = 0;\nsemaphore s2s5 = 0;\nsemaphore s3s6 = 0;\nsemaphore s4s6 = 0;\nsemaphore s5s6 = 0;\n\nP1(){\n    S1;\n    V(s1s2);\n    V(s1s3);\n}\nP2(){\n    P(s1s2);\n    S2;\n    V(s2s4);\n    V(s2s5);\n}\nP3(){\n    P(s1s3);\n    S3;\n    V(s3s6);\n}\nP4(){\n    P(s2s4);\n    S4;\n    V(s4s6);\n}\nP5(){\n    P(s2s5);\n    S5;\n    V(s5s6);\n}\nP6(){\n    P(s5s6);\n    P(s3s6);\n    P(s4s6);\n    S6;\n}\n``"}],"loc":{"start":{"line":1,"column":0},"end":{"line":158,"column":0}},"range":[0,2128],"raw":"ï»¿---\ntitle: 'ä¿¡å·é‡æœºåˆ¶'\ntags: ['æ“ä½œç³»ç»Ÿ','ä¿¡å·é‡']\n---\n# ä¿¡å·é‡æœºåˆ¶\n\nè¿›ç¨‹äº’æ–¥çš„å››ç§è½¯ä»¶å®ç°æ–¹å¼ï¼ˆå•æ ‡å¿—æ³•ã€åŒæ ‡å¿—æ³•ã€åŒæ ‡å¿—åæ£€æŸ¥æ³•ã€Petersonç®—æ³•ï¼‰å’Œä¸‰ç§ç¡¬ä»¶å®ç°æ–¹å¼ï¼ˆä¸­æ–­å±è”½ã€TSLæŒ‡ä»¤å’ŒSWAPæŒ‡ä»¤ï¼‰ã€‚\n\nä»¥ä¸Šçš„æ‰€æœ‰æ–¹å¼éƒ½æ²¡æœ‰éµå¾ªâ€œè®©æƒç­‰å¾…â€åŸåˆ™ï¼Œåœ¨æ— æ³•è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œä¹Ÿä¸ä¼šæŠŠCPUèµ„æºè®©ç»™å…¶ä»–è¿›ç¨‹ã€‚\n\n- ä¿¡å·é‡æœºåˆ¶ï¼šç”¨æˆ·è¿›ç¨‹å¯ä»¥é€šè¿‡**æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€å¯¹åŸè¯­**ï¼Œæ¥å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œï¼Œæ–¹ä¾¿åœ°å®ç°äº†è¿›ç¨‹ä¹‹é—´åœ°äº’æ–¥å’ŒåŒæ­¥ã€‚\n\n  ä¿¡å·é‡å…¶å®æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªä¿¡å·é‡æ¥æè¿°ç³»ç»Ÿä¸­æŸç§èµ„æºåœ°æ•°é‡ï¼ˆæ¯”å¦‚ä¸€å°æ‰“å°æœºå°±å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå€¼ä¸º1åœ°ä¿¡å·é‡ï¼‰ã€‚\n\nwait(S)åŸè¯­å’Œsignal(S)åŸè¯­ï¼Œä¸¤ä¸ªæ“ä½œå¯ä»¥åˆ†åˆ«å†™ä¸ºP(S)å’ŒV(s)ã€‚\n\n## æ•´å‹ä¿¡å·é‡\n\nç”¨ä¸€ä¸ªæ•´æ•°æ¥è¡¨ç¤ºç³»ç»ŸæŸç§èµ„æºçš„æ•°é‡ã€‚\n\nä¸æ™®é€šçš„æ•´å‹å˜é‡ç›¸æ¯”ï¼Œæ•´å‹ä¿¡å·é‡åªèƒ½è¿›è¡Œåˆå§‹åŒ–ã€Pæ“ä½œå’ŒVæ“ä½œã€‚\n\n```c\nint S=1; // ç³»ç»Ÿä¸­æŸç§èµ„æºæ•°\n\n// waitåŸè¯­çš„é€»è¾‘\nvoid wait(int S){\n    while(S<=0);\n    S--;\n}\n// signalåŸè¯­çš„é€»è¾‘\nvoid signal(int S){\n    S++;\n}\n\n// ä½¿ç”¨ä¿¡å·é‡çš„é€»è¾‘\n// è¿›ç¨‹P0\nwait(S); // è¿›å…¥åŒº\n// ä¸´ç•ŒåŒºä»£ç \nsignal(S); // é€€å‡ºåŒº\n```\n\n ç¼ºç‚¹ï¼šä¸æ»¡è¶³â€œè®©æƒç­‰å¾…â€åŸåˆ™\n\n## è®°å½•å‹ä¿¡å·é‡\n\nç”¨è®°å½•å‹æ•°æ®è§£é›‡è¡¨ç¤ºä¿¡å·é‡ï¼Œå¯ä»¥è§£å†³æ•´å‹ä¿¡å·é‡å­˜åœ¨çš„â€œå¿™ç­‰â€çš„é—®é¢˜ã€‚\n\n```c\n//è®°å½•å‹ä¿¡å·é‡\ntypedef struct {\n    int value;\t// å‰©ä½™èµ„æºæ•°\n    struct process *L; // ç­‰å¾…çš„èµ„æº\n} semphore;\n// waitåŸè¯­\nvoid wait(semaphore S){\n    S.value --;\n    if(S.value < 0) block(S.L); // å‰©ä½™çš„èµ„æºæ•°ä¸å¤Ÿï¼Œä½¿ç”¨blockåŸè¯­æŠŠå½“å‰çš„è¿›ç¨‹é˜»å¡\n}\nvoid signal(semaphore S){\n    s.value++;\n    if(S.value <= 0) wakeup(S.L); // è¯´æ˜åœ¨é‡Šæ”¾èµ„æºä¹‹å‰ï¼Œè¿˜æœ‰è¿›ç¨‹åœ¨ç­‰å¾…ä½¿ç”¨è¿™ä¸ªèµ„æº\n}\n```\n\nä¼˜ç‚¹ï¼šéµå¾ªäº†â€œè®©æƒç­‰å¾…â€åŸåˆ™\n\n## ä¿¡å·é‡è¿›åˆ¶å®ç°è¿›ç¨‹äº’æ–¥\n\n1. åˆ†æå¹¶å‘è¿›ç¨‹çš„å…³é”®æ´»åŠ¨ã€åˆ’å®šä¸´ç•ŒåŒº\n2. è®¾ç½®äº’æ–¥ä¿¡å·é‡mutexï¼Œåˆå§‹å€¼ä¸º1\n3. åœ¨ä¸´ç•ŒåŒºä¹‹å‰å¯¹ä¿¡å·é‡mutexæ‰§è¡ŒPæ“ä½œ\n4. åœ¨ä¸´ç•ŒåŒºä¹‹åå¯¹ä¿¡å·é‡mutexæ‰§è¡ŒVæ“ä½œ\n\nå¯¹äºä¸åŒçš„ä¸´ç•Œèµ„æºï¼Œéœ€è¦è®¾ç½®**ä¸åŒçš„äº’æ–¥ä¿¡å·é‡**\n\n## ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹åŒæ­¥\n\nè¿›ç¨‹åŒæ­¥ï¼šè®©å„ä¸ªè¿›ç¨‹æœ‰åºåœ°æ¨è¿›\n\n1. åˆ†æéœ€è¦å®ç°åŒæ­¥å…³ç³»çš„ä½ç½®\n2. è®¾ç½®åŒæ­¥ä¿¡å·é‡Sï¼Œåˆå§‹å€¼ä¸º0\n3. åœ¨â€œå‰æ“ä½œâ€ä¹‹åæ‰§è¡ŒVæ“ä½œï¼ˆå‰æ“ä½œæ‰§è¡Œå®Œæˆï¼Œå”¤é†’åæ“ä½œï¼‰\n4. åœ¨â€œåæ“ä½œâ€ä¹‹å‰æ‰§è¡ŒPæ“ä½œï¼ˆå‰æ“ä½œè¿˜æœªæ‰§è¡Œå°±ä¼šå°†åæ“ä½œé˜»å¡ï¼‰\n\n```c\nsemaphore S=0;\n\n// å‰æ“ä½œ\nP1(){\n    // å‰æ“ä½œä»£ç \n    V(S); // signalåŸè¯­ï¼Œå”¤é†’åæ“ä½œè¿›ç¨‹\n    // å‰©ä½™ä»£ç \n}\n\n// åæ“ä½œ\nP2(){\n    P(S); // waitåŸè¯­ï¼Œæ£€æŸ¥å‰æ“ä½œæ˜¯å¦å®Œæˆäº†\n    // åæ“ä½œä»£ç \n   \t// å‰©ä½™ä»£ç \n}\n```\n\n## ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹çš„å‰é©±å…³ç³»\n\n![quicker_283a6535-3b5b-4f96-a2ae-42da1a3153bd.png](https://i.loli.net/2020/08/14/61DyjLnH9xqXtP2.png)\n\nå„ä¸ªè¿›ç¨‹è¦æŒ‰ç…§å¦‚ä¸Šå›¾æ‰€ç¤ºçš„é¡ºåºæ¥æ‰§è¡Œã€‚å…¶ä¸­æ¯ä¸€å¯¹å‰é©±å…³ç³»éƒ½æ˜¯ä¸€ç§è¿›ç¨‹åŒæ­¥å…³ç³»ï¼Œæ‰€ä»¥ï¼š\n\n1. ä¸ºæ¯ä¸€å¯¹å‰é©±å…³ç³»å„è®¾ç½®ä¸€ä¸ªåŒæ­¥ä¿¡å·é‡\n2. åœ¨â€œå‰æ“ä½œâ€ä¹‹åå¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒVæ“ä½œ\n3. åœ¨â€œåæ“ä½œâ€ä¹‹å‰å¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒPæ“ä½œ\n\n```c\n// å®šä¹‰ä¿¡å·é‡\nsemaphore s1s2 = 0;\nsemaphore s1s3 = 0;\nsemaphore s2s4 = 0;\nsemaphore s2s5 = 0;\nsemaphore s3s6 = 0;\nsemaphore s4s6 = 0;\nsemaphore s5s6 = 0;\n\nP1(){\n    S1;\n    V(s1s2);\n    V(s1s3);\n}\nP2(){\n    P(s1s2);\n    S2;\n    V(s2s4);\n    V(s2s5);\n}\nP3(){\n    P(s1s3);\n    S3;\n    V(s3s6);\n}\nP4(){\n    P(s2s4);\n    S4;\n    V(s4s6);\n}\nP5(){\n    P(s2s5);\n    S5;\n    V(s5s6);\n}\nP6(){\n    P(s5s6);\n    P(s3s6);\n    P(s4s6);\n    S6;\n}\n```\n"},"catalogue":{"title":"ä¿¡å·é‡æœºåˆ¶","json-path":"æ“ä½œç³»ç»Ÿ/2020-08-14-ä¿¡å·é‡æœºåˆ¶.json","mdate":"2020-08-14","cover":"https://i.328888.xyz/2022/12/31/ndOVF.jpeg","icon":"ğŸ­","visible":true,"tags":["æ“ä½œç³»ç»Ÿ","ä¿¡å·é‡"]}}