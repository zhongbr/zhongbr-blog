"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2802],{2802:function(n,e,t){t.r(e),t.d(e,{default:function(){return C}});var a=t(920),r=t(5260),o=t(9299),c=t(9565),i=t(8135),s=t(3114),u=t(279),l=t(2413),d=t(2860),f="container_CJP8Y",p="selected-tags_tS_Dz",v="passages-container_Pg1B9",h="passage-operations_dToIs",g=t(6498),m=function(n){var e=n.onEnterPassage,t=n.catalogue,o=(0,r.s0)(),m=(0,r.e0)(),w=m.onReplaceTags,x=m.onRemoveTag,Z=m.onSelectTag,j=m.tags,b=(0,a.useState)(window.innerWidth),k=(0,s.Z)(b,2),C=k[0],y=k[1],M=Math.min(1416,C),N=Math.floor((M-40-20-6)/3),R=(0,a.useMemo)((function(){return Object.values(t||{})}),[t]),I=function(n){null===e||void 0===e||e(n),o("/passage/".concat(n["json-path"]))},O=function(){var n=(0,i.Z)((0,c.Z)().mark((function n(e){return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,d.J)("".concat(window.location.protocol,"//").concat(window.location.host,"/#/passage/").concat(e["json-path"]));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,r.OR)("resize",(0,r.Nr)((function(){y(window.innerWidth)}))),(0,g.jsxs)("div",{className:f,style:{"--passages-list-width":"".concat(M,"px")},children:[!!j.length&&(0,g.jsxs)("div",{className:(0,u.Z)("blur","border-radius-normal",p),children:[null===j||void 0===j?void 0:j.map((function(n){return(0,g.jsx)(l.Vp,{selected:!0,onRemove:function(){return x(n)},children:n})})),(0,g.jsx)(l.Vp,{hideIcon:!0,onClick:function(){return w([])},children:"\u6e05\u9664"})]}),(0,g.jsx)("div",{className:v,children:R.map((function(n){var e,t;return(0,g.jsx)(l.Zb,{width:"".concat(N,"px"),onClickImage:function(){return I(n)},title:n.title,icon:n.icon,headerImage:n.cover,extraInfoHover:n.mdate,extraInfo:(0,g.jsx)("div",{children:null===n||void 0===n||null===(e=n.tags)||void 0===e||null===(t=e.map)||void 0===t?void 0:t.call(e,(function(n){return(0,g.jsx)(l.Vp,{onClick:function(){return Z(n)},children:n},n)}))}),hoverContent:(0,g.jsxs)("div",{className:h,children:[(0,g.jsx)(l.JO,{className:"rp-faxian",text:"\u9605\u8bfb",onClick:function(){return I(n)}}),(0,g.jsx)(l.JO,{className:"rp-fuzhi",text:"\u590d\u5236",onClick:function(){return O(n)}})]})})}))})]})},w=t(9641),x=t(6495),Z=t(810),j={tagsMap:new Map,catalogue:{}};function b(n){var e=n.onReady,t=(0,r.il)(Z.Z),o=(0,s.Z)(t,3),u=o[0],l=o[1],d=o[2],f=(0,r.e0)().tags,p=(0,r.gz)(j),v=(0,s.Z)(p,2),h=v[0],g=v[1],m=(0,r.tG)((function(n){return Object.keys(n).reduce((function(e,t){var a,r=n[t];return 0===f.length||null!==(a=r.tags)&&void 0!==a&&a.some((function(n){return f.includes(n)}))?(0,x.Z)((0,x.Z)({},e),{},(0,w.Z)({},t,r)):e}),{})}));return(0,r.bd)((0,i.Z)((0,c.Z)().mark((function n(){var t,a,r;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u();case 2:t=n.sent,a=t.data,r=new Map,Object.values(a).reduce((function(n,e){var t=e.tags;return(void 0===t?[]:t).forEach((function(t){var a=n.get(t)||[];a.push(e),n.set(t,a)})),n}),r),g({tagsMap:r,catalogue:m(a)}),null===e||void 0===e||e();case 8:case"end":return n.stop()}}),n)}))),[f.join(","),m,g]),(0,a.useEffect)((function(){var n=(null===l||void 0===l?void 0:l.data)||{};g({catalogue:m(n)})}),[m,null===l||void 0===l?void 0:l.data,g]),(0,x.Z)({loading:d},h)}var k=function(){var n=(0,r.Gm)(),e=n.setStates,t=b({onReady:n.onPageReady}).catalogue;return(0,a.useEffect)((function(){null===e||void 0===e||e({title:o.TN,footer:{showICP:!0,showCopyRight:!0,showPublicSecurity:!0}})}),[e]),(0,g.jsx)(m,{catalogue:t})},C=(0,a.memo)(k)},810:function(n,e,t){t.d(e,{Z:function(){return i}});var a=t(9565),r=t(8135),o=t(902),c=t.n(o);function i(){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c().get("/md/catalogue.json?r=".concat(Math.random()));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}}]);