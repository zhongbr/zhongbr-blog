"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7418],{67418:function(n,e,t){t.r(e),t.d(e,{default:function(){return y}});var a=t(91850),o=t(88989),r=t(43274),c=t(19565),u=t(8135),i=t(66509),s=t(90893),l=t(29937),d="container_CJP8Y",f="selected-tags_tS_Dz",p="passages-container_Pg1B9",v="passage-operations_dToIs",g=t(32180),h=function(n){var e=n.onEnterPassage,t=n.catalogue,r=(0,o.s0)(),h=(0,o.e0)(),m=h.onReplaceTags,x=h.onRemoveTag,w=h.onSelectTag,j=h.tags,Z=(0,a.useMemo)((function(){return Object.values(t||{}).filter((function(n){return n.visible}))}),[t]),C=function(n){null===e||void 0===e||e(n),r("/passage/".concat(encodeURIComponent(n["json-path"])))},b=function(){var n=(0,u.Z)((0,c.Z)().mark((function n(e){return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,l.J)("".concat(window.location.protocol,"//").concat(window.location.host,"/#/passage/").concat(encodeURIComponent(e["json-path"])));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,g.jsx)(s.Ex,{className:d,cardsContainerClassName:p,headContent:!!j.length&&(0,g.jsxs)("div",{className:(0,i.Z)("blur","border-radius-normal",f),children:[null===j||void 0===j?void 0:j.map((function(n){return(0,g.jsx)(s.Vp,{selected:!0,onRemove:function(){return x(n)},children:n})})),(0,g.jsx)(s.Vp,{hideIcon:!0,onClick:function(){return m([])},children:"\u6e05\u9664"})]}),children:Z.map((function(n){var e,t;return(0,g.jsx)(s.Uo,{onClickImage:function(){return C(n)},title:n.title,icon:n.icon,headerImage:n.cover,extraInfoHover:n.mdate,extraInfo:(0,g.jsx)("div",{children:null===n||void 0===n||null===(e=n.tags)||void 0===e||null===(t=e.map)||void 0===t?void 0:t.call(e,(function(n){return(0,g.jsx)(s.Vp,{onClick:function(){return w(n)},children:n},n)}))}),hoverContent:(0,g.jsxs)("div",{className:v,children:[(0,g.jsx)(s.JO,{className:"rp-faxian",text:"\u9605\u8bfb",onClick:function(){return C(n)}}),(0,g.jsx)(s.JO,{className:"rp-fuzhi",text:"\u590d\u5236",onClick:function(){return b(n)}})]})})}))})},m=t(99641),x=t(56495),w=t(63114),j=t(4816),Z=t(77245),C={tagsMap:new Map,catalogue:{}};function b(n){var e=n.onReady,t=(0,j.il)(Z.Z),r=(0,w.Z)(t,3),i=r[0],s=r[1],l=r[2],d=(0,o.e0)().tags,f=(0,j.gz)(C),p=(0,w.Z)(f,2),v=p[0],g=p[1],h=(0,j.zX)((function(n){return Object.keys(n).reduce((function(e,t){var a,o=n[t];return 0===d.length||null!==(a=o.tags)&&void 0!==a&&a.some((function(n){return d.includes(n)}))?(0,x.Z)((0,x.Z)({},e),{},(0,m.Z)({},t,o)):e}),{})}));return(0,j.bd)((0,u.Z)((0,c.Z)().mark((function n(){var t,a,o;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i();case 2:t=n.sent,a=t.data,o=new Map,Object.values(a).reduce((function(n,e){var t=e.tags;return(void 0===t?[]:t).forEach((function(t){var a=n.get(t)||[];a.push(e),n.set(t,a)})),n}),o),g({tagsMap:o,catalogue:h(a)}),null===e||void 0===e||e();case 8:case"end":return n.stop()}}),n)}))),[d.join(","),h,g]),(0,a.useEffect)((function(){var n=(null===s||void 0===s?void 0:s.data)||{};g({catalogue:h(n)})}),[h,null===s||void 0===s?void 0:s.data,g]),(0,x.Z)({loading:l},v)}var k=function(){var n=(0,o.Gm)(),e=n.setStates,t=b({onReady:n.onPageReady}).catalogue;return(0,a.useEffect)((function(){null===e||void 0===e||e({title:r.TN,footer:{showICP:!0,showCopyRight:!0,showPublicSecurity:!0}})}),[e]),(0,g.jsx)(h,{catalogue:t})},y=(0,a.memo)(k)},77245:function(n,e,t){t.d(e,{Z:function(){return u}});var a=t(19565),o=t(8135),r=t(64474),c=t.n(r);function u(){return i.apply(this,arguments)}function i(){return(i=(0,o.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c().get("/md/catalogue.json?r=".concat(Math.random()));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}}]);