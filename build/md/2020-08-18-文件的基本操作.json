{"ast":{"type":"Document","children":[{"type":"Yaml","value":"title: '文件的基本操作'\ntags: ['操作系统','文件']","loc":{"start":{"line":1,"column":0},"end":{"line":4,"column":3}},"range":[0,44],"raw":"---\ntitle: '文件的基本操作'\ntags: ['操作系统','文件']\n---"},{"type":"Header","depth":1,"children":[{"type":"Str","value":"文件的基本操作","loc":{"start":{"line":5,"column":2},"end":{"line":5,"column":9}},"range":[47,54],"raw":"文件的基本操作"}],"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":9}},"range":[45,54],"raw":"# 文件的基本操作"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"创建文件(Create系统调用)","loc":{"start":{"line":7,"column":3},"end":{"line":7,"column":19}},"range":[59,75],"raw":"创建文件(Create系统调用)"}],"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":19}},"range":[56,75],"raw":"## 创建文件(Create系统调用)"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"需要提供的参数","loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":11}},"range":[81,88],"raw":"需要提供的参数"}],"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":11}},"range":[77,88],"raw":"### 需要提供的参数"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"文件所需要的外存空间大小","loc":{"start":{"line":11,"column":3},"end":{"line":11,"column":15}},"range":[93,105],"raw":"文件所需要的外存空间大小"}],"loc":{"start":{"line":11,"column":3},"end":{"line":11,"column":15}},"range":[93,105],"raw":"文件所需要的外存空间大小"}],"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":15}},"range":[90,105],"raw":"1. 文件所需要的外存空间大小"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"文件存放的路径","loc":{"start":{"line":12,"column":3},"end":{"line":12,"column":10}},"range":[109,116],"raw":"文件存放的路径"}],"loc":{"start":{"line":12,"column":3},"end":{"line":12,"column":10}},"range":[109,116],"raw":"文件存放的路径"}],"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":10}},"range":[106,116],"raw":"2. 文件存放的路径"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"文件名","loc":{"start":{"line":13,"column":3},"end":{"line":13,"column":6}},"range":[120,123],"raw":"文件名"}],"loc":{"start":{"line":13,"column":3},"end":{"line":13,"column":6}},"range":[120,123],"raw":"文件名"}],"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":6}},"range":[117,123],"raw":"3. 文件名"}],"loc":{"start":{"line":11,"column":0},"end":{"line":13,"column":6}},"range":[90,123],"raw":"1. 文件所需要的外存空间大小\n2. 文件存放的路径\n3. 文件名"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"创建文件的过程","loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":11}},"range":[129,136],"raw":"创建文件的过程"}],"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":11}},"range":[125,136],"raw":"### 创建文件的过程"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"在外存中找到文件所需要的磁盘空间","loc":{"start":{"line":17,"column":3},"end":{"line":17,"column":19}},"range":[141,157],"raw":"在外存中找到文件所需要的磁盘空间"}],"loc":{"start":{"line":17,"column":3},"end":{"line":17,"column":19}},"range":[141,157],"raw":"在外存中找到文件所需要的磁盘空间"}],"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":19}},"range":[138,157],"raw":"1. 在外存中找到文件所需要的磁盘空间"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"找到目录对应的目录表文件，在目录表文件中创建该文件相关的目录项，包含了文件的文静名、在外存中的位置等信息。","loc":{"start":{"line":18,"column":3},"end":{"line":18,"column":56}},"range":[161,214],"raw":"找到目录对应的目录表文件，在目录表文件中创建该文件相关的目录项，包含了文件的文静名、在外存中的位置等信息。"}],"loc":{"start":{"line":18,"column":3},"end":{"line":18,"column":56}},"range":[161,214],"raw":"找到目录对应的目录表文件，在目录表文件中创建该文件相关的目录项，包含了文件的文静名、在外存中的位置等信息。"}],"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":56}},"range":[158,214],"raw":"2. 找到目录对应的目录表文件，在目录表文件中创建该文件相关的目录项，包含了文件的文静名、在外存中的位置等信息。"}],"loc":{"start":{"line":17,"column":0},"end":{"line":18,"column":56}},"range":[138,214],"raw":"1. 在外存中找到文件所需要的磁盘空间\n2. 找到目录对应的目录表文件，在目录表文件中创建该文件相关的目录项，包含了文件的文静名、在外存中的位置等信息。"},{"type":"HorizontalRule","loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":6}},"range":[216,222],"raw":"******"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"删除文件（Delete系统调用）","loc":{"start":{"line":22,"column":3},"end":{"line":22,"column":19}},"range":[227,243],"raw":"删除文件（Delete系统调用）"}],"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":19}},"range":[224,243],"raw":"## 删除文件（Delete系统调用）"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"需要提供的参数","loc":{"start":{"line":24,"column":4},"end":{"line":24,"column":11}},"range":[249,256],"raw":"需要提供的参数"}],"loc":{"start":{"line":24,"column":0},"end":{"line":24,"column":11}},"range":[245,256],"raw":"### 需要提供的参数"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"文件存放的路径","loc":{"start":{"line":26,"column":3},"end":{"line":26,"column":10}},"range":[261,268],"raw":"文件存放的路径"}],"loc":{"start":{"line":26,"column":3},"end":{"line":26,"column":10}},"range":[261,268],"raw":"文件存放的路径"}],"loc":{"start":{"line":26,"column":0},"end":{"line":26,"column":10}},"range":[258,268],"raw":"1. 文件存放的路径"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"文件名","loc":{"start":{"line":27,"column":3},"end":{"line":27,"column":6}},"range":[272,275],"raw":"文件名"}],"loc":{"start":{"line":27,"column":3},"end":{"line":27,"column":6}},"range":[272,275],"raw":"文件名"}],"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":6}},"range":[269,275],"raw":"2. 文件名"}],"loc":{"start":{"line":26,"column":0},"end":{"line":27,"column":6}},"range":[258,275],"raw":"1. 文件存放的路径\n2. 文件名"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"删除文件的过程","loc":{"start":{"line":29,"column":4},"end":{"line":29,"column":11}},"range":[281,288],"raw":"删除文件的过程"}],"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":11}},"range":[277,288],"raw":"### 删除文件的过程"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"系统根据文件的路径找到相应的目录表文件，从目录表中找到对应的目录项","loc":{"start":{"line":31,"column":3},"end":{"line":31,"column":36}},"range":[293,326],"raw":"系统根据文件的路径找到相应的目录表文件，从目录表中找到对应的目录项"}],"loc":{"start":{"line":31,"column":3},"end":{"line":31,"column":36}},"range":[293,326],"raw":"系统根据文件的路径找到相应的目录表文件，从目录表中找到对应的目录项"}],"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":36}},"range":[290,326],"raw":"1. 系统根据文件的路径找到相应的目录表文件，从目录表中找到对应的目录项"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"根据目录项中记录的文件在外存的位置，回收文件占用的磁盘块","loc":{"start":{"line":32,"column":3},"end":{"line":32,"column":31}},"range":[330,358],"raw":"根据目录项中记录的文件在外存的位置，回收文件占用的磁盘块"}],"loc":{"start":{"line":32,"column":3},"end":{"line":32,"column":31}},"range":[330,358],"raw":"根据目录项中记录的文件在外存的位置，回收文件占用的磁盘块"}],"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":31}},"range":[327,358],"raw":"2. 根据目录项中记录的文件在外存的位置，回收文件占用的磁盘块"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"从目录表删除文件对应的目录项","loc":{"start":{"line":33,"column":3},"end":{"line":33,"column":17}},"range":[362,376],"raw":"从目录表删除文件对应的目录项"}],"loc":{"start":{"line":33,"column":3},"end":{"line":33,"column":17}},"range":[362,376],"raw":"从目录表删除文件对应的目录项"}],"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":17}},"range":[359,376],"raw":"3. 从目录表删除文件对应的目录项"}],"loc":{"start":{"line":31,"column":0},"end":{"line":33,"column":17}},"range":[290,376],"raw":"1. 系统根据文件的路径找到相应的目录表文件，从目录表中找到对应的目录项\n2. 根据目录项中记录的文件在外存的位置，回收文件占用的磁盘块\n3. 从目录表删除文件对应的目录项"},{"type":"HorizontalRule","loc":{"start":{"line":35,"column":0},"end":{"line":35,"column":6}},"range":[378,384],"raw":"******"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"打开文件（Open系统调用）","loc":{"start":{"line":37,"column":3},"end":{"line":37,"column":17}},"range":[389,403],"raw":"打开文件（Open系统调用）"}],"loc":{"start":{"line":37,"column":0},"end":{"line":37,"column":17}},"range":[386,403],"raw":"## 打开文件（Open系统调用）"},{"type":"Paragraph","children":[{"type":"Str","value":"操作系统中，在对文件进行操作之前，要求用户使用open系统调用“打开文件”。","loc":{"start":{"line":39,"column":0},"end":{"line":39,"column":38}},"range":[405,443],"raw":"操作系统中，在对文件进行操作之前，要求用户使用open系统调用“打开文件”。"}],"loc":{"start":{"line":39,"column":0},"end":{"line":39,"column":38}},"range":[405,443],"raw":"操作系统中，在对文件进行操作之前，要求用户使用open系统调用“打开文件”。"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"需要提供的参数","loc":{"start":{"line":41,"column":4},"end":{"line":41,"column":11}},"range":[449,456],"raw":"需要提供的参数"}],"loc":{"start":{"line":41,"column":0},"end":{"line":41,"column":11}},"range":[445,456],"raw":"### 需要提供的参数"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"文件存放的路径","loc":{"start":{"line":43,"column":3},"end":{"line":43,"column":10}},"range":[461,468],"raw":"文件存放的路径"}],"loc":{"start":{"line":43,"column":3},"end":{"line":43,"column":10}},"range":[461,468],"raw":"文件存放的路径"}],"loc":{"start":{"line":43,"column":0},"end":{"line":43,"column":10}},"range":[458,468],"raw":"1. 文件存放的路径"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"文件名","loc":{"start":{"line":44,"column":3},"end":{"line":44,"column":6}},"range":[472,475],"raw":"文件名"}],"loc":{"start":{"line":44,"column":3},"end":{"line":44,"column":6}},"range":[472,475],"raw":"文件名"}],"loc":{"start":{"line":44,"column":0},"end":{"line":44,"column":6}},"range":[469,475],"raw":"2. 文件名"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"要对文件进行的操作","loc":{"start":{"line":45,"column":3},"end":{"line":45,"column":12}},"range":[479,488],"raw":"要对文件进行的操作"}],"loc":{"start":{"line":45,"column":3},"end":{"line":45,"column":12}},"range":[479,488],"raw":"要对文件进行的操作"}],"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":12}},"range":[476,488],"raw":"3. 要对文件进行的操作"}],"loc":{"start":{"line":43,"column":0},"end":{"line":45,"column":12}},"range":[458,488],"raw":"1. 文件存放的路径\n2. 文件名\n3. 要对文件进行的操作"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"打开文件的过程","loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":11}},"range":[494,501],"raw":"打开文件的过程"}],"loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":11}},"range":[490,501],"raw":"### 打开文件的过程"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"操作系统根据文件存放的路径找到对应的目录表文件","loc":{"start":{"line":49,"column":3},"end":{"line":49,"column":26}},"range":[506,529],"raw":"操作系统根据文件存放的路径找到对应的目录表文件"}],"loc":{"start":{"line":49,"column":3},"end":{"line":49,"column":26}},"range":[506,529],"raw":"操作系统根据文件存放的路径找到对应的目录表文件"}],"loc":{"start":{"line":49,"column":0},"end":{"line":49,"column":26}},"range":[503,529],"raw":"1. 操作系统根据文件存放的路径找到对应的目录表文件"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"从目录表中找到文件名对应的目录项，并检查用户是否有该","loc":{"start":{"line":50,"column":3},"end":{"line":50,"column":29}},"range":[533,559],"raw":"从目录表中找到文件名对应的目录项，并检查用户是否有该"},{"type":"Strong","children":[{"type":"Str","value":"文件的操作权限","loc":{"start":{"line":50,"column":31},"end":{"line":50,"column":38}},"range":[561,568],"raw":"文件的操作权限"}],"loc":{"start":{"line":50,"column":29},"end":{"line":50,"column":40}},"range":[559,570],"raw":"**文件的操作权限**"}],"loc":{"start":{"line":50,"column":3},"end":{"line":50,"column":40}},"range":[533,570],"raw":"从目录表中找到文件名对应的目录项，并检查用户是否有该**文件的操作权限**"}],"loc":{"start":{"line":50,"column":0},"end":{"line":50,"column":40}},"range":[530,570],"raw":"2. 从目录表中找到文件名对应的目录项，并检查用户是否有该**文件的操作权限**"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"将目录项复制到内存的“打开文件表”中，并将对应表目的编号返回给用户，之后用户","loc":{"start":{"line":51,"column":3},"end":{"line":51,"column":41}},"range":[574,612],"raw":"将目录项复制到内存的“打开文件表”中，并将对应表目的编号返回给用户，之后用户"},{"type":"Strong","children":[{"type":"Str","value":"使用打开文件表的编号","loc":{"start":{"line":51,"column":43},"end":{"line":51,"column":53}},"range":[614,624],"raw":"使用打开文件表的编号"}],"loc":{"start":{"line":51,"column":41},"end":{"line":51,"column":55}},"range":[612,626],"raw":"**使用打开文件表的编号**"},{"type":"Str","value":"来指明要操作的文件。","loc":{"start":{"line":51,"column":55},"end":{"line":51,"column":65}},"range":[626,636],"raw":"来指明要操作的文件。"}],"loc":{"start":{"line":51,"column":3},"end":{"line":51,"column":65}},"range":[574,636],"raw":"将目录项复制到内存的“打开文件表”中，并将对应表目的编号返回给用户，之后用户**使用打开文件表的编号**来指明要操作的文件。"}],"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":65}},"range":[571,636],"raw":"3. 将目录项复制到内存的“打开文件表”中，并将对应表目的编号返回给用户，之后用户**使用打开文件表的编号**来指明要操作的文件。"}],"loc":{"start":{"line":49,"column":0},"end":{"line":51,"column":65}},"range":[503,636],"raw":"1. 操作系统根据文件存放的路径找到对应的目录表文件\n2. 从目录表中找到文件名对应的目录项，并检查用户是否有该**文件的操作权限**\n3. 将目录项复制到内存的“打开文件表”中，并将对应表目的编号返回给用户，之后用户**使用打开文件表的编号**来指明要操作的文件。"},{"type":"BlockQuote","children":[{"type":"Paragraph","children":[{"type":"Str","value":"打开文件表存在于操作系统和进程中：","loc":{"start":{"line":53,"column":2},"end":{"line":53,"column":19}},"range":[640,657],"raw":"打开文件表存在于操作系统和进程中："}],"loc":{"start":{"line":53,"column":2},"end":{"line":53,"column":19}},"range":[640,657],"raw":"打开文件表存在于操作系统和进程中："},{"type":"Paragraph","children":[{"type":"Str","value":"操作系统中的打开文件表是整个系统中所有进程的","loc":{"start":{"line":55,"column":2},"end":{"line":55,"column":24}},"range":[662,684],"raw":"操作系统中的打开文件表是整个系统中所有进程的"},{"type":"Strong","children":[{"type":"Str","value":"打开文件表的汇总","loc":{"start":{"line":55,"column":26},"end":{"line":55,"column":34}},"range":[686,694],"raw":"打开文件表的汇总"}],"loc":{"start":{"line":55,"column":24},"end":{"line":55,"column":36}},"range":[684,696],"raw":"**打开文件表的汇总**"},{"type":"Str","value":"，记录了“编号、外存地址、打开计数器”等信息，打开计数器记录了当前文件被多少个进程打开，某个进程关闭文件时，打开计数器减一，如果","loc":{"start":{"line":55,"column":36},"end":{"line":55,"column":100}},"range":[696,760],"raw":"，记录了“编号、外存地址、打开计数器”等信息，打开计数器记录了当前文件被多少个进程打开，某个进程关闭文件时，打开计数器减一，如果"},{"type":"Strong","children":[{"type":"Str","value":"打开计数器为0","loc":{"start":{"line":55,"column":102},"end":{"line":55,"column":109}},"range":[762,769],"raw":"打开计数器为0"}],"loc":{"start":{"line":55,"column":100},"end":{"line":55,"column":111}},"range":[760,771],"raw":"**打开计数器为0**"},{"type":"Str","value":"的时候，可以删除对应的表项。","loc":{"start":{"line":55,"column":111},"end":{"line":55,"column":125}},"range":[771,785],"raw":"的时候，可以删除对应的表项。"}],"loc":{"start":{"line":55,"column":2},"end":{"line":55,"column":125}},"range":[662,785],"raw":"操作系统中的打开文件表是整个系统中所有进程的**打开文件表的汇总**，记录了“编号、外存地址、打开计数器”等信息，打开计数器记录了当前文件被多少个进程打开，某个进程关闭文件时，打开计数器减一，如果**打开计数器为0**的时候，可以删除对应的表项。"},{"type":"Paragraph","children":[{"type":"Str","value":"进程中的打开文件表是进程自己打开的文件的表，记录了“文件名、读写指针、访问权限、系统打开文件表的索引号”等信息","loc":{"start":{"line":57,"column":2},"end":{"line":57,"column":57}},"range":[790,845],"raw":"进程中的打开文件表是进程自己打开的文件的表，记录了“文件名、读写指针、访问权限、系统打开文件表的索引号”等信息"}],"loc":{"start":{"line":57,"column":2},"end":{"line":57,"column":57}},"range":[790,845],"raw":"进程中的打开文件表是进程自己打开的文件的表，记录了“文件名、读写指针、访问权限、系统打开文件表的索引号”等信息"}],"loc":{"start":{"line":53,"column":0},"end":{"line":57,"column":57}},"range":[638,845],"raw":"> 打开文件表存在于操作系统和进程中：\n>\n> 操作系统中的打开文件表是整个系统中所有进程的**打开文件表的汇总**，记录了“编号、外存地址、打开计数器”等信息，打开计数器记录了当前文件被多少个进程打开，某个进程关闭文件时，打开计数器减一，如果**打开计数器为0**的时候，可以删除对应的表项。\n>\n> 进程中的打开文件表是进程自己打开的文件的表，记录了“文件名、读写指针、访问权限、系统打开文件表的索引号”等信息"},{"type":"HorizontalRule","loc":{"start":{"line":59,"column":0},"end":{"line":59,"column":5}},"range":[847,852],"raw":"*****"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"关闭文件（Close系统调用）","loc":{"start":{"line":61,"column":3},"end":{"line":61,"column":18}},"range":[857,872],"raw":"关闭文件（Close系统调用）"}],"loc":{"start":{"line":61,"column":0},"end":{"line":61,"column":18}},"range":[854,872],"raw":"## 关闭文件（Close系统调用）"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"需要提供的参数","loc":{"start":{"line":63,"column":3},"end":{"line":63,"column":10}},"range":[877,884],"raw":"需要提供的参数"}],"loc":{"start":{"line":63,"column":0},"end":{"line":63,"column":10}},"range":[874,884],"raw":"## 需要提供的参数"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"文件在打开文件表中的编号","loc":{"start":{"line":65,"column":3},"end":{"line":65,"column":15}},"range":[889,901],"raw":"文件在打开文件表中的编号"}],"loc":{"start":{"line":65,"column":3},"end":{"line":65,"column":15}},"range":[889,901],"raw":"文件在打开文件表中的编号"}],"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":15}},"range":[886,901],"raw":"1. 文件在打开文件表中的编号"}],"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":15}},"range":[886,901],"raw":"1. 文件在打开文件表中的编号"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"关闭文件的过程","loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":11}},"range":[907,914],"raw":"关闭文件的过程"}],"loc":{"start":{"line":67,"column":0},"end":{"line":67,"column":11}},"range":[903,914],"raw":"### 关闭文件的过程"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"将进程的打开文件表对应的表项删除","loc":{"start":{"line":69,"column":3},"end":{"line":69,"column":19}},"range":[919,935],"raw":"将进程的打开文件表对应的表项删除"}],"loc":{"start":{"line":69,"column":3},"end":{"line":69,"column":19}},"range":[919,935],"raw":"将进程的打开文件表对应的表项删除"}],"loc":{"start":{"line":69,"column":0},"end":{"line":69,"column":19}},"range":[916,935],"raw":"1. 将进程的打开文件表对应的表项删除"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"回收分配给该文件的内存空间等资源","loc":{"start":{"line":70,"column":3},"end":{"line":70,"column":19}},"range":[939,955],"raw":"回收分配给该文件的内存空间等资源"}],"loc":{"start":{"line":70,"column":3},"end":{"line":70,"column":19}},"range":[939,955],"raw":"回收分配给该文件的内存空间等资源"}],"loc":{"start":{"line":70,"column":0},"end":{"line":70,"column":19}},"range":[936,955],"raw":"2. 回收分配给该文件的内存空间等资源"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"系统打开文件表的打开计数器count-1，若count==0，就删除对应的表项","loc":{"start":{"line":71,"column":3},"end":{"line":71,"column":42}},"range":[959,998],"raw":"系统打开文件表的打开计数器count-1，若count==0，就删除对应的表项"}],"loc":{"start":{"line":71,"column":3},"end":{"line":71,"column":42}},"range":[959,998],"raw":"系统打开文件表的打开计数器count-1，若count==0，就删除对应的表项"}],"loc":{"start":{"line":71,"column":0},"end":{"line":71,"column":42}},"range":[956,998],"raw":"3. 系统打开文件表的打开计数器count-1，若count==0，就删除对应的表项"}],"loc":{"start":{"line":69,"column":0},"end":{"line":71,"column":42}},"range":[916,998],"raw":"1. 将进程的打开文件表对应的表项删除\n2. 回收分配给该文件的内存空间等资源\n3. 系统打开文件表的打开计数器count-1，若count==0，就删除对应的表项"},{"type":"HorizontalRule","loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":6}},"range":[1000,1006],"raw":"******"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"读文件（Read系统调用）","loc":{"start":{"line":75,"column":3},"end":{"line":75,"column":16}},"range":[1011,1024],"raw":"读文件（Read系统调用）"}],"loc":{"start":{"line":75,"column":0},"end":{"line":75,"column":16}},"range":[1008,1024],"raw":"## 读文件（Read系统调用）"},{"type":"Paragraph","children":[{"type":"Str","value":"在进行读文件系统调用之前","loc":{"start":{"line":77,"column":0},"end":{"line":77,"column":12}},"range":[1026,1038],"raw":"在进行读文件系统调用之前"},{"type":"Strong","children":[{"type":"Str","value":"必须先进行打开文件系统调用","loc":{"start":{"line":77,"column":14},"end":{"line":77,"column":27}},"range":[1040,1053],"raw":"必须先进行打开文件系统调用"}],"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":29}},"range":[1038,1055],"raw":"**必须先进行打开文件系统调用**"},{"type":"Str","value":"，此时在操作系统的打开文件表中已经有要读取的文件的表项了。","loc":{"start":{"line":77,"column":29},"end":{"line":77,"column":58}},"range":[1055,1084],"raw":"，此时在操作系统的打开文件表中已经有要读取的文件的表项了。"}],"loc":{"start":{"line":77,"column":0},"end":{"line":77,"column":58}},"range":[1026,1084],"raw":"在进行读文件系统调用之前**必须先进行打开文件系统调用**，此时在操作系统的打开文件表中已经有要读取的文件的表项了。"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"需要的参数","loc":{"start":{"line":79,"column":4},"end":{"line":79,"column":9}},"range":[1090,1095],"raw":"需要的参数"}],"loc":{"start":{"line":79,"column":0},"end":{"line":79,"column":9}},"range":[1086,1095],"raw":"### 需要的参数"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"文件在系统打开文件表中的编号","loc":{"start":{"line":81,"column":3},"end":{"line":81,"column":17}},"range":[1100,1114],"raw":"文件在系统打开文件表中的编号"}],"loc":{"start":{"line":81,"column":3},"end":{"line":81,"column":17}},"range":[1100,1114],"raw":"文件在系统打开文件表中的编号"}],"loc":{"start":{"line":81,"column":0},"end":{"line":81,"column":17}},"range":[1097,1114],"raw":"1. 文件在系统打开文件表中的编号"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"需要读入多少数据","loc":{"start":{"line":82,"column":3},"end":{"line":82,"column":11}},"range":[1118,1126],"raw":"需要读入多少数据"}],"loc":{"start":{"line":82,"column":3},"end":{"line":82,"column":11}},"range":[1118,1126],"raw":"需要读入多少数据"}],"loc":{"start":{"line":82,"column":0},"end":{"line":82,"column":11}},"range":[1115,1126],"raw":"2. 需要读入多少数据"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"读入的数据存放在内存的什么位置","loc":{"start":{"line":83,"column":3},"end":{"line":83,"column":18}},"range":[1130,1145],"raw":"读入的数据存放在内存的什么位置"}],"loc":{"start":{"line":83,"column":3},"end":{"line":83,"column":18}},"range":[1130,1145],"raw":"读入的数据存放在内存的什么位置"}],"loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":18}},"range":[1127,1145],"raw":"3. 读入的数据存放在内存的什么位置"}],"loc":{"start":{"line":81,"column":0},"end":{"line":83,"column":18}},"range":[1097,1145],"raw":"1. 文件在系统打开文件表中的编号\n2. 需要读入多少数据\n3. 读入的数据存放在内存的什么位置"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"读取文件的过程","loc":{"start":{"line":85,"column":4},"end":{"line":85,"column":11}},"range":[1151,1158],"raw":"读取文件的过程"}],"loc":{"start":{"line":85,"column":0},"end":{"line":85,"column":11}},"range":[1147,1158],"raw":"### 读取文件的过程"},{"type":"Paragraph","children":[{"type":"Str","value":"操作系统根据read系统调用时，从读指针指向的系统外存中，将用户指定大小的数据读入用户指定的内存区域。","loc":{"start":{"line":87,"column":0},"end":{"line":87,"column":51}},"range":[1160,1211],"raw":"操作系统根据read系统调用时，从读指针指向的系统外存中，将用户指定大小的数据读入用户指定的内存区域。"}],"loc":{"start":{"line":87,"column":0},"end":{"line":87,"column":51}},"range":[1160,1211],"raw":"操作系统根据read系统调用时，从读指针指向的系统外存中，将用户指定大小的数据读入用户指定的内存区域。"},{"type":"HorizontalRule","loc":{"start":{"line":89,"column":0},"end":{"line":89,"column":6}},"range":[1213,1219],"raw":"******"},{"type":"Header","depth":2,"children":[{"type":"Str","value":"写文件（Write系统调用）","loc":{"start":{"line":91,"column":3},"end":{"line":91,"column":17}},"range":[1224,1238],"raw":"写文件（Write系统调用）"}],"loc":{"start":{"line":91,"column":0},"end":{"line":91,"column":17}},"range":[1221,1238],"raw":"## 写文件（Write系统调用）"},{"type":"Paragraph","children":[{"type":"Str","value":"在进行写文件系统调用之前，同样需要先调用系统的Open系统调用，此时要写入的文件已经在系统的打开文件表中。","loc":{"start":{"line":93,"column":0},"end":{"line":93,"column":53}},"range":[1240,1293],"raw":"在进行写文件系统调用之前，同样需要先调用系统的Open系统调用，此时要写入的文件已经在系统的打开文件表中。"}],"loc":{"start":{"line":93,"column":0},"end":{"line":93,"column":53}},"range":[1240,1293],"raw":"在进行写文件系统调用之前，同样需要先调用系统的Open系统调用，此时要写入的文件已经在系统的打开文件表中。"},{"type":"Header","depth":3,"children":[{"type":"Str","value":"需要提供的参数","loc":{"start":{"line":95,"column":4},"end":{"line":95,"column":11}},"range":[1299,1306],"raw":"需要提供的参数"}],"loc":{"start":{"line":95,"column":0},"end":{"line":95,"column":11}},"range":[1295,1306],"raw":"### 需要提供的参数"},{"type":"List","ordered":true,"start":1,"spread":false,"children":[{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"文件在打开文件表中的编号","loc":{"start":{"line":97,"column":3},"end":{"line":97,"column":15}},"range":[1311,1323],"raw":"文件在打开文件表中的编号"}],"loc":{"start":{"line":97,"column":3},"end":{"line":97,"column":15}},"range":[1311,1323],"raw":"文件在打开文件表中的编号"}],"loc":{"start":{"line":97,"column":0},"end":{"line":97,"column":15}},"range":[1308,1323],"raw":"1. 文件在打开文件表中的编号"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"要写入的数据大小","loc":{"start":{"line":98,"column":3},"end":{"line":98,"column":11}},"range":[1327,1335],"raw":"要写入的数据大小"}],"loc":{"start":{"line":98,"column":3},"end":{"line":98,"column":11}},"range":[1327,1335],"raw":"要写入的数据大小"}],"loc":{"start":{"line":98,"column":0},"end":{"line":98,"column":11}},"range":[1324,1335],"raw":"2. 要写入的数据大小"},{"type":"ListItem","spread":false,"checked":null,"children":[{"type":"Paragraph","children":[{"type":"Str","value":"要写入的数据在内存中的位置","loc":{"start":{"line":99,"column":3},"end":{"line":99,"column":16}},"range":[1339,1352],"raw":"要写入的数据在内存中的位置"}],"loc":{"start":{"line":99,"column":3},"end":{"line":99,"column":16}},"range":[1339,1352],"raw":"要写入的数据在内存中的位置"}],"loc":{"start":{"line":99,"column":0},"end":{"line":99,"column":16}},"range":[1336,1352],"raw":"3. 要写入的数据在内存中的位置"}],"loc":{"start":{"line":97,"column":0},"end":{"line":99,"column":16}},"range":[1308,1352],"raw":"1. 文件在打开文件表中的编号\n2. 要写入的数据大小\n3. 要写入的数据在内存中的位置"}],"loc":{"start":{"line":1,"column":0},"end":{"line":99,"column":16}},"range":[0,1352],"raw":"---\ntitle: '文件的基本操作'\ntags: ['操作系统','文件']\n---\n# 文件的基本操作\n\n## 创建文件(Create系统调用)\n\n### 需要提供的参数\n\n1. 文件所需要的外存空间大小\n2. 文件存放的路径\n3. 文件名\n\n### 创建文件的过程\n\n1. 在外存中找到文件所需要的磁盘空间\n2. 找到目录对应的目录表文件，在目录表文件中创建该文件相关的目录项，包含了文件的文静名、在外存中的位置等信息。\n\n******\n\n## 删除文件（Delete系统调用）\n\n### 需要提供的参数\n\n1. 文件存放的路径\n2. 文件名\n\n### 删除文件的过程\n\n1. 系统根据文件的路径找到相应的目录表文件，从目录表中找到对应的目录项\n2. 根据目录项中记录的文件在外存的位置，回收文件占用的磁盘块\n3. 从目录表删除文件对应的目录项\n\n******\n\n## 打开文件（Open系统调用）\n\n操作系统中，在对文件进行操作之前，要求用户使用open系统调用“打开文件”。\n\n### 需要提供的参数\n\n1. 文件存放的路径\n2. 文件名\n3. 要对文件进行的操作\n\n### 打开文件的过程\n\n1. 操作系统根据文件存放的路径找到对应的目录表文件\n2. 从目录表中找到文件名对应的目录项，并检查用户是否有该**文件的操作权限**\n3. 将目录项复制到内存的“打开文件表”中，并将对应表目的编号返回给用户，之后用户**使用打开文件表的编号**来指明要操作的文件。\n\n> 打开文件表存在于操作系统和进程中：\n>\n> 操作系统中的打开文件表是整个系统中所有进程的**打开文件表的汇总**，记录了“编号、外存地址、打开计数器”等信息，打开计数器记录了当前文件被多少个进程打开，某个进程关闭文件时，打开计数器减一，如果**打开计数器为0**的时候，可以删除对应的表项。\n>\n> 进程中的打开文件表是进程自己打开的文件的表，记录了“文件名、读写指针、访问权限、系统打开文件表的索引号”等信息\n\n*****\n\n## 关闭文件（Close系统调用）\n\n## 需要提供的参数\n\n1. 文件在打开文件表中的编号\n\n### 关闭文件的过程\n\n1. 将进程的打开文件表对应的表项删除\n2. 回收分配给该文件的内存空间等资源\n3. 系统打开文件表的打开计数器count-1，若count==0，就删除对应的表项\n\n******\n\n## 读文件（Read系统调用）\n\n在进行读文件系统调用之前**必须先进行打开文件系统调用**，此时在操作系统的打开文件表中已经有要读取的文件的表项了。\n\n### 需要的参数\n\n1. 文件在系统打开文件表中的编号\n2. 需要读入多少数据\n3. 读入的数据存放在内存的什么位置\n\n### 读取文件的过程\n\n操作系统根据read系统调用时，从读指针指向的系统外存中，将用户指定大小的数据读入用户指定的内存区域。\n\n******\n\n## 写文件（Write系统调用）\n\n在进行写文件系统调用之前，同样需要先调用系统的Open系统调用，此时要写入的文件已经在系统的打开文件表中。\n\n### 需要提供的参数\n\n1. 文件在打开文件表中的编号\n2. 要写入的数据大小\n3. 要写入的数据在内存中的位置"},"catalogue":{"title":"文件的基本操作","json-path":"2020-08-18-文件的基本操作.json","mdate":"2022-08-30T14:19:31.455Z","tags":["操作系统","文件"]}}